{"version":3,"file":"ej2-pdfviewer.umd.min.js","sources":["../src/pdfviewer/annotation/annotation.js","../src/pdfviewer/annotation/link-annotation.js","../src/pdfviewer/annotation/text-markup-annotation.js","../src/pdfviewer/base/navigation-pane.js","../src/pdfviewer/base/pdfviewer-base.js","../src/pdfviewer/base/text-layer.js","../src/pdfviewer/base/context-menu.js","../src/pdfviewer/magnification/magnification.js","../src/pdfviewer/navigation/page-navigation.js","../src/pdfviewer/thumbnail-view/thumbnail-view.js","../src/pdfviewer/toolbar/toolbar.js","../src/pdfviewer/toolbar/annotation-toolbar.js","../src/pdfviewer/pdfviewer.js","../src/pdfviewer/bookmark-view/bookmark-view.js","../src/pdfviewer/text-selection/text-selection.js","../src/pdfviewer/text-search/text-search.js","../src/pdfviewer/print/print.js"],"sourcesContent":["import { TextMarkupAnnotation } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Annotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.actionCollection = [];\n        /**\n         * @private\n         */\n        this.redoCollection = [];\n        /**\n         * @private\n         */\n        this.isPopupNoteVisible = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n    }\n    /**\n     * Set annotation type to be added in next user interaction in PDF Document.\n     * @param type\n     * @returns void\n     */\n    Annotation.prototype.setAnnotationMode = function (type) {\n        if (type === 'None') {\n            this.clearAnnotationMode();\n        }\n        else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n            if (this.textMarkupAnnotationModule) {\n                this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n            }\n        }\n    };\n    Annotation.prototype.clearAnnotationMode = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.deleteAnnotation = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n            if (this.pdfViewer.toolbarModule) {\n                if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false);\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.initializeCollection = function () {\n        this.actionCollection = [];\n        this.redoCollection = [];\n        if (!this.popupNote) {\n            this.createNote();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.addAction = function (pageNumber, index, annotation, actionString, property) {\n        var action = { pageIndex: pageNumber, index: index, annotation: annotation, action: actionString, modifiedProperty: property };\n        this.actionCollection.push(action);\n        this.updateToolbar();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.undo = function () {\n        var actionObject = this.actionCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.redoCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.redo = function () {\n        var actionObject = this.redoCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.actionCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    Annotation.prototype.updateToolbar = function () {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n        }\n    };\n    Annotation.prototype.createNote = function () {\n        // tslint:disable-next-line:max-line-length\n        this.popupNote = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note', className: 'e-pv-annotation-note', styles: 'display:none' });\n        this.popupNoteAuthor = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_author', className: 'e-pv-annotation-note-author' });\n        this.popupNote.appendChild(this.popupNoteAuthor);\n        // tslint:disable-next-line:max-line-length\n        this.popupNoteContent = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_content', className: 'e-pv-annotation-note-content' });\n        this.popupNote.appendChild(this.popupNoteContent);\n        this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n        var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n        if (author) {\n            this.popupNoteAuthor.textContent = author;\n        }\n        this.popupNoteContent.textContent = note;\n        if (type === 'Highlight') {\n            this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n        }\n        else if (type === 'Underline') {\n            this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n        }\n        else if (type === 'Strikethrough') {\n            this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n        }\n        this.popupNote.style.display = 'block';\n        var topPosition = (event.pageY - mainContainerPosition.top + 5);\n        var leftPosition = (event.pageX - mainContainerPosition.left + 5);\n        if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n            leftPosition = leftPosition - popupNoteClientRect.width;\n        }\n        if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n            topPosition = topPosition - popupNoteClientRect.height;\n        }\n        this.popupNote.style.top = topPosition + 'px';\n        this.popupNote.style.left = leftPosition + 'px';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.hidePopupNote = function () {\n        this.popupNote.style.display = 'none';\n    };\n    Annotation.prototype.createTextMarkupPopup = function () {\n        var _this = this;\n        var elementId = this.pdfViewer.element.id;\n        // tslint:disable-next-line:max-line-length\n        this.popupElement = createElement('div', { id: elementId + '_popup_annotation_note', className: 'e-pv-annotation-popup-menu', styles: 'display:none' });\n        var headerElement = createElement('div', { id: elementId + '_popup_header', className: 'e-pv-annotation-popup-header' });\n        // tslint:disable-next-line:max-line-length\n        this.authorPopupElement = createElement('div', { id: elementId + '_popup_author', className: 'e-pv-annotation-popup-author' });\n        headerElement.appendChild(this.authorPopupElement);\n        // tslint:disable-next-line:max-line-length\n        var closeBtn = createElement('span', { id: elementId + '_popup_close', className: 'e-pv-annotation-popup-close e-pv-icon' });\n        headerElement.appendChild(closeBtn);\n        this.popupElement.appendChild(headerElement);\n        // tslint:disable-next-line:max-line-length\n        this.modifiedDateElement = createElement('div', { id: elementId + '_popup_modified_time', className: 'e-pv-annotation-modified-time' });\n        this.popupElement.appendChild(this.modifiedDateElement);\n        // tslint:disable-next-line:max-line-length\n        var contentContainer = createElement('div', { id: elementId + '_popup_content_container', className: 'e-pv-annotation-popup-note-container' });\n        this.noteContentElement = createElement('div', { id: elementId + '_popup_content', className: 'e-pv-annotation-popup-content' });\n        this.noteContentElement.contentEditable = 'true';\n        contentContainer.appendChild(this.noteContentElement);\n        this.popupElement.appendChild(contentContainer);\n        this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n        closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n        closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n        this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n        window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n        this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n        window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n        this.noteContentElement.addEventListener('mousedown', function () { _this.noteContentElement.focus(); });\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMoveStart = function (event) {\n        if (event.type === 'touchstart') {\n            event = event.changedTouches[0];\n        }\n        if ((event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            this.isPopupMenuMoved = true;\n            var popupElementClientRect = this.popupElement.getBoundingClientRect();\n            this.clientX = event.clientX - popupElementClientRect.left;\n            // tslint:disable-next-line:max-line-length\n            this.clientY = (event.clientY - popupElementClientRect.top) + (this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMove = function (event) {\n        if (event.type === 'touchmove') {\n            event = event.changedTouches[0];\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.isPopupMenuMoved && (event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            var left = (event.clientX - this.clientX) + parseFloat(this.popupElement.style.left);\n            var top_1 = ((event.clientY - this.clientY) + parseFloat(this.popupElement.style.top));\n            this.clientX = event.clientX;\n            this.clientY = event.clientY;\n            var clientPosition = this.popupElement.getBoundingClientRect();\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (left > parseFloat(pageDiv.style.left) && (left + clientPosition.width) < (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                this.popupElement.style.left = (left) + 'px';\n            }\n            else {\n                this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            if (top_1 > parseFloat(pageDiv.style.top) && (top_1 + clientPosition.height) < (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                this.popupElement.style.top = (top_1) + 'px';\n            }\n            else {\n                this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n            }\n        }\n    };\n    Annotation.prototype.onPopupElementMoveEnd = function () {\n        this.isPopupMenuMoved = false;\n    };\n    Annotation.prototype.saveClosePopupMenu = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n        }\n        this.closePopupMenu();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.closePopupMenu = function () {\n        if (this.popupElement) {\n            this.popupElement.parentElement.removeChild(this.popupElement);\n            this.popupElement = null;\n            this.isPopupNoteVisible = false;\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showAnnotationPopup = function (event) {\n        if (this.textMarkupAnnotationModule) {\n            this.currentAnnotPageNumber = this.getEventPageNumber(event);\n            // tslint:disable-next-line:max-line-length\n            if (this.textMarkupAnnotationModule && (event.target !== (this.noteContentElement) || (event.target.contains(this.noteContentElement.childNodes[0])))) {\n                this.hidePopupNote();\n                if (!this.popupElement) {\n                    this.createTextMarkupPopup();\n                    this.popupElement.style.display = 'block';\n                    this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n                    // tslint:disable-next-line:max-line-length\n                    this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n                    this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n                    var clientPosition = this.popupElement.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n                    var canvasPosition = pageDiv.getBoundingClientRect();\n                    var topPosition = ((event.clientY) - canvasPosition.top) + parseFloat(pageDiv.style.top);\n                    var leftPosition = (event.clientX);\n                    if ((leftPosition + clientPosition.width) > (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                        this.popupElement.style.left = (leftPosition - clientPosition.width) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.left = leftPosition + 'px';\n                    }\n                    if ((topPosition + clientPosition.height) > (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                        this.popupElement.style.top = (topPosition - clientPosition.height) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.top = topPosition + 'px';\n                    }\n                    this.isPopupNoteVisible = true;\n                }\n            }\n        }\n    };\n    Annotation.prototype.getProperDate = function (date) {\n        var dateObject = new Date(date.toString());\n        if (isNaN(dateObject.getFullYear())) {\n            var dateString = date.slice(2, 16);\n            // tslint:disable-next-line:max-line-length\n            dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n            dateObject = new Date(dateString);\n        }\n        // tslint:disable-next-line:max-line-length\n        return (dateObject.getMonth() + 1) + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.getEventPageNumber = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line:max-line-length\n        var pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1];\n        // tslint:disable-next-line\n        return parseInt(pageString);\n    };\n    /**\n     * private\n     */\n    Annotation.prototype.clear = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.destroy = function () {\n        this.textMarkupAnnotationModule.clear();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.getModuleName = function () {\n        return 'Annotation';\n    };\n    return Annotation;\n}());\nexport { Annotation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined && linkPage[i] > 0) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                if (scrollValue !== undefined) {\n                    aTag.name = scrollValue.toString();\n                    aTag.onclick = function () {\n                        // tslint:disable-next-line:radix\n                        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                        return false;\n                    };\n                }\n                var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n                pageDiv.appendChild(aTag);\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n            if (pageDiv) {\n                var pageChildNodes = pageDiv.childNodes;\n                for (var i = 0; i < pageChildNodes.length; i++) {\n                    var childElement = pageChildNodes[i];\n                    if (childElement.tagName === 'A') {\n                        if (isAdd) {\n                            childElement.classList.add('e-pv-onselection');\n                        }\n                        else {\n                            childElement.classList.remove('e-pv-onselection');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * The `TextMarkupAnnotation` module is used to handle text markup annotation actions of PDF viewer.\n * @hidden\n */\nvar TextMarkupAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextMarkupAnnotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.currentTextMarkupAddMode = '';\n        /**\n         * @private\n         */\n        this.selectTextMarkupCurrentPage = null;\n        /**\n         * @private\n         */\n        this.currentTextMarkupAnnotation = null;\n        this.currentAnnotationIndex = null;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.highlightColor = pdfViewer.highlightSettings.color;\n        this.underlineColor = pdfViewer.underlineSettings.color;\n        this.strikethroughColor = pdfViewer.strikethroughSettings.color;\n        this.highlightOpacity = pdfViewer.highlightSettings.opacity;\n        this.underlineOpacity = pdfViewer.underlineSettings.opacity;\n        this.strikethroughOpacity = pdfViewer.strikethroughSettings.opacity;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        // tslint:disable-next-line:max-line-length\n        var annotationCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber, className: 'e-pv-annotation-canvas' });\n        annotationCanvas.width = pageWidth;\n        annotationCanvas.height = pageHeight;\n        annotationCanvas.style.display = displayMode;\n        pageDiv.appendChild(annotationCanvas);\n        return annotationCanvas;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotationsInPage = function (textMarkupAnnotations, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        this.renderTextMarkupAnnotations(textMarkupAnnotations, pageNumber, canvas, this.pdfViewerBase.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotations = function (textMarkupAnnotations, pageNumber, canvas, factor) {\n        if (canvas) {\n            canvas.width = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].width, factor);\n            canvas.height = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].height, factor);\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            // tslint:disable-next-line\n            var annotations = this.getAnnotations(pageNumber, textMarkupAnnotations);\n            if (annotations) {\n                for (var i = 0; i < annotations.length; i++) {\n                    // tslint:disable-next-line\n                    var annotation = annotations[i];\n                    var annotationObject = null;\n                    if (annotation.TextMarkupAnnotationType) {\n                        // tslint:disable-next-line:max-line-length\n                        annotationObject = { textMarkupAnnotationType: annotation.TextMarkupAnnotationType, color: annotation.Color, opacity: annotation.Opacity, bounds: annotation.Bounds, author: annotation.Author, subject: annotation.Subject, modifiedDate: annotation.ModifiedDate, note: annotation.Note, rect: annotation.Rect };\n                        this.storeAnnotations(pageNumber, annotationObject);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var type = annotation.TextMarkupAnnotationType ? annotation.TextMarkupAnnotationType : annotation.textMarkupAnnotationType;\n                    // tslint:disable-next-line\n                    var annotBounds = annotation.Bounds ? annotation.Bounds : annotation.bounds;\n                    var opacity = annotation.Opacity ? annotation.Opacity : annotation.opacity;\n                    var color = annotation.Color ? annotation.Color : annotation.color;\n                    switch (type) {\n                        case 'Highlight':\n                            this.renderHighlightAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Strikethrough':\n                            this.renderStrikeoutAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Underline':\n                            this.renderUnderlineAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                    }\n                }\n            }\n            if (pageNumber === this.selectTextMarkupCurrentPage) {\n                this.maintainAnnotationSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.drawTextMarkupAnnotations = function (type) {\n        this.isTextMarkupAnnotationMode = true;\n        this.currentTextMarkupAddMode = type;\n        var selectionObject = this.pdfViewer.textSelectionModule.selectionRangeArray;\n        if (selectionObject.length > 0) {\n            this.convertSelectionToTextMarkup(type, selectionObject, this.pdfViewerBase.getZoomFactor());\n        }\n        if (window.getSelection().toString()) {\n            var pageBounds = this.getDrawnBounds();\n            if (pageBounds.length > 0) {\n                for (var i = 0; i < pageBounds.length; i++) {\n                    // tslint:disable-next-line:max-line-length\n                    this.drawTextMarkups(type, pageBounds[i].bounds, pageBounds[i].pageIndex, pageBounds[i].rect, this.pdfViewerBase.getZoomFactor());\n                }\n            }\n        }\n        // this.pdfViewerBase.annotationHelper.redoCollection = [];\n        this.pdfViewer.textSelectionModule.clearTextSelection();\n    };\n    TextMarkupAnnotation.prototype.convertSelectionToTextMarkup = function (type, selectionObject, factor) {\n        for (var i = 0; i < selectionObject.length; i++) {\n            this.drawTextMarkups(type, selectionObject[i].rectangleBounds, selectionObject[i].pageNumber, selectionObject[i].bound, factor);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.drawTextMarkups = function (type, bounds, pageNumber, rect, factor) {\n        var annotation = null;\n        var context = this.getPageContext(pageNumber);\n        if (context) {\n            context.setLineDash([]);\n            switch (type) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.highlightColor, this.highlightOpacity, bounds, this.pdfViewer.highlightSettings.author, this.pdfViewer.highlightSettings.subject, this.pdfViewer.highlightSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderHighlightAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.strikethroughColor, this.strikethroughOpacity, bounds, this.pdfViewer.strikethroughSettings.author, this.pdfViewer.strikethroughSettings.subject, this.pdfViewer.strikethroughSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderStrikeoutAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.underlineColor, this.underlineOpacity, bounds, this.pdfViewer.underlineSettings.author, this.pdfViewer.underlineSettings.subject, this.pdfViewer.underlineSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderUnderlineAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n            }\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line\n            var settings = { opacity: annotation.opacity, color: annotation.color, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate };\n            var index = this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length - 1].index;\n            this.pdfViewer.fireAnnotationAdd(pageNumber, index, type, annotation.rect, settings);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderHighlightAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = bounds[i];\n            context.beginPath();\n            var x = bound.X ? bound.X : bound.left;\n            var y = bound.Y ? bound.Y : bound.top;\n            var width = bound.Width ? bound.Width : bound.width;\n            var height = bound.Height ? bound.Height : bound.height;\n            // tslint:disable-next-line:max-line-length\n            context.rect((x * factor), (y * factor), (width * factor), (height * factor));\n            context.globalAlpha = opacity * 0.5;\n            context.closePath();\n            context.fillStyle = color;\n            context.msFillRule = 'nonzero';\n            context.fill();\n        }\n        context.save();\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderStrikeoutAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, bound.x, bound.y, bound.width, (bound.height / 2), color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderUnderlineAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var boundValues = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, boundValues.x, boundValues.y, boundValues.width, boundValues.height, color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getProperBounds = function (bound) {\n        var x = bound.X ? bound.X : bound.left;\n        var y = bound.Y ? bound.Y : bound.top;\n        var width = bound.Width ? bound.Width : bound.width;\n        var height = bound.Height ? bound.Height : bound.height;\n        return { x: x, y: y, width: width, height: height };\n    };\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.drawLine = function (opacity, x, y, width, height, color, factor, context) {\n        context.globalAlpha = opacity;\n        context.beginPath();\n        context.moveTo((x * factor), (y + height) * factor);\n        context.lineTo((width + x) * factor, (y + height) * factor);\n        context.lineWidth = 1;\n        context.strokeStyle = color;\n        context.closePath();\n        context.msFillRule = 'nonzero';\n        context.stroke();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.printTextMarkupAnnotations = function (textMarkupAnnotations, pageIndex) {\n        var canvas = createElement('canvas', { id: this.pdfViewer.element.id + '_print_annotation_layer_' + pageIndex });\n        // tslint:disable-next-line\n        var annotations = this.getAnnotations(pageIndex, null);\n        if (annotations) {\n            this.renderTextMarkupAnnotations(null, pageIndex, canvas, 1);\n        }\n        else {\n            this.renderTextMarkupAnnotations(textMarkupAnnotations, pageIndex, canvas, 1);\n        }\n        var imageSource = canvas.toDataURL();\n        return imageSource;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveTextMarkupAnnotations = function () {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        // tslint:disable-next-line\n        var annotations = new Array();\n        var colorpick = new ColorPicker();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        // tslint:disable-next-line:max-line-length\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds));\n                        var colorString = colorpick.getValue(pageAnnotationObject.annotations[z].color, 'rgba');\n                        pageAnnotationObject.annotations[z].color = JSON.stringify(this.getRgbCode(colorString));\n                        pageAnnotationObject.annotations[z].rect = JSON.stringify(pageAnnotationObject.annotations[z].rect);\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.deleteTextMarkupAnnotation = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n            var deletedAnnotation = null;\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    deletedAnnotation = pageAnnotations.splice(i, 1)[0];\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, deletedAnnotation, 'Text Markup Deleted', null);\n                    this.currentAnnotationIndex = i;\n                }\n            }\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.currentTextMarkupAnnotation = null;\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, deletedAnnotation.textMarkupAnnotationType);\n            this.currentAnnotationIndex = null;\n            this.selectTextMarkupCurrentPage = null;\n            if (Browser.isDevice) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyColorProperty = function (color) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Color', color, null);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, true, false);\n            this.currentAnnotationIndex = null;\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyOpacityProperty = function (args) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Opacity', args.value / 100, args.name);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            if (args.name === 'changed') {\n                this.pdfViewerBase.isDocumentEdited = true;\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, false, true);\n                this.currentAnnotationIndex = null;\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.modifyAnnotationProperty = function (property, value, status) {\n        var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                if (property === 'Color') {\n                    pageAnnotations[i].color = value;\n                }\n                else if (property === 'Opacity') {\n                    pageAnnotations[i].opacity = value;\n                }\n                var date = new Date();\n                pageAnnotations[i].modifiedDate = date.toLocaleString();\n                this.currentAnnotationIndex = i;\n                if (status === null || status === 'changed') {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, this.currentTextMarkupAnnotation, 'Text Markup Property modified', property);\n                }\n                this.currentTextMarkupAnnotation = pageAnnotations[i];\n            }\n        }\n        return pageAnnotations;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.undoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.splice(index, 1);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 0, annotation);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.undoRedoPropertyChange = function (annotation, pageNumber, index, property) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (property === 'Color') {\n                var tempColor = pageAnnotations[index].color;\n                pageAnnotations[index].color = annotation.color;\n                annotation.color = tempColor;\n            }\n            else {\n                var tempOpacity = pageAnnotations[index].opacity;\n                pageAnnotations[index].opacity = annotation.opacity;\n                annotation.opacity = tempOpacity;\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        return annotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.redoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.push(annotation);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 1);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveNoteContent = function (pageNumber, note) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    pageAnnotations[i].note = note;\n                }\n            }\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.pdfViewerBase.isDocumentEdited = true;\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotation = function () {\n        this.selectTextMarkupCurrentPage = null;\n        this.currentTextMarkupAnnotation = null;\n        this.enableAnnotationPropertiesTool(false);\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotationSelection = function (pageNumber) {\n        var lowerPageIndex = (pageNumber - 2) >= 0 ? (pageNumber - 2) : 0;\n        // tslint:disable-next-line:max-line-length\n        var higherPageIndex = (pageNumber + 2) < this.pdfViewerBase.pageCount ? (pageNumber + 2) : this.pdfViewerBase.pageCount - 1;\n        for (var k = lowerPageIndex; k <= higherPageIndex; k++) {\n            this.clearAnnotationSelection(k);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getBoundsForSave = function (bounds) {\n        // tslint:disable-next-line\n        var newArray = [];\n        for (var i = 0; i < bounds.length; i++) {\n            var left = bounds[i].left ? bounds[i].left : bounds[i].Left;\n            var top_1 = bounds[i].top ? bounds[i].top : bounds[i].Top;\n            var height = bounds[i].height ? bounds[i].height : bounds[i].Height;\n            var width = bounds[i].width ? bounds[i].width : bounds[i].Width;\n            newArray.push({ left: left, top: top_1, width: width, height: height });\n        }\n        return newArray;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getRgbCode = function (colorString) {\n        var stringArray = colorString.split(',');\n        // tslint:disable-next-line:radix\n        var r = parseInt(stringArray[0].split('(')[1]);\n        // tslint:disable-next-line:radix\n        var g = parseInt(stringArray[1]);\n        // tslint:disable-next-line:radix\n        var b = parseInt(stringArray[2]);\n        return { r: r, g: g, b: b };\n    };\n    TextMarkupAnnotation.prototype.getDrawnBounds = function () {\n        var pageBounds = [];\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var range = document.createRange();\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode === selection.focusNode) {\n                var pageId = this.pdfViewerBase.textLayer.getPageIndex(selection.anchorNode);\n                if (!isNaN(pageId)) {\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + pageId).getBoundingClientRect();\n                    if (isBackWardSelection) {\n                        range.setStart(selection.focusNode, selection.focusOffset);\n                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                    }\n                    else {\n                        if (selection.anchorOffset < selection.focusOffset) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            range.setStart(selection.focusNode, selection.focusOffset);\n                            range.setEnd(selection.anchorNode, selection.anchorOffset);\n                        }\n                    }\n                    var boundingRect = range.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                    var rectangleArray = [];\n                    rectangleArray.push(rectangle);\n                    // tslint:disable-next-line\n                    var rect = { left: rectangle.left, top: rectangle.top, right: rectangle.right, bottom: rectangle.bottom };\n                    pageBounds.push({ pageIndex: pageId, bounds: rectangleArray, rect: rect });\n                }\n            }\n            else {\n                var startNode = void 0;\n                var endNode = void 0;\n                var selectionStartOffset = void 0;\n                var selectionEndOffset = void 0;\n                if (isBackWardSelection) {\n                    startNode = selection.focusNode;\n                    selectionStartOffset = selection.focusOffset;\n                    endNode = selection.anchorNode;\n                    selectionEndOffset = selection.anchorOffset;\n                }\n                else {\n                    startNode = selection.anchorNode;\n                    selectionStartOffset = selection.anchorOffset;\n                    endNode = selection.focusNode;\n                    selectionEndOffset = selection.focusOffset;\n                }\n                var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(startNode);\n                var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(startNode, anchorPageId);\n                var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(endNode);\n                var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(endNode, focusPageId);\n                var startOffset = 0;\n                var endOffset = 0;\n                var currentId = 0;\n                for (var i = anchorPageId; i <= focusPageId; i++) {\n                    var selectionRects = [];\n                    var pageStartId = void 0;\n                    var pageEndId = void 0;\n                    var pageStartOffset = void 0;\n                    var pageEndOffset = void 0;\n                    var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + i).getBoundingClientRect();\n                    if (i === anchorPageId) {\n                        currentId = anchorTextId;\n                    }\n                    else {\n                        currentId = 0;\n                    }\n                    for (var j = currentId; j < textDivs.length; j++) {\n                        var textElement = textDivs[j];\n                        if (j === currentId) {\n                            pageStartId = currentId;\n                            pageStartOffset = (i === anchorPageId) ? selectionStartOffset : 0;\n                        }\n                        else {\n                            pageEndId = j;\n                            pageEndOffset = (i === focusPageId) ? selectionEndOffset : textElement.textContent.length;\n                        }\n                        if (j === anchorTextId && i === anchorPageId) {\n                            startOffset = selectionStartOffset;\n                        }\n                        else {\n                            startOffset = 0;\n                        }\n                        if (j === focusTextId && i === focusPageId) {\n                            endOffset = selectionEndOffset;\n                        }\n                        else {\n                            endOffset = textElement.textContent.length;\n                        }\n                        for (var k = 0; k < textElement.childNodes.length; k++) {\n                            var node = textElement.childNodes[k];\n                            range.setStart(node, startOffset);\n                            range.setEnd(node, endOffset);\n                        }\n                        var boundingRect = range.getBoundingClientRect();\n                        // tslint:disable-next-line:max-line-length\n                        var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                        selectionRects.push(rectangle);\n                        range.detach();\n                        if (i === focusPageId && j === focusTextId) {\n                            break;\n                        }\n                    }\n                    var startElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageStartId).childNodes[0];\n                    var endElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageEndId).childNodes[0];\n                    var pageRange = document.createRange();\n                    pageRange.setStart(startElementNode, pageStartOffset);\n                    pageRange.setEnd(endElementNode, pageEndOffset);\n                    var pageRectBounds = pageRange.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageRectangle = { left: this.getDefaultValue(pageRectBounds.left - pageRect.left), top: this.getDefaultValue(pageRectBounds.top - pageRect.top), width: this.getDefaultValue(pageRectBounds.width), height: this.getDefaultValue(pageRectBounds.height), right: this.getDefaultValue(pageRectBounds.right - pageRect.left), bottom: this.getDefaultValue(pageRectBounds.bottom - pageRect.top) };\n                    // tslint:disable-next-line\n                    var rect = { left: pageRectangle.left, top: pageRectangle.top, right: pageRectangle.right, bottom: pageRectangle.bottom };\n                    pageBounds.push({ pageIndex: i, bounds: selectionRects, rect: rect });\n                }\n            }\n        }\n        selection.removeAllRanges();\n        return pageBounds;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotationsPinch = function (pageNumber) {\n        var annotCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (annotCanvas) {\n            var oldAnnotCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n            if (oldAnnotCanvas) {\n                if (annotCanvas) {\n                    oldAnnotCanvas.id = annotCanvas.id;\n                    annotCanvas.parentElement.removeChild(annotCanvas);\n                }\n                else {\n                    oldAnnotCanvas.id = this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber;\n                }\n                annotCanvas = oldAnnotCanvas;\n            }\n            annotCanvas.style.width = '';\n            annotCanvas.style.height = '';\n            annotCanvas.width = this.pdfViewerBase.pageSize[pageNumber].width * this.pdfViewerBase.getZoomFactor();\n            annotCanvas.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor();\n            this.renderTextMarkupAnnotations(null, pageNumber, annotCanvas, this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotations = function (pageNumber) {\n        var oldCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n        if (oldCanvas) {\n            oldCanvas.parentElement.removeChild(oldCanvas);\n        }\n        var newCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (newCanvas) {\n            newCanvas.style.display = 'block';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            canvas.style.width = width + 'px';\n            canvas.style.height = height + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseUp = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageNumber, canvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, canvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n                if (this.pdfViewer.toolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                }\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else {\n            if (!this.pdfViewerBase.isClickedOnScrollBar(event)) {\n                this.clearCurrentAnnotation();\n                this.clearCurrentAnnotationSelection(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationTouchEnd = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            this.clearCurrentAnnotationSelection(pageNumber);\n            var touchCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            // tslint:disable-next-line:max-line-length\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.touches[0].clientX, event.touches[0].clientY, pageNumber, touchCanvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, touchCanvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else if (this.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n            var number = this.selectTextMarkupCurrentPage;\n            this.selectTextMarkupCurrentPage = null;\n            this.clearAnnotationSelection(number);\n        }\n        else {\n            this.clearCurrentAnnotation();\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseMove = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line\n        var pageIndex = parseInt(eventTarget.id.split('_text_')[1]) || parseInt(eventTarget.id.split('_textLayer_')[1]) || parseInt(eventTarget.id.split('_annotationCanvas_')[1]);\n        if (pageIndex) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageIndex, canvas);\n            if (currentAnnot) {\n                eventTarget.style.cursor = 'pointer';\n                // this.showPopupNote(event, currentAnnot);\n            }\n            else {\n                this.pdfViewer.annotationModule.hidePopupNote();\n                if (this.pdfViewerBase.isPanMode && !this.pdfViewerBase.getAnnotationToolStatus()) {\n                    eventTarget.style.cursor = 'grab';\n                }\n                else {\n                    eventTarget.style.cursor = 'auto';\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.showPopupNote = function (event, annotation) {\n        if (annotation.note) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.showPopupNote(event, annotation.color, annotation.author, annotation.note, annotation.textMarkupAnnotationType);\n        }\n    };\n    TextMarkupAnnotation.prototype.getCurrentMarkupAnnotation = function (clientX, clientY, pageNumber, canvas) {\n        var currentTextMarkupAnnotations = [];\n        var canvasParentPosition = canvas.parentElement.getBoundingClientRect();\n        var leftClickPosition = clientX - canvasParentPosition.left;\n        var topClickPosition = clientY - canvasParentPosition.top;\n        var annotationList = this.getAnnotations(pageNumber, null);\n        var isAnnotationGot = false;\n        if (annotationList) {\n            for (var i = 0; i < annotationList.length; i++) {\n                var annotation = annotationList[i];\n                for (var j = 0; j < annotation.bounds.length; j++) {\n                    // tslint:disable-next-line\n                    var bound = annotation.bounds[j];\n                    var left = bound.left ? bound.left : bound.Left;\n                    var top_2 = bound.top ? bound.top : bound.Top;\n                    var width = bound.width ? bound.width : bound.Width;\n                    var height = bound.height ? bound.height : bound.Height;\n                    // tslint:disable-next-line:max-line-length\n                    if (leftClickPosition >= this.getMagnifiedValue(left, this.pdfViewerBase.getZoomFactor()) && leftClickPosition <= this.getMagnifiedValue(left + width, this.pdfViewerBase.getZoomFactor()) && topClickPosition >= this.getMagnifiedValue(top_2, this.pdfViewerBase.getZoomFactor()) && topClickPosition <= this.getMagnifiedValue(top_2 + height, this.pdfViewerBase.getZoomFactor())) {\n                        currentTextMarkupAnnotations.push(annotation);\n                        isAnnotationGot = true;\n                    }\n                    else {\n                        if (isAnnotationGot) {\n                            isAnnotationGot = false;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        var currentAnnot = null;\n        if (currentTextMarkupAnnotations.length > 1) {\n            currentAnnot = this.compareCurrentAnnotations(currentTextMarkupAnnotations);\n        }\n        else if (currentTextMarkupAnnotations.length === 1) {\n            currentAnnot = currentTextMarkupAnnotations[0];\n        }\n        return currentAnnot;\n    };\n    TextMarkupAnnotation.prototype.compareCurrentAnnotations = function (annotations) {\n        var previousX;\n        var currentAnnotation = null;\n        for (var i = 0; i < annotations.length; i++) {\n            if (i === annotations.length - 1) {\n                break;\n            }\n            // tslint:disable-next-line\n            var firstAnnotBounds = annotations[i].bounds;\n            var firstXposition = firstAnnotBounds[0].left ? firstAnnotBounds[0].left : firstAnnotBounds[0].Left;\n            var firstYposition = firstAnnotBounds[0].top ? firstAnnotBounds[0].top : firstAnnotBounds[0].Top;\n            // tslint:disable-next-line\n            var secondAnnotBounds = annotations[i + 1].bounds;\n            var secondXposition = secondAnnotBounds[0].left ? secondAnnotBounds[0].left : secondAnnotBounds[0].Left;\n            var secondYposition = secondAnnotBounds[0].top ? secondAnnotBounds[0].top : secondAnnotBounds[0].Top;\n            if ((firstXposition < secondXposition) || (firstYposition < secondYposition)) {\n                previousX = secondXposition;\n                currentAnnotation = annotations[i + 1];\n            }\n            else {\n                previousX = firstXposition;\n                currentAnnotation = annotations[i];\n            }\n            if (previousX && (i === (annotations.length - 2))) {\n                if ((previousX === firstXposition) && (previousX === secondXposition)) {\n                    previousX = secondXposition;\n                    currentAnnotation = annotations[i + 1];\n                }\n            }\n        }\n        return currentAnnotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clearAnnotationSelection = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        }\n    };\n    TextMarkupAnnotation.prototype.selectAnnotation = function (annotation, canvas) {\n        for (var i = 0; i < annotation.bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = annotation.bounds[i];\n            var x = bound.left ? bound.left : bound.Left;\n            var y = bound.top ? bound.top : bound.Top;\n            var width = bound.width ? bound.width : bound.Width;\n            var height = bound.height ? bound.height : bound.Height;\n            // tslint:disable-next-line:max-line-length\n            this.drawAnnotationSelectRect(canvas, this.getMagnifiedValue(x - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(y - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(width + 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(height + 0.5, this.pdfViewerBase.getZoomFactor()));\n        }\n    };\n    TextMarkupAnnotation.prototype.drawAnnotationSelectRect = function (canvas, x, y, width, height) {\n        var context = canvas.getContext('2d');\n        context.beginPath();\n        context.setLineDash([4 * this.pdfViewerBase.getZoomFactor()]);\n        context.globalAlpha = 1;\n        context.rect(x, y, width, height);\n        context.closePath();\n        context.strokeStyle = '#0000ff';\n        context.stroke();\n        context.save();\n    };\n    TextMarkupAnnotation.prototype.enableAnnotationPropertiesTool = function (isEnable) {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(isEnable);\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(isEnable);\n                var enable = isEnable;\n                if (this.isTextMarkupAnnotationMode) {\n                    enable = true;\n                }\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(enable);\n                if (this.currentTextMarkupAnnotation) {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, this.currentTextMarkupAnnotation.color);\n                }\n                else {\n                    if (!this.isTextMarkupAnnotationMode) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, '#000000');\n                    }\n                    else {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.maintainAnnotationSelection = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + this.selectTextMarkupCurrentPage);\n            if (canvas) {\n                this.selectAnnotation(this.currentTextMarkupAnnotation, canvas);\n            }\n        }\n    };\n    TextMarkupAnnotation.prototype.storeAnnotations = function (pageNumber, annotation) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        var index = 0;\n        if (!storeObject) {\n            var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n            markupAnnotation.annotations.push(annotation);\n            index = markupAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(markupAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        else {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var pageIndex = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        return index;\n    };\n    TextMarkupAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var index = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAnnotations = function (pageIndex, textMarkupAnnotations) {\n        // tslint:disable-next-line\n        var annotationCollection;\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = textMarkupAnnotations;\n            }\n        }\n        else {\n            annotationCollection = textMarkupAnnotations;\n        }\n        return annotationCollection;\n    };\n    TextMarkupAnnotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n        var index = null;\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].pageIndex === pageNumber) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAddedAnnotation = function (type, color, opacity, bounds, author, subject, predefinedDate, note, rect, pageNumber) {\n        var date = new Date();\n        // tslint:disable-next-line:max-line-length\n        var modifiedDate = predefinedDate ? predefinedDate : date.toLocaleString();\n        // tslint:disable-next-line\n        var annotation = { textMarkupAnnotationType: type, color: color, opacity: opacity, bounds: bounds, author: author, subject: subject, modifiedDate: modifiedDate, note: note, rect: rect };\n        var storedIndex = this.storeAnnotations(pageNumber, annotation);\n        this.pdfViewer.annotationModule.addAction(pageNumber, storedIndex, annotation, 'Text Markup Added', null);\n        return annotation;\n    };\n    TextMarkupAnnotation.prototype.getPageContext = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        var context = null;\n        if (canvas) {\n            context = canvas.getContext('2d');\n        }\n        return context;\n    };\n    TextMarkupAnnotation.prototype.getDefaultValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    TextMarkupAnnotation.prototype.getMagnifiedValue = function (value, factor) {\n        return value * factor;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clear = function () {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n    };\n    return TextMarkupAnnotation;\n}());\nexport { TextMarkupAnnotation };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { Toast } from '@syncfusion/ej2-notifications';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isTooltipCreated = false;\n        this.isThumbnail = false;\n        /**\n         * @private\n         */\n        this.isNavigationToolbarVisible = false;\n        /**\n         * @private\n         */\n        this.isBookmarkListOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        /**\n         * @private\n         */\n        this.isBookmarkOpen = false;\n        /**\n         * @private\n         */\n        this.isThumbnailOpen = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY,\n                proxy.sideBarResizer.offsetParent.clientWidth\n            ];\n            _this.previousX = event.clientX;\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            if (!_this.pdfViewerBase.getPopupNoteVisibleStatus()) {\n                event.preventDefault();\n                if (proxy.isDown && _this.sideBarContentContainer) {\n                    // prevent the sidebar from becoming too narrow, or from occupying more\n                    // than half of the available viewer width.\n                    if (_this.pdfViewer.enableRtl) {\n                        var currentWidth = _this.previousX - event.clientX;\n                        var width = currentWidth + proxy.offset[2];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.right = width + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    else {\n                        var width = event.clientX + proxy.offset[0];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.left = width + 'px';\n                        proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                    proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                    proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.pdfViewerBase.updateZoomValue();\n                    if (!proxy.bookmarkButton.children[0].classList.contains('e-pv-bookmark-disable-icon')) {\n                        proxy.pdfViewer.bookmarkViewModule.setBookmarkContentHeight();\n                    }\n                }\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            _this.sideBarContent.setAttribute('aria-label', 'Thumbnail View Panel');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        /**\n         * @private\n         */\n        this.openThumbnailPane = function () {\n            var proxy = _this;\n            var sideBarContent = document.getElementById(_this.pdfViewer.element.id + '_sideBarContent');\n            var sideBarContentContainer = document.getElementById(_this.pdfViewer.element.id + '_sideBarContentContainer');\n            var viewerContainer = document.getElementById(_this.pdfViewer.element.id + '_viewerContainer');\n            var pageContainer = document.getElementById(_this.pdfViewer.element.id + '_pageViewContainer');\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'block';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarResizer').style.display = 'none';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarTitleContainer').style.display = 'none';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarContentSplitter').style.display = 'none';\n            sideBarContent.classList.add('e-thumbnail');\n            sideBarContentContainer.classList.add('e-thumbnail');\n            if (sideBarContentContainer) {\n                if (proxy.isThumbnail) {\n                    sideBarContentContainer.style.display = 'none';\n                    viewerContainer.style.width = proxy.pdfViewer.element.clientWidth + 'px';\n                    pageContainer.style.width = viewerContainer.clientWidth + 'px';\n                    viewerContainer.style.left = sideBarContentContainer.clientWidth + 'px';\n                    proxy.pdfViewerBase.updateZoomValue();\n                    proxy.isThumbnail = false;\n                }\n                else {\n                    sideBarContent.focus();\n                    sideBarContentContainer.style.display = 'block';\n                    // tslint:disable-next-line:max-line-length\n                    viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - sideBarContentContainer.clientWidth) + 'px';\n                    pageContainer.style.width = viewerContainer.clientWidth + 'px';\n                    viewerContainer.style.left = (sideBarContentContainer.clientWidth) + 'px';\n                    proxy.pdfViewerBase.updateZoomValue();\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.isThumbnail = true;\n                }\n            }\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.sideBarContent.setAttribute('aria-label', 'Bookmark View Panel');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        if (!Browser.isDevice) {\n            this.createNavigationPane();\n        }\n    };\n    NavigationPane.prototype.createNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar', attrs: { 'role': 'toolbar', 'aria-orientation': 'vertical', 'tabindex': '-1' } });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbar.style.cssFloat = 'right';\n            this.sideBarToolbar.style.right = 1 + 'px';\n            this.sideBarToolbar.style.position = 'relative';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbarSplitter.classList.add('e-right');\n        }\n        else {\n            this.sideBarToolbarSplitter.classList.add('e-left');\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentContainer.classList.add('e-right');\n        }\n        else {\n            this.sideBarContentContainer.classList.add('e-left');\n        }\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentSplitter.style.right = 0 + 'px';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content', attrs: { 'tabindex': '0' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContent.style.right = 0 + 'px';\n            this.sideBarContent.style.direction = 'rtl';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitleContainer.style.right = 0 + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title', attrs: { 'tabindex': '-1' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitle.classList.add('e-right');\n        }\n        else {\n            this.sideBarTitle.classList.add('e-left');\n        }\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarResizer.classList.add('e-right');\n        }\n        else {\n            this.sideBarResizer.classList.add('e-left');\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        if (!this.pdfViewer.enableRtl) {\n            this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        }\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.adjustPane = function () {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        if (toolbarHeight === 0) {\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(toolbarContainer)['height']) + 1;\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar.style.top = toolbarHeight + 'px';\n        this.sideBarContentContainer.style.top = toolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + 'px';\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createNavigationPaneMobile = function (option) {\n        var _this = this;\n        this.isNavigationToolbarVisible = true;\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_navigationToolbar', className: 'e-pv-nav-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n        var items;\n        if (option === 'search') {\n            var searchTemplate = '<div class=\"e-input-group e-pv-search-input-mobile\" id=\"' + this.pdfViewer.element.id +\n                '_search_input_container\"><input class=\"e-input\" type=\"text\" placeholder=\"' +\n                this.pdfViewer.localeObj.getConstant('Find in document') + '\" id=\"' +\n                this.pdfViewer.element.id + '_search_input\"></input></div>';\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { template: searchTemplate },\n                {\n                    prefixIcon: 'e-pv-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_search_box-icon',\n                    click: function () {\n                        var iconElement = _this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n                        if (iconElement.classList.contains('e-pv-search-close')) {\n                            _this.enableSearchItems(false);\n                        }\n                        _this.pdfViewer.textSearchModule.searchButtonClick(iconElement, _this.searchInput);\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-prev-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_prev_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchPrevious();\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-next-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_next_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchNext();\n                    }\n                }\n            ];\n        }\n        else {\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { text: this.pdfViewer.localeObj.getConstant('Bookmarks') }\n            ];\n        }\n        this.toolbar = new Tool({ items: items, width: '', height: '', overflowMode: 'Popup' });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        if (option === 'search') {\n            this.initiateSearchBox();\n        }\n        else {\n            this.initiateBookmarks();\n        }\n    };\n    NavigationPane.prototype.initiateSearchBox = function () {\n        var _this = this;\n        this.searchInput = this.pdfViewerBase.getElement('_search_input');\n        this.pdfViewer.textSearchModule.searchBtn = this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n        this.searchInput.addEventListener('keyup', function (event) {\n            _this.enableSearchItems(true);\n            var searchString = _this.searchInput.value;\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n            }\n            else {\n                _this.pdfViewer.textSearchModule.resetVariables();\n            }\n        });\n        this.pdfViewer.textSearchModule.searchInput = this.searchInput;\n        this.setSearchInputWidth();\n        this.enableSearchItems(false);\n        this.searchInput.focus();\n    };\n    NavigationPane.prototype.enableSearchItems = function (isEnable) {\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_prev_occurrence').parentElement, isEnable);\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_next_occurrence').parentElement, isEnable);\n    };\n    NavigationPane.prototype.initiateBookmarks = function () {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = 'none';\n        }\n        // tslint:disable-next-line:max-line-length\n        var bookmarkContainer = createElement('div', { id: this.pdfViewer.element.id + '_bookmarks_container', className: 'e-pv-bookmark-container' });\n        bookmarkContainer.style.width = '100%';\n        bookmarkContainer.style.height = this.pdfViewerBase.viewerContainer.style.height;\n        this.pdfViewerBase.getElement('_viewerMainContainer').appendChild(bookmarkContainer);\n        this.pdfViewerBase.viewerContainer.style.display = 'none';\n        this.isBookmarkListOpen = true;\n        this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile();\n    };\n    NavigationPane.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        this.pdfViewer.textSearchModule.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.goBackToToolbar = function () {\n        this.isNavigationToolbarVisible = false;\n        this.pdfViewer.textSearchModule.cancelTextSearch();\n        this.searchInput = null;\n        if (this.pdfViewer.bookmarkViewModule.childNavigateCount !== 0) {\n            this.pdfViewer.bookmarkViewModule.bookmarkList.back();\n            this.pdfViewer.bookmarkViewModule.childNavigateCount--;\n        }\n        else {\n            if (this.toolbar != null) {\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n            var bookmarkContainer = this.pdfViewerBase.getElement('_bookmarks_container');\n            if (bookmarkContainer) {\n                bookmarkContainer.parentElement.removeChild(bookmarkContainer);\n                if (Browser.isDevice) {\n                    this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n                }\n            }\n            if (this.toolbarElement && this.toolbarElement.parentElement != null) {\n                this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n            }\n            this.pdfViewerBase.viewerContainer.style.display = 'block';\n            this.isBookmarkListOpen = false;\n            if (!this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled) {\n                this.pdfViewer.toolbarModule.showToolbar(true);\n                this.pdfViewerBase.onWindowResize();\n            }\n        }\n    };\n    NavigationPane.prototype.setSearchInputWidth = function () {\n        var searchInputParent = this.searchInput.parentElement;\n        var padding = window.getComputedStyle(searchInputParent.parentElement, null).getPropertyValue('padding-left');\n        // tslint:disable-next-line:max-line-length\n        var width = this.toolbarElement.clientWidth - this.getParentElementSearchBox('_backward').clientWidth\n            - this.getParentElementSearchBox('_search_box-icon').clientWidth - this.getParentElementSearchBox('_prev_occurrence').clientWidth\n            - this.getParentElementSearchBox('_next_occurrence').clientWidth - 6;\n        if (padding !== '') {\n            width = width - (parseFloat(padding) * 2);\n        }\n        searchInputParent.style.width = width + 'px';\n    };\n    NavigationPane.prototype.getParentElementSearchBox = function (idString) {\n        return this.pdfViewerBase.getElement(idString).parentElement;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createTooltipMobile = function (text) {\n        if (!this.isTooltipCreated) { //boolean to prevent again toast creation.\n            // tslint:disable-next-line:max-line-length\n            var tooltipDiv = createElement('div', { className: 'e-pv-container-tooltip', id: this.pdfViewer.element.id + '_container_tooltip' });\n            this.pdfViewer.element.appendChild(tooltipDiv);\n            // tslint:disable-next-line:max-line-length\n            this.toastObject = new Toast({ title: text, target: this.pdfViewer.element, close: this.onTooltipClose.bind(this), position: { X: 0, Y: 0 }, animation: { hide: { duration: 200, effect: 'FadeOut' } } });\n            this.toastObject.appendTo(tooltipDiv);\n            var y = this.pdfViewer.element.clientHeight * 0.65;\n            var x = (this.pdfViewer.element.clientWidth - tooltipDiv.clientWidth) / 2;\n            this.isTooltipCreated = true;\n            this.toastObject.show({ position: { X: x, Y: y } });\n            var tooltipChild = tooltipDiv.firstElementChild;\n            if (tooltipChild) {\n                tooltipChild.style.width = 'auto';\n            }\n        }\n        else {\n            if (this.toastObject) {\n                this.toastObject.title = text;\n                var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n                var tooltipChild = tooltipElement.firstElementChild;\n                if (tooltipChild) {\n                    tooltipChild.style.width = 'auto';\n                    tooltipChild.firstElementChild.firstElementChild.textContent = text;\n                }\n            }\n        }\n    };\n    NavigationPane.prototype.onTooltipClose = function (args) {\n        this.isTooltipCreated = false;\n        var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n        this.pdfViewer.textSearchModule.isMessagePopupOpened = false;\n        this.toastObject.destroy();\n        tooltipElement.parentElement.removeChild(tooltipElement);\n        this.toastObject = null;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.toolbarResize = function () {\n        if (this.searchInput) {\n            this.searchInput.style.width = 'auto';\n            this.setSearchInputWidth();\n        }\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled', 'aria-label': 'Page Thumbnails', 'tabindex': '-1' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled', 'aria-label': 'Bookmarks', 'tabindex': '-1' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        if (this.pdfViewer.enableRtl) {\n            this.closeDiv.style.left = 8 + 'px';\n        }\n        else {\n            this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        this.resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        this.setResizeIconTop();\n        this.resizeIcon.style.position = 'absolute';\n        this.resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        this.resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(this.resizeIcon);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.setResizeIconTop = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.sideBarToolbar && this.sideBarToolbar.clientHeight && this.resizeIcon.style.top === '') {\n            this.resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        }\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                proxy.pdfViewerBase.viewerContainer.style.right = (proxy.sideToolbarWidth) + 'px';\n            }\n            else {\n                proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            }\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            if (this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                this.pdfViewerBase.viewerContainer.style.left = 1 + 'px';\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            }\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.isDocumentEdited = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        /**\n         * @private\n         */\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.previousTime = 0;\n        this.currentTime = 0;\n        this.isTouchScrolled = false;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        /**\n         * @private\n         */\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        this.scrollX = 0;\n        this.scrollY = 0;\n        this.ispageMoved = false;\n        this.isThumb = false;\n        this.isTapHidden = false;\n        // tslint:disable-next-line\n        this.singleTapTimer = null;\n        this.tapCount = 0;\n        /**\n         * @private\n         */\n        this.isInitialLoaded = false;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            if (_this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                var toolbarHeight = proxy.getElement('_toolbarContainer').getBoundingClientRect().height;\n                if (proxy.isAnnotationToolbarHidden() || Browser.isDevice) {\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight);\n                }\n                else {\n                    var annotationToolbarHeight = proxy.getElement('_annotation_toolbar').getBoundingClientRect().height;\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n                }\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            if (proxy.pdfViewer.bookmarkViewModule && Browser.isDevice) {\n                var bookmarkContainer = proxy.getElement('_bookmarks_container');\n                if (bookmarkContainer) {\n                    bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n                }\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule && !Browser.isDevice) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            if (!proxy.navigationPane.isBookmarkListOpen) {\n                proxy.updateZoomValue();\n            }\n            if (Browser.isDevice) {\n                proxy.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width)) + 'px';\n                proxy.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(proxy.mobilePageNoContainer.style.width) / 2) + 'px';\n                proxy.mobilePageNoContainer.style.top = (proxy.pdfViewer.element.clientHeight / 2) + 'px';\n                proxy.updateMobileScrollerPosition();\n            }\n            else {\n                proxy.navigationPane.setResizeIconTop();\n            }\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0 && !_this.getPopupNoteVisibleStatus()) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (_this.isViewerMouseDown) {\n                    if (_this.scrollHoldTimer) {\n                        clearTimeout(_this.scrollHoldTimer);\n                        _this.scrollHoldTimer = null;\n                    }\n                    if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                        _this.pageViewScrollChanged(_this.currentPageNumber);\n                    }\n                }\n                if (event.button === 0) {\n                    // 0 is for left button.\n                    var eventTarget = event.target;\n                    if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                        var idStringArray = eventTarget.id.split('_');\n                        // tslint:disable-next-line\n                        _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                    }\n                    if (_this.isTextMarkupAnnotationModule()) {\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n                _this.isViewerMouseDown = false;\n            }\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    case 90: //z key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.undo();\n                        }\n                        break;\n                    case 89: //y key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.redo();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else {\n                switch (event.keyCode) {\n                    case 46:\n                        if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                            _this.pdfViewer.annotationModule.deleteAnnotation();\n                        }\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                            _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                        }\n                        else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n                            // tslint:disable-next-line:max-line-length\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                        }\n                    }\n                }\n                else if (_this.getCurrentTextMarkupAnnotation()) {\n                    // this.pdfViewer.annotationModule.showAnnotationPopup(event);\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        // tslint:disable-next-line\n        this.onWindowMouseUp = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (event.button === 0) {\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                        }\n                        if (_this.viewerContainer.contains(event.target)) {\n                            if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                            else {\n                                if (window.getSelection().anchorNode !== null) {\n                                    _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                                }\n                            }\n                        }\n                    }\n                    else if (_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                    }\n                }\n                else if (event.button === 2) {\n                    if (_this.viewerContainer.contains(event.target)) {\n                        window.getSelection().removeAllRanges();\n                    }\n                }\n                if (_this.isViewerMouseDown) {\n                    _this.isViewerMouseDown = false;\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.clear();\n                        _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                    }\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                _this.preventTouchEvent(event);\n            }\n            if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            _this.scrollY = touchPoints[0].clientY;\n            _this.previousTime = new Date().getTime();\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (Browser.isDevice && _this.pageCount > 0 && !_this.isThumb && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                    _this.handleTaps(touchPoints);\n                }\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n                if (Browser.isDevice) {\n                    clearTimeout(_this.singleTapTimer);\n                    _this.tapCount = 0;\n                }\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            if (Browser.isDevice) {\n                clearTimeout(_this.singleTapTimer);\n                _this.tapCount = 0;\n            }\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.isTouchScrolled = true;\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n            if (Browser.isDevice && _this.isTouchScrolled) {\n                _this.currentTime = new Date().getTime();\n                var duration = _this.currentTime - _this.previousTime;\n                // tslint:disable-next-line\n                var difference = _this.scrollY - event.changedTouches[0].pageY;\n                // tslint:disable-next-line\n                var speed = (difference) / (duration);\n                if (Math.abs(speed) > 1.5) {\n                    // tslint:disable-next-line\n                    var scrollTop = (difference) + ((duration) * speed);\n                    _this.viewerContainer.scrollTop += scrollTop;\n                    _this.updateMobileScrollerPosition();\n                }\n            }\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnScroll = function (event) {\n            var proxy = _this;\n            var scrollposX = 0;\n            var scrollposY = 0;\n            if (event.touches && Browser.isDevice) {\n                // tslint:disable-next-line\n                var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n                if (_this.isThumb) {\n                    _this.ispageMoved = true;\n                    _this.mobilePageNoContainer.style.display = 'block';\n                    scrollposX = event.touches[0].pageX - _this.scrollX;\n                    scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n                    _this.viewerContainer.scrollTop = scrollposY * ratio;\n                    // tslint:disable-next-line\n                    var containerValue = event.touches[0].pageY;\n                    if (_this.viewerContainer.scrollTop !== 0 && ((containerValue) <= _this.viewerContainer.clientHeight)) {\n                        _this.mobileScrollerContainer.style.top = containerValue + 'px';\n                    }\n                }\n                else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                    _this.mobilePageNoContainer.style.display = 'none';\n                    scrollposY = _this.touchClientY - event.touches[0].pageY;\n                    scrollposX = _this.touchClientX - event.touches[0].pageX;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + (scrollposY);\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + (scrollposX);\n                    // tslint:disable-next-line\n                    _this.updateMobileScrollerPosition();\n                    _this.touchClientY = event.touches[0].pageY;\n                    _this.touchClientX = event.touches[0].pageX;\n                }\n            }\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            // tslint:disable-next-line:max-line-length\n            if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n                _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.viewerContainer.setAttribute('aria-labelledby', _this.pdfViewer.element.id + '_pageDiv_' + (_this.currentPageNumber - 1));\n                if (!Browser.isDevice) {\n                    _this.pdfViewer.toolbarModule.updateNavigationButtons();\n                }\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            if (Browser.isDevice) {\n                this.pdfViewer.element.classList.add('e-pv-mobile-view');\n            }\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container', attrs: { 'aria-label': 'pdfviewer scroll view' } });\n            if (Browser.isDevice) {\n                this.createMobilePageNumberContainer();\n            }\n            this.viewerContainer.tabIndex = 0;\n            if (this.pdfViewer.enableRtl) {\n                this.viewerContainer.style.direction = 'rtl';\n            }\n            element.style.touchAction = 'pan-x pan-y';\n            this.setMaximumHeight(element);\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = this.pdfViewer.element.clientWidth;\n            if (!Browser.isDevice) {\n                viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0);\n            }\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(this.mobileScrollerContainer.style.width)) + 'px';\n                this.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(this.mobilePageNoContainer.style.width) / 2) + 'px';\n                this.mobilePageNoContainer.style.top = (this.pdfViewer.element.clientHeight / 2) + 'px';\n                this.mobilePageNoContainer.style.display = 'none';\n                this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n                this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n                this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n                this.viewerContainer.appendChild(this.mobilePageNoContainer);\n                this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n                this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container', attrs: { 'tabindex': '0', 'aria-label': 'pdfviewer Page View' } });\n            if (this.pdfViewer.enableRtl) {\n                this.pageContainer.style.direction = 'ltr';\n            }\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            this.createPrintPopup();\n            if (Browser.isDevice) {\n                this.createGoToPagePopup();\n            }\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule && !Browser.isDevice) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.initializeCollection();\n            }\n        }\n    };\n    PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.mobilePageNoContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilepagenoContainer', className: 'e-pv-mobilepagenoscroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilecurrentPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilecurrentpageContainer', className: 'e-pv-mobilecurrentpage-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilenumberContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiledashedlineContainer', className: 'e-pv-mobiledashedline-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobiletotalPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiletotalpageContainer', className: 'e-pv-mobiletotalpage-container' });\n        this.mobileScrollerContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilescrollContainer', className: 'e-pv-mobilescroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobileSpanContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilespanContainer', className: 'e-pv-mobilespanscroll-container' });\n        this.mobileSpanContainer.innerHTML = '1';\n        this.mobilecurrentPageContainer.innerHTML = '1';\n        this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n        this.mobileScrollerContainer.style.cssFloat = 'right';\n        this.mobileScrollerContainer.style.width = '40px';\n        this.mobileScrollerContainer.style.height = '32px';\n        this.mobileScrollerContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.width = '120px';\n        this.mobilePageNoContainer.style.height = '100px';\n        this.mobilePageNoContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.position = 'fixed';\n        this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n        this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n        this.mobileScrollerContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        if (this.pdfViewer.interactionMode === 'Pan') {\n            this.initiatePanning();\n        }\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n        this.ispageMoved = false;\n        this.isThumb = true;\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n                var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n                this.pdfViewer.toolbar.showToolbar(true);\n            }\n        }\n        this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.setMaximumHeight = function (element) {\n        if (!Browser.isDevice) {\n            element.style.minHeight = '500px';\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n        if (!this.ispageMoved) {\n            this.goToPagePopup.show();\n        }\n        this.isThumb = false;\n        this.ispageMoved = false;\n        this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n        this.mobilePageNoContainer.style.display = 'none';\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = '';\n                this.mobileScrollerContainer.style.top = (this.toolbarHeight) + 'px';\n            }\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        if (Browser.isDevice) {\n            this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n            this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            this.promptElement.focus();\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '48px';\n            spinnerElement.style.width = '48px';\n            spinnerElement.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.isInitialLoaded = false;\n        this.initiateTextSelectMode();\n        if (!Browser.isDevice) {\n            if (this.navigationPane.sideBarToolbar) {\n                this.navigationPane.clear();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.clear();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.initializeCollection();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        this.windowSessionStorageClear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        if (Browser.isDevice) {\n            this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n        }\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        this.contextMenuModule.destroy();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            if (this.pdfViewer.ajaxRequestSettings) {\n                if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n                    this.setCustomAjaxHeaders(request_1);\n                }\n            }\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        this.sessionStorage.forEach(function (element) {\n            window.sessionStorage.removeItem(element);\n        });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        if (this.currentPageNumber > 0) {\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n            this.corruptPopup.enableRtl = true;\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n        }\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container'\n        });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container'\n        });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createGoToPagePopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_goTopage_popup', className: 'e-pv-gotopage-popup' });\n        this.goToPageElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n        popupElement.appendChild(this.goToPageElement);\n        var inputContainer = createElement('span', { className: 'e-pv-text-input' });\n        // tslint:disable-next-line:max-line-length\n        this.goToPageInput = createElement('input', { id: this.pdfViewer.element.id + '_page_input', className: 'e-input' });\n        this.goToPageInput.type = 'text';\n        this.goToPageInput.style.maxWidth = '80%';\n        this.pageNoContainer = createElement('span', { className: '.e-pv-number-ofpages' });\n        inputContainer.appendChild(this.goToPageInput);\n        inputContainer.appendChild(this.pageNoContainer);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.goToPagePopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('GoToPage'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') },\n                    click: this.GoToPageCancelClick.bind(this),\n                },\n                // tslint:disable-next-line:max-line-length\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Apply'), disabled: true, cssClass: 'e-pv-gotopage-apply-btn', isPrimary: true },\n                    click: this.GoToPageApplyClick.bind(this),\n                },\n            ], close: this.closeGoToPagePopUp.bind(this),\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.goToPagePopup.enableRtl = true;\n        }\n        this.goToPagePopup.appendTo(popupElement);\n        var goToPageTextBox = new NumericTextBox({ format: '##', showSpinButton: false });\n        goToPageTextBox.appendTo(this.goToPageInput);\n        this.goToPageInput.addEventListener('keyup', function () {\n            // tslint:disable-next-line\n            var inputValue = _this.goToPageInput.value;\n            if (inputValue !== '' && parseFloat(inputValue) > 0 && (_this.pdfViewer.pageCount + 1) > parseFloat(inputValue)) {\n                _this.EnableApplyButton();\n            }\n            else {\n                _this.DisableApplyButton();\n            }\n        });\n    };\n    PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n        this.goToPageInput.value = '';\n        this.DisableApplyButton();\n    };\n    PdfViewerBase.prototype.EnableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.removeAttribute('disabled');\n    };\n    PdfViewerBase.prototype.DisableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.setAttribute('disabled', true);\n    };\n    PdfViewerBase.prototype.GoToPageCancelClick = function () {\n        this.goToPagePopup.hide();\n    };\n    PdfViewerBase.prototype.GoToPageApplyClick = function () {\n        this.goToPagePopup.hide();\n        // tslint:disable-next-line\n        var pageNumber = this.goToPageInput.value;\n        this.pdfViewer.navigation.goToPage(pageNumber);\n        this.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n            // tslint:disable-next-line\n            var differenceRatio = (this.viewerContainer.scrollTop) / ratio;\n            this.mobileScrollerContainer.style.top = (this.toolbarHeight + differenceRatio) + 'px';\n        }\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup', attrs: { 'tabindex': '-1' } });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt', attrs: { 'tabindex': '-1' } });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false,\n            close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (!Browser.isDevice) {\n            this.passwordPopup.buttons = [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ];\n        }\n        else {\n            this.passwordPopup.buttons = [\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) },\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                }\n            ];\n        }\n        if (this.pdfViewer.enableRtl) {\n            this.passwordPopup.enableRtl = true;\n        }\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n        this.enableAnnotationAddTools(false);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n        if (!Browser.isDevice) {\n            this.enableAnnotationAddTools(true);\n        }\n    };\n    PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n            }\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.handleTaps = function (touchPoints) {\n        var _this = this;\n        this.singleTapTimer = setTimeout(function () { _this.onSingleTap(touchPoints); }, 300);\n        this.tapCount++;\n        // tslint:disable-next-line\n        var timer = setTimeout(function () { _this.onDoubleTap(touchPoints); }, 200);\n        if (this.tapCount > 2) {\n            this.tapCount = 0;\n        }\n    };\n    PdfViewerBase.prototype.onSingleTap = function (touches) {\n        if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible) {\n            if (this.pdfViewer.toolbarModule) {\n                if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                    (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                    if (!this.isTapHidden) {\n                        this.viewerContainer.scrollTop -= this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                        if (this.pdfViewer.toolbar.moreDropDown) {\n                            var dropDown = this.getElement('_more_option-popup');\n                            if (dropDown.firstElementChild) {\n                                dropDown.classList.remove('e-popup-open');\n                                dropDown.classList.add('e-popup-close');\n                                dropDown.removeChild(dropDown.firstElementChild);\n                            }\n                        }\n                    }\n                    else {\n                        this.viewerContainer.scrollTop += this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        // tslint:disable-next-line:max-line-length\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n                    }\n                    if (this.isTapHidden && Browser.isDevice) {\n                        this.mobileScrollerContainer.style.display = '';\n                        this.updateMobileScrollerPosition();\n                    }\n                    else if (Browser.isDevice && this.getSelectTextMarkupCurrentPage() == null) {\n                        this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    if (this.getSelectTextMarkupCurrentPage() == null) {\n                        this.pdfViewer.toolbarModule.showToolbar(this.isTapHidden);\n                        this.isTapHidden = !this.isTapHidden;\n                    }\n                }\n                this.tapCount = 0;\n            }\n        }\n    };\n    PdfViewerBase.prototype.onDoubleTap = function (touches) {\n        if (this.tapCount === 2) {\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            this.tapCount = 0;\n            if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                if (this.pdfViewer.magnification) {\n                    this.pdfViewer.magnification.onDoubleTapMagnification();\n                }\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                this.isTapHidden = false;\n                clearTimeout(this.singleTapTimer);\n            }\n        }\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n            if (Browser.isDevice && this.mobiletotalPageContainer) {\n                this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n                this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n            }\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * window.devicePixelRatio;\n                                canvas_1.width = pageWidth_1 * window.devicePixelRatio;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                _this.isInitialLoaded = true;\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.isTextMarkupAnnotationModule()) {\n                    // tslint:disable-next-line\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(data['textMarkupAnnotation'], pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        // tslint:disable-next-line\n        var rotation = data['rotation'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (!textLayer) {\n            // tslint:disable-next-line:max-line-length\n            textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n        }\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div', attrs: { 'tabindex': '0' } });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        if (this.pdfViewer.enableRtl) {\n            pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        else {\n            pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = displayMode;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n        }\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                if (!this.pdfViewer.enableRtl) {\n                    pageDiv.style.left = leftPosition + 'px';\n                }\n                else {\n                    pageDiv.style.right = leftPosition + 'px';\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        blobUrl = URL.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n            jsonObject = { hashId: this.hashId, textMarkupAnnotations: textMarkupAnnotationCollection };\n        }\n        else {\n            jsonObject = { hashId: this.hashId };\n        }\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                        window.navigator.msSaveOrOpenBlob(blobUrl, _this.pdfViewer.fileName);\n                    }\n                    else {\n                        _this.downloadDocument(blobUrl);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        this.showPageLoadingIndicator(pageIndex, true);\n        if (this.getPagesZoomed()) {\n            if (this.isInitialLoaded) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                if (this.isInitialLoaded) {\n                    this.showPageLoadingIndicator(pageIndex, false);\n                }\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        if (this_1.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n                            this_1.setCustomAjaxHeaders(request);\n                        }\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        var blobUrl = URL.createObjectURL(blobObj);\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText'], rotation: data['rotation']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.setCustomAjaxHeaders = function (request) {\n        for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n        this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        // tslint:disable-next-line\n        var blob = new Blob(byteArrays, { type: contentType });\n        return blob;\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n        if (this.pdfViewer.toolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.isPopupNoteVisible;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        }\n        else {\n            return null;\n        }\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var textLayer;\n        if (!textDiv) {\n            textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n        return textLayer;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text', attrs: { 'tabindex': '0' } });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation) {\n        var scaleString = 'scale(' + scale + ')';\n        if (rotation === 0) {\n            if (textRotation === 0) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 1) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n            }\n            else if (textRotation === -90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 2) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n            }\n            else if (textRotation === 180) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 3) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n            }\n            else if (textRotation === 90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        // tslint:disable-next-line\n        var rotation;\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n            // tslint:disable-next-line\n            rotation = data['rotation'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds, rotation);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getPageIndex = function (element) {\n        var pageId;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(element.id.split('_text_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(parentElement.id.split('_text_')[1]);\n        }\n        return pageId;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n        var textIndex;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        return textIndex;\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.notifyDialog.enableRtl = true;\n        }\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy'), iconCss: 'e-pv-copy-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Highlight context'), iconCss: 'e-pv-highlight-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Underline context'), iconCss: 'e-pv-underline-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Strikethrough context'), iconCss: 'e-pv-strikethrough-icon' }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            created: this.contextMenuOnCreated.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.contextMenuObj.enableRtl = true;\n        }\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnCreated = function (args) {\n        // tslint:disable-next-line:max-line-length\n        var items = [this.pdfViewer.localeObj.getConstant('Highlight context'), this.pdfViewer.localeObj.getConstant('Underline context'),\n            this.pdfViewer.localeObj.getConstant('Strikethrough context')];\n        if (this.pdfViewer.annotationModule) {\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                this.contextMenuObj.enableItems(items, false);\n            }\n        }\n        else {\n            this.contextMenuObj.enableItems(items, false);\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    // tslint:disable-next-line:max-line-length\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if ((Browser.isIE || Browser.info.name === 'edge') && args.event.target.classList.contains('e-pv-page-container')) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            var currentBound = bounds;\n            if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                isWithin = true;\n            }\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n            isWithin = true;\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case this.pdfViewer.localeObj.getConstant('Copy'):\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Highlight context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Underline context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    ContextMenu.prototype.destroy = function () {\n        this.contextMenuObj.destroy();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { Browser } from '@syncfusion/ej2-base';\n/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        this.isTapToFitZoom = false;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            // tslint:disable-next-line:radix\n            return parseInt((scaleX * 100).toString());\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            // tslint:disable-next-line:radix\n            return parseInt(((viewerHeight / highestHeight) * 100).toString());\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.closePopupMenu();\n        }\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    if (Browser.isDevice) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewerBase.mobilePageNoContainer.style.left = (this.pdfViewer.element.clientWidth / 2) - (parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width) / 2) + 'px';\n                    }\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n        if (Browser.isDevice && this.isPinchZoomed) {\n            // tslint:disable-next-line:radix\n            var zoomPercentage = parseInt((this.zoomFactor * 100).toString()) + '%';\n            this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        if (this.pdfViewerBase.isInitialLoaded) {\n            this.renderInSeparateThread(this.reRenderPageNumber);\n            this.isPagesZoomed = false;\n        }\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            this.calculateScrollValues(scrollValue);\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.calculateScrollValues = function (scrollValue) {\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n        if (currentPageCanvas) {\n            var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n            // update scroll top for the viewer container based on pinch zoom factor\n            var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n            var previousY = scrollValue + this.touchCenterY;\n            // tslint:disable-next-line:max-line-length\n            var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                // tslint:disable-next-line:max-line-length\n                previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n            this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n            // update scroll left for the viewer container based on pinch zoom factor\n            var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n            var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n            var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n            this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n        }\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                var annotationLayers = document.querySelectorAll('canvas[id*=\"_annotationCanvas_\"]');\n                for (var j = 0; j < annotationLayers.length; j++) {\n                    var pageNumber = annotationLayers[j].id.split('_annotationCanvas_')[1];\n                    // tslint:disable-next-line:radix\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                    var annotationCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + i);\n                    annotationCanvas.id = this.pdfViewer.element.id + '_old_annotationCanvas_' + i;\n                }\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i, 'none');\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        if (this.pdfViewer.enableRtl) {\n                            pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        else {\n                            pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                                this.pdfViewer.annotationModule.textMarkupAnnotationModule.resizeAnnotations(width, height, i);\n                            }\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            this.isMagnified = false;\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.onDoubleTapMagnification = function () {\n        this.pdfViewer.toolbarModule.showToolbar(false);\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (!this.isTapToFitZoom) {\n            if (this.zoomFactor < 2) {\n                this.zoomTo(200);\n            }\n            else {\n                this.fitToWidth();\n            }\n        }\n        else {\n            this.zoomTo(this.previousZoomFactor * 100);\n        }\n        this.calculateScrollValues(scrollValue);\n        this.isTapToFitZoom = !this.isTapToFitZoom;\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber - Defines the page number to navigate\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @public\n     */\n    ThumbnailView.prototype.openThumbnailPane = function () {\n        this.pdfViewerBase.navigationPane.openThumbnailPane();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        var _this = this;\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.pdfViewerBase.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.renderThumbnailImage(data);\n                if (!proxy.isThumbnailCompleted) {\n                    proxy.startIndex = proxy.thumbnailLimit;\n                    proxy.isThumbnailCompleted = true;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                // tslint:disable-next-line:max-line-length\n                var pageLink = createElement('a', { id: 'page_' + i, attrs: { 'aria-label': 'Thumbnail of Page' + (i + 1), 'tabindex': '-1', 'role': 'link' } });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane) {\n            if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n                this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n            }\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.resetThumbnailView();\n        }\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { AnnotationToolbar } from '../index';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.isUndoRedoBtnsVisible = true;\n        this.isAnnotationEditBtnVisible = true;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                    args.cancel = true;\n                }\n                else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                    var tooltipData = args.originalEvent.target.parentElement.dataset;\n                    if (tooltipData && tooltipData.tooltipId) {\n                        var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                        if (tooltipElement) {\n                            tooltipElement.style.display = 'none';\n                        }\n                    }\n                }\n            }\n            _this.handleToolbarButtonClick(args);\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                    args.originalEvent.target.blur();\n                    _this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        if (!Browser.isDevice) {\n            this.applyToolbarSettings();\n            this.initialEnableItems();\n            this.pdfViewerBase.navigationPane.adjustPane();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.annotationToolbarModule = new AnnotationToolbar(this.pdfViewer, this.pdfViewerBase, this);\n            if (!Browser.isDevice) {\n                this.annotationToolbarModule.initializeAnnotationToolbar();\n            }\n        }\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n            if (Browser.isDevice) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n            }\n        }\n        else {\n            toolbar.style.display = 'none';\n        }\n    };\n    /**\n     * Shows/hides the Navigation toolbar in the PdfViewer\n     * @param  {boolean} enableNavigationToolbar - If set true , its show the Navigation Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showNavigationToolbar = function (enableNavigationToolbar) {\n        if (!Browser.isDevice) {\n            var navigationToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n            var navigationToolbarSplitter = this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;\n            if (enableNavigationToolbar) {\n                navigationToolbar.style.display = 'block';\n                navigationToolbarSplitter.style.display = 'block';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.clear();\n                }\n            }\n            else {\n                navigationToolbar.style.display = 'none';\n                navigationToolbarSplitter.style.display = 'none';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n                }\n            }\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isVisible - If set true, then its show the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n                case 'UndoRedoTool':\n                    this.showUndoRedoTool(isVisible);\n                    break;\n                case 'AnnotationEditTool':\n                    this.showAnnotationEditTool(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.applyHideToToolbar(true, 15, 15);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isEnable - If set true, then its Enable the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n                case 'UndoRedoTool':\n                    this.enableUndoRedoTool(isEnable);\n                    break;\n                case 'AnnotationEditTool':\n                    this.enableAnnotationEditTool(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 21, 21);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 20, 20);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 18, 18);\n    };\n    Toolbar.prototype.showUndoRedoTool = function (isEnable) {\n        this.isUndoRedoBtnsVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 16, 17);\n    };\n    Toolbar.prototype.showAnnotationEditTool = function (isEnable) {\n        this.isAnnotationEditBtnVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 19, 19);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    Toolbar.prototype.enableUndoRedoTool = function (isEnable) {\n        this.toolbar.enableItems(this.undoItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.redoItem.parentElement, isEnable);\n    };\n    Toolbar.prototype.enableAnnotationEditTool = function (isEnable) {\n        this.toolbar.enableItems(this.annotationItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        if (!Browser.isDevice) {\n            this.currentPageBox.min = 0;\n            this.currentPageBox.value = 0;\n            this.updateTotalPage();\n            this.updateToolbarItems();\n            if (this.annotationToolbarModule) {\n                this.annotationToolbarModule.clear();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, false);\n                this.toolbar.enableItems(this.printItem.parentElement, false);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = true;\n                }\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n                this.toolbar.enableItems(this.annotationItem.parentElement, false);\n                this.toolbar.enableItems(this.panItem.parentElement, false);\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.deSelectItem(this.annotationItem);\n                if (this.annotationToolbarModule) {\n                    this.annotationToolbarModule.resetToolbar();\n                }\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, true);\n                this.toolbar.enableItems(this.printItem.parentElement, true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.updateZoomButtons();\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = false;\n                }\n                this.updateInteractionItems();\n                // modify this condition if new annotation types are added.\n                if (this.pdfViewer.annotationModule && this.pdfViewer.enableAnnotation) {\n                    this.toolbar.enableItems(this.annotationItem.parentElement, true);\n                }\n                if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                    this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                }\n            }\n            if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.length === 0 || !this.pdfViewer.annotationModule) {\n                this.enableToolbarItem(['AnnotationEditTool'], false);\n            }\n        }\n        else {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, true);\n                this.updateUndoRedoButtons();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled && !Browser.isDevice) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateUndoRedoButtons = function () {\n        if (this.pdfViewer.annotationModule) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection, this.undoItem.parentElement);\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection, this.redoItem.parentElement);\n            }\n            else {\n                this.disableUndoRedoButtons();\n            }\n        }\n        else {\n            this.disableUndoRedoButtons();\n        }\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.enableCollectionAvailable = function (collection, item) {\n        if (collection.length > 0) {\n            this.toolbar.enableItems(item, true);\n        }\n        else {\n            this.toolbar.enableItems(item, false);\n        }\n    };\n    Toolbar.prototype.disableUndoRedoButtons = function () {\n        this.toolbar.enableItems(this.undoItem.parentElement, false);\n        this.toolbar.enableItems(this.redoItem.parentElement, false);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        if (this.moreDropDown) {\n            this.moreDropDown.destroy();\n        }\n        if (this.annotationToolbarModule) {\n            this.annotationToolbarModule.destroy();\n        }\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (!Browser.isDevice) {\n            if (this.currentPageBox.value === pageIndex) {\n                this.currentPageBoxElement.value = pageIndex.toString();\n            }\n            this.currentPageBox.value = pageIndex;\n        }\n        else {\n            this.pdfViewerBase.mobileSpanContainer.innerHTML = pageIndex.toString();\n            this.pdfViewerBase.mobilecurrentPageContainer.innerHTML = pageIndex.toString();\n        }\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.currentPageBox.min = 1;\n            }\n            this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        if (!Browser.isDevice) {\n            this.toolbar = new tool({\n                clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup',\n                items: this.createToolbarItems(), created: function () {\n                    _this.createZoomDropdown();\n                    _this.createNumericTextBox();\n                    _this.toolbar.refreshOverflow();\n                }\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.toolbar.appendTo(this.toolbarElement);\n            this.afterToolbarCreation();\n            this.updateTotalPage();\n            this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        }\n        else {\n            this.createToolbarItemsForMobile();\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.disableUndoRedoButtons();\n        }\n        return this.toolbarElement;\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.createToolbarItems = function () {\n        var currentPageInputTemplate = this.createCurrentPageInputTemplate();\n        var totalPageTemplate = this.createTotalPageTemplate();\n        var zoomDropDownTemplateString = this.createZoomDropdownElement();\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-open-document-icon e-pv-icon', cssClass: 'e-pv-open-document-container', id: this.pdfViewer.element.id + '_open', text: this.pdfViewer.localeObj.getConstant('Open text'), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n        }\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-zoom-out-icon e-pv-icon', cssClass: 'e-pv-zoom-out-container', id: this.pdfViewer.element.id + '_zoomOut', text: this.pdfViewer.localeObj.getConstant('Zoom out text'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-zoom-in-icon e-pv-icon', cssClass: 'e-pv-zoom-in-container', id: this.pdfViewer.element.id + '_zoomIn', text: this.pdfViewer.localeObj.getConstant('Zoom in text'), align: 'Left' });\n        items.push({ template: zoomDropDownTemplateString, cssClass: 'e-pv-zoom-drop-down-container', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-select-tool-icon e-pv-icon', cssClass: 'e-pv-text-select-tool-container', id: this.pdfViewer.element.id + '_selectTool', text: this.pdfViewer.localeObj.getConstant('Selection text') });\n        items.push({ prefixIcon: 'e-pv-pan-tool-icon e-pv-icon', cssClass: 'e-pv-pan-tool-container', id: this.pdfViewer.element.id + '_handTool', text: this.pdfViewer.localeObj.getConstant('Pan text') });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-undo-icon e-pv-icon', cssClass: 'e-pv-undo-container', id: this.pdfViewer.element.id + '_undo', text: this.pdfViewer.localeObj.getConstant('Undo'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-redo-icon e-pv-icon', cssClass: 'e-pv-redo-container', id: this.pdfViewer.element.id + '_redo', text: this.pdfViewer.localeObj.getConstant('Redo'), align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-search-icon e-pv-icon', cssClass: 'e-pv-text-search-container', id: this.pdfViewer.element.id + '_search', text: this.pdfViewer.localeObj.getConstant('Search text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-annotation-icon e-pv-icon', cssClass: 'e-pv-annotation-container', id: this.pdfViewer.element.id + '_annotation', text: this.pdfViewer.localeObj.getConstant('Annotation Edit text'), align: 'Right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-print-document-icon e-pv-icon', cssClass: 'e-pv-print-document-container', id: this.pdfViewer.element.id + '_print', text: this.pdfViewer.localeObj.getConstant('Print text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-download-document-icon e-pv-icon', cssClass: 'e-pv-download-document-container', id: this.pdfViewer.element.id + '_download', text: this.pdfViewer.localeObj.getConstant('Download'), align: 'Right' });\n        return items;\n    };\n    Toolbar.prototype.afterToolbarCreation = function () {\n        this.itemsContainer = this.toolbar.element.childNodes[0];\n        this.itemsContainer.id = this.pdfViewer.element.id + '_toolbarItemsContainer';\n        this.openDocumentItem = this.addClassToolbarItem('_open', 'e-pv-open-document', this.pdfViewer.localeObj.getConstant('Open'));\n        this.undoItem = this.addClassToolbarItem('_undo', 'e-pv-undo', this.pdfViewer.localeObj.getConstant('Undo'));\n        this.redoItem = this.addClassToolbarItem('_redo', 'e-pv-redo', this.pdfViewer.localeObj.getConstant('Redo'));\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        this.zoomOutItem = this.addClassToolbarItem('_zoomOut', 'e-pv-zoom-out', this.pdfViewer.localeObj.getConstant('Zoom Out'));\n        this.zoomInItem = this.addClassToolbarItem('_zoomIn', 'e-pv-zoom-in', this.pdfViewer.localeObj.getConstant('Zoom In'));\n        // tslint:disable-next-line:max-line-length\n        this.textSelectItem = this.addClassToolbarItem('_selectTool', 'e-pv-text-select-tool', this.pdfViewer.localeObj.getConstant('Text Selection'));\n        this.panItem = this.addClassToolbarItem('_handTool', 'e-pv-pan-tool', this.pdfViewer.localeObj.getConstant('Panning'));\n        // tslint:disable-next-line:max-line-length\n        this.textSearchItem = this.addClassToolbarItem('_search', 'e-pv-text-search', this.pdfViewer.localeObj.getConstant('Text Search'));\n        this.annotationItem = this.addClassToolbarItem('_annotation', 'e-pv-annotation', this.pdfViewer.localeObj.getConstant('Annotation'));\n        // tslint:disable-next-line:max-line-length\n        this.printItem = this.addClassToolbarItem('_print', 'e-pv-print-document', this.pdfViewer.localeObj.getConstant('Print'));\n        this.downloadItem = this.addClassToolbarItem('_download', 'e-pv-download-document', this.pdfViewer.localeObj.getConstant('Download file'));\n        this.zoomDropdownItem = this.pdfViewerBase.getElement('_zoomDropDown');\n        this.createTooltip(this.zoomDropdownItem, this.pdfViewer.localeObj.getConstant('Zoom'));\n        this.zoomDropdownItem.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Zoom'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement, null, '_zoomDropDownContainer');\n        this.pdfViewerBase.getElement('_zoomDropDownContainer').style.minWidth = '';\n        this.createTooltip(this.currentPageBoxElement, this.pdfViewer.localeObj.getConstant('Page Number'));\n        this.currentPageBoxElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Page Number'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement, 'e-pv-current-page-container', '_currentPageInputContainer');\n        this.pdfViewerBase.getElement('_currentPageInputContainer').style.minWidth = '20px';\n        this.totalPageItem = this.pdfViewerBase.getElement('_totalPage');\n        this.addPropertiesToolItemContainer(this.totalPageItem.parentElement, 'e-pv-total-page-container', '_totalPageContainer');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.addClassToolbarItem = function (idString, className, tooltipText) {\n        var element = this.pdfViewerBase.getElement(idString);\n        element.classList.add(className);\n        element.classList.add('e-pv-tbar-btn');\n        element.setAttribute('aria-label', tooltipText);\n        element.parentElement.classList.add(className + '-container');\n        element.parentElement.classList.add('e-popup-text');\n        element.parentElement.id = this.pdfViewer.element.id + idString + 'Container';\n        if (element.childNodes.length > 0) {\n            var spanElement = element.childNodes[0];\n            spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n            spanElement.classList.remove('e-icons');\n            spanElement.classList.remove('e-btn-icon');\n            if (this.pdfViewer.enableRtl) {\n                spanElement.classList.add('e-right');\n            }\n            var textElement = element.childNodes[1];\n            if (textElement) {\n                if (textElement.classList.contains('e-tbar-btn-text')) {\n                    textElement.id = this.pdfViewer.element.id + idString + 'Text';\n                }\n            }\n        }\n        element.style.width = '';\n        this.createTooltip(element, tooltipText);\n        return element;\n    };\n    Toolbar.prototype.addPropertiesToolItemContainer = function (element, className, idString) {\n        if (className !== null) {\n            element.classList.add(className);\n        }\n        element.classList.add('e-popup-text');\n        element.id = this.pdfViewer.element.id + idString;\n    };\n    Toolbar.prototype.createZoomDropdownElement = function () {\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', null);\n        return zoomDropdownElement.outerHTML;\n    };\n    Toolbar.prototype.createZoomDropdown = function () {\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.pdfViewerBase.getElement('_zoomDropDown'));\n    };\n    Toolbar.prototype.createCurrentPageInputTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var goToPageElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', null);\n        return goToPageElement.outerHTML;\n    };\n    Toolbar.prototype.createTotalPageTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var totalPageElement = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', 'e-pv-total-page');\n        return totalPageElement.outerHTML;\n    };\n    Toolbar.prototype.createNumericTextBox = function () {\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = this.pdfViewerBase.getElement('_currentPageInput');\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n    };\n    Toolbar.prototype.createToolbarItemsForMobile = function () {\n        this.toolbarElement.classList.add('e-pv-mobile-toolbar');\n        var template = '<button id=\"' + this.pdfViewer.element.id + '_more_option\" class=\"e-tbar-btn\"></button>';\n        this.toolbar = new tool({\n            // tslint:disable-next-line:max-line-length\n            items: [{ prefixIcon: 'e-pv-open-document-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Open'), id: this.pdfViewer.element.id + '_open' },\n                { type: 'Separator', align: 'Left' },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-undo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Undo'), id: this.pdfViewer.element.id + '_undo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-redo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Redo'), id: this.pdfViewer.element.id + '_redo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-text-search-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Text Search'), id: this.pdfViewer.element.id + '_search', align: 'Right' },\n                { template: template, align: 'Right' }\n            ], clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup'\n        });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.openDocumentItem = this.pdfViewerBase.getElement('_open');\n        this.openDocumentItem.classList.add('e-pv-open-document');\n        this.openDocumentItem.firstElementChild.id = this.pdfViewer.element.id + '_openIcon';\n        this.textSearchItem = this.pdfViewerBase.getElement('_search');\n        this.textSearchItem.classList.add('e-pv-text-search');\n        this.textSearchItem.firstElementChild.id = this.pdfViewer.element.id + '_searchIcon';\n        this.undoItem = this.pdfViewerBase.getElement('_undo');\n        this.undoItem.classList.add('e-pv-undo');\n        this.redoItem = this.pdfViewerBase.getElement('_redo');\n        this.redoItem.classList.add('e-pv-redo');\n        this.redoItem.firstElementChild.id = this.pdfViewer.element.id + '_redoIcon';\n        this.undoItem.firstElementChild.id = this.pdfViewer.element.id + '_undoIcon';\n        this.createMoreOption(this.pdfViewer.element.id + '_more_option');\n    };\n    Toolbar.prototype.createMoreOption = function (idString) {\n        var _this = this;\n        this.moreOptionItem = document.getElementById(idString);\n        var items = [\n            {\n                text: this.pdfViewer.localeObj.getConstant('Download'), id: this.pdfViewer.element.id + '_menu_download',\n                iconCss: 'e-icons e-pv-download-document-icon e-pv-icon'\n            },\n            {\n                text: this.pdfViewer.localeObj.getConstant('Bookmarks'), id: this.pdfViewer.element.id + '_menu_bookmarks',\n                iconCss: 'e-icons e-pv-bookmark-icon e-pv-icon'\n            }\n        ];\n        this.moreDropDown = new DropDownButton({\n            items: items, iconCss: 'e-pv-more-icon e-pv-icon', cssClass: 'e-caret-hide',\n            open: function (args) {\n                var dropdownButtonPosition = _this.moreDropDown.element.getBoundingClientRect();\n                // tslint:disable-next-line:max-line-length\n                if (!_this.pdfViewer.enableRtl) {\n                    args.element.parentElement.style.left = dropdownButtonPosition.left + dropdownButtonPosition.width - args.element.parentElement.offsetWidth + 'px';\n                }\n            }, select: function (args) {\n                switch (args.item.id) {\n                    case _this.pdfViewer.element.id + '_menu_download':\n                        _this.pdfViewerBase.download();\n                        break;\n                    case _this.pdfViewer.element.id + '_menu_bookmarks':\n                        _this.showToolbar(false);\n                        _this.pdfViewerBase.navigationPane.createNavigationPaneMobile('bookmarks');\n                        break;\n                    default:\n                        break;\n                }\n            }, beforeItemRender: function (args) {\n                if (args.item.id === _this.pdfViewer.element.id + '_menu_bookmarks') {\n                    if (!_this.pdfViewer.bookmarkViewModule || !_this.pdfViewer.bookmarkViewModule.bookmarks) {\n                        args.element.classList.add('e-disabled');\n                    }\n                    else {\n                        args.element.classList.remove('e-disabled');\n                    }\n                }\n            }, close: function (args) {\n                _this.moreOptionItem.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        });\n        this.moreDropDown.appendTo('#' + idString);\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, className) {\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            toolbarItem.className = className;\n        }\n        if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        return toolbarItem;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.createTooltip = function (toolbarItem, tooltipText) {\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip && this.toolbarElement.contains(args.target)) {\n            args.cancel = true;\n        }\n        if (this.annotationToolbarModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.annotationToolbarSettings.showTooltip && this.annotationToolbarModule.toolbarElement.contains(args.target)) {\n                args.cancel = true;\n            }\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n            this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n            this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n            this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n            this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.navigationPane.toolbarResize();\n        }\n        else {\n            this.toolbar.refreshOverflow();\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.handleToolbarButtonClick = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_open':\n            case this.pdfViewer.element.id + '_openIcon':\n            case this.pdfViewer.element.id + '_openText':\n                this.fileInputElement.click();\n                if (Browser.isDevice) {\n                    args.originalEvent.target.blur();\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n                break;\n            case this.pdfViewer.element.id + '_download':\n            case this.pdfViewer.element.id + '_downloadIcon':\n            case this.pdfViewer.element.id + '_downloadText':\n                this.pdfViewerBase.download();\n                break;\n            case this.pdfViewer.element.id + '_print':\n            case this.pdfViewer.element.id + '_printIcon':\n            case this.pdfViewer.element.id + '_printText':\n                if (this.pdfViewer.printModule) {\n                    this.pdfViewer.printModule.print();\n                }\n                break;\n            case this.pdfViewer.element.id + '_undo':\n            case this.pdfViewer.element.id + '_undoIcon':\n            case this.pdfViewer.element.id + '_undoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.undo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_redo':\n            case this.pdfViewer.element.id + '_redoIcon':\n            case this.pdfViewer.element.id + '_redoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.redo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_firstPage':\n            case this.pdfViewer.element.id + '_firstPageIcon':\n            case this.pdfViewer.element.id + '_firstPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToFirstPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_previousPage':\n            case this.pdfViewer.element.id + '_previousPageIcon':\n            case this.pdfViewer.element.id + '_previousPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToPreviousPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_nextPage':\n            case this.pdfViewer.element.id + '_nextPageIcon':\n            case this.pdfViewer.element.id + '_nextPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToNextPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_lastPage':\n            case this.pdfViewer.element.id + '_lastPageIcon':\n            case this.pdfViewer.element.id + '_lastPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToLastPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_zoomIn':\n            case this.pdfViewer.element.id + '_zoomInIcon':\n            case this.pdfViewer.element.id + '_zoomInText':\n                this.pdfViewer.magnificationModule.zoomIn();\n                break;\n            case this.pdfViewer.element.id + '_zoomOut':\n            case this.pdfViewer.element.id + '_zoomOutIcon':\n            case this.pdfViewer.element.id + '_zoomOutText':\n                this.pdfViewer.magnificationModule.zoomOut();\n                break;\n            case this.pdfViewer.element.id + '_selectTool':\n            case this.pdfViewer.element.id + '_selectToolIcon':\n            case this.pdfViewer.element.id + '_selectToolText':\n                if (!this.isSelectionToolDisabled) {\n                    this.pdfViewerBase.initiateTextSelectMode();\n                    this.updateInteractionTools(true);\n                }\n                break;\n            case this.pdfViewer.element.id + '_handTool':\n            case this.pdfViewer.element.id + '_handToolIcon':\n            case this.pdfViewer.element.id + '_handToolText':\n                if (!this.isScrollingToolDisabled) {\n                    this.pdfViewerBase.initiatePanning();\n                    this.updateInteractionTools(false);\n                }\n                break;\n            case this.pdfViewer.element.id + '_search':\n            case this.pdfViewer.element.id + '_searchIcon':\n            case this.pdfViewer.element.id + '_searchText':\n                this.textSearchButtonHandler();\n                break;\n            case this.pdfViewer.element.id + '_annotation':\n            case this.pdfViewer.element.id + '_annotationIcon':\n            case this.pdfViewer.element.id + '_annotationText':\n                this.initiateAnnotationMode();\n                break;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:radix\n            var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n            if (this.zoomDropDown.text === currentPercent) {\n                this.zoomDropDown.element.value = currentPercent;\n            }\n            if (this.zoomDropDown.index === 9) {\n                this.zoomDropDown.value = 2;\n            }\n            // tslint:disable-next-line\n            this.zoomDropDown.text = currentPercent;\n        }\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n                this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n                this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n                if (this.isTextSearchBoxDisplayed) {\n                    this.selectItem(this.textSearchItem);\n                    // tslint:disable-next-line:max-line-length\n                    var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                    searchInputElement.select();\n                    searchInputElement.focus();\n                }\n                else {\n                    this.deSelectItem(this.textSearchItem);\n                }\n            }\n        }\n        else {\n            this.showToolbar(false);\n            this.pdfViewerBase.navigationPane.createNavigationPaneMobile('search');\n        }\n    };\n    Toolbar.prototype.initiateAnnotationMode = function () {\n        if (this.annotationToolbarModule) {\n            if (this.pdfViewerBase.isPanMode && this.annotationToolbarModule.isToolbarHidden) {\n                this.pdfViewerBase.initiateTextSelectMode();\n            }\n            this.DisableInteractionTools();\n            this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.DisableInteractionTools = function () {\n        this.deSelectItem(this.textSelectItem);\n        this.deSelectItem(this.panItem);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enableNavigationToolbar) {\n            this.showNavigationToolbar(true);\n        }\n        else {\n            this.showNavigationToolbar(false);\n        }\n        if (this.isPrintBtnVisible) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.isDownloadBtnVisible) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.isSearchBtnVisible) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (this.isOpenBtnVisible && toolbarItems.length === 1) ||\n            // tslint:disable-next-line:max-line-length\n            (!this.isNavigationToolVisible && !this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible && !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if (((!this.isNavigationToolVisible && !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) ||\n            (this.isOpenBtnVisible && !this.isNavigationToolVisible) ||\n            // tslint:disable-next-line:max-line-length\n            ((!this.isOpenBtnVisible && !this.isNavigationToolVisible) || (!this.isMagnificationToolVisible && !this.isScrollingBtnVisible && !this.isSelectionBtnVisible))) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible || this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n        if (((!this.isMagnificationToolVisible && !this.isNavigationToolVisible && !this.isScrollingBtnVisible\n            && !this.isSelectionBtnVisible) && this.isUndoRedoBtnsVisible || !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems) {\n            if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n                this.showOpenOption(true);\n            }\n            else {\n                this.showOpenOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n                this.showPageNavigationTool(true);\n            }\n            else {\n                this.showPageNavigationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n                this.showMagnificationTool(true);\n            }\n            else {\n                this.showMagnificationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n                this.showSelectionTool(true);\n            }\n            else {\n                this.showSelectionTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n                this.showScrollingTool(true);\n            }\n            else {\n                this.showScrollingTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n                this.showPrintOption(true);\n            }\n            else {\n                this.showPrintOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n                this.showDownloadOption(true);\n            }\n            else {\n                this.showDownloadOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n                this.showSearchOption(true);\n            }\n            else {\n                this.showSearchOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('UndoRedoTool') !== -1) {\n                this.showUndoRedoTool(true);\n            }\n            else {\n                this.showUndoRedoTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('AnnotationEditTool') !== -1) {\n                this.showAnnotationEditTool(true);\n            }\n            else {\n                this.showAnnotationEditTool(false);\n            }\n            this.showSeparator(toolbarSettingsItems);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */ (function () {\n    function AnnotationToolbar(viewer, viewerBase, toolbar) {\n        this.toolbarBorderHeight = 1;\n        /**\n         * @private\n         */\n        this.isToolbarHidden = false;\n        /**\n         * @private\n         */\n        this.isMobileAnnotEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        this.isHighlightBtnVisible = true;\n        this.isUnderlineBtnVisible = true;\n        this.isStrikethroughBtnVisible = true;\n        this.isColorToolVisible = true;\n        this.isOpacityToolVisible = true;\n        this.isDeleteAnnotationToolVisible = true;\n        this.isCurrentAnnotationOpacitySet = false;\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n        this.primaryToolbar = toolbar;\n    }\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.toolbar = new Tool({\n            width: '', height: '', overflowMode: 'Popup',\n            items: this.createToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n            created: function () {\n                _this.createDropDowns();\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterToolbarCreation();\n        this.showAnnotationToolbar(null);\n        this.applyAnnotationToolbarSettings();\n        this.updateToolbarItems();\n    };\n    AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable) {\n        var _this = this;\n        if (Browser.isDevice) {\n            if (this.toolbarElement == null && isEnable) {\n                this.isMobileAnnotEnabled = true;\n                // tslint:disable-next-line:max-line-length\n                this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n                this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n                this.toolbar = new Tool({\n                    width: '', height: '', overflowMode: 'Popup',\n                    items: this.createMobileToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n                    created: function () {\n                        _this.createDropDowns();\n                    }\n                });\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.pdfViewerBase.navigationPane.goBackToToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(false);\n                this.toolbar.appendTo(this.toolbarElement);\n                this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n                this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n            }\n            else if (this.toolbarElement != null) {\n                if (isEnable) {\n                    this.isMobileAnnotEnabled = true;\n                    this.pdfViewerBase.navigationPane.goBackToToolbar();\n                    this.pdfViewer.toolbarModule.showToolbar(false);\n                    this.toolbarElement.style.display = 'block';\n                }\n                else if (!isEnable) {\n                    this.isMobileAnnotEnabled = false;\n                    this.pdfViewer.toolbarModule.showToolbar(true);\n                    this.hideMobileAnnotationToolbar();\n                }\n            }\n        }\n        else {\n            this.isMobileAnnotEnabled = true;\n        }\n    };\n    AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n        if (this.toolbarElement != null) {\n            this.toolbarElement.style.display = 'none';\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createMobileToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        // tslint:disable-next-line:max-line-length\n        items.push({ template: colorTemplate, align: 'right' });\n        items.push({ template: opacityTemplate, align: 'right' });\n        items.push({ type: 'Separator', align: 'right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.goBackToToolbar = function () {\n        this.isMobileAnnotEnabled = false;\n        this.hideMobileAnnotationToolbar();\n        this.pdfViewer.toolbarModule.showToolbar(true);\n        var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n        if (page) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate, align: 'Left' });\n        items.push({ template: opacityTemplate, align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon', className: 'e-pv-annotation-tools-close-container', id: this.pdfViewer.element.id + '_annotation_close', align: 'Right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n        var element = createElement(elementName, { id: this.pdfViewer.element.id + id });\n        if (className) {\n            element.className = className;\n        }\n        return element.outerHTML;\n    };\n    AnnotationToolbar.prototype.createDropDowns = function () {\n        this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n        this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n        this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n        this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n        this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n        this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n        var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n        this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n        this.opacitySlider.change = this.opacityChange.bind(this);\n        this.opacitySlider.changed = this.opacityChange.bind(this);\n        this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n    };\n    AnnotationToolbar.prototype.opacityDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            var opacityElement = this.pdfViewerBase.getElement('_annotation_opacity-popup');\n            opacityElement.style.left = '0px';\n        }\n    };\n    AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.colorDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n            }\n            else {\n                this.setCurrentColorInPicker();\n            }\n        }\n        this.colorPalette.refresh();\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor }, true);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor }, true);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor }, true);\n                    break;\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    AnnotationToolbar.prototype.colorDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.getElement('_annotation_color-popup').style.left = '0px';\n        }\n        this.colorPalette.refresh();\n    };\n    AnnotationToolbar.prototype.opacityChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n                    this.isCurrentAnnotationOpacitySet = false;\n                }\n                else {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n                }\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = args.value / 100;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = args.value / 100;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = args.value / 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.isCurrentAnnotationOpacitySet = true;\n                // tslint:disable-next-line:max-line-length\n                this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n                        break;\n                    case 'Underline':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n                        break;\n                    case 'Strikethrough':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n        // tslint:disable-next-line:max-line-length\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        return dropDownButton;\n    };\n    AnnotationToolbar.prototype.createColorPicker = function (idString) {\n        var inputElement = createElement('input', { id: idString + '_target' });\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', cssClass: 'e-show-value', enableOpacity: false,\n            change: this.onColorPickerChange.bind(this), value: '#000000', showButtons: false,\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(args.currentValue.hex);\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = args.currentValue.hex;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = args.currentValue.hex;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = args.currentValue.hex;\n                        break;\n                }\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, args.currentValue.hex);\n        this.colorDropDown.toggle();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n        element.childNodes[0].style.borderBottomColor = color;\n    };\n    AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n        this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n    };\n    AnnotationToolbar.prototype.createSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-opacity-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-opacity-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.opacitySlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-opacity-slider', max: 100, min: 0 });\n        // tslint:disable-next-line:max-line-length\n        this.opacityIndicator = createElement('div', { id: idString + '_opacity_indicator', className: 'e-pv-annotation-opacity-indicator' });\n        this.opacityIndicator.textContent = '100%';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(this.opacityIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.opacityIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.enableRtl = true;\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(label);\n        }\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.afterToolbarCreation = function () {\n        // tslint:disable-next-line:max-line-length\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // tslint:disable-next-line:max-line-length\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n        this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n        this.selectAnnotationDeleteItem(false);\n        this.enableAnnotationPropertiesTools(false);\n    };\n    AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_highlight':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.handleHighlight();\n                break;\n            case this.pdfViewer.element.id + '_underline':\n            case this.pdfViewer.element.id + '_underlineIcon':\n                this.handleUnderline();\n                break;\n            case this.pdfViewer.element.id + '_strikethrough':\n            case this.pdfViewer.element.id + '_strikethroughIcon':\n                this.handleStrikethrough();\n                break;\n            case this.pdfViewer.element.id + '_annotation_delete':\n            case this.pdfViewer.element.id + '_annotation_deleteIcon':\n                this.pdfViewer.annotationModule.deleteAnnotation();\n                break;\n            case this.pdfViewer.element.id + '_annotation_close':\n            case this.pdfViewer.element.id + '_annotation_closeIcon':\n                this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.showAnnotationToolbar = function (element) {\n        if (!this.isToolbarHidden) {\n            // tslint:disable-next-line\n            var annotationModule = this.pdfViewer.annotationModule;\n            if (element) {\n                this.adjustViewer(false);\n                this.primaryToolbar.deSelectItem(element);\n            }\n            // tslint:disable-next-line:max-line-length           \n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.enablePropertiesTool(annotationModule);\n            }\n            else {\n                this.deselectAllItems();\n            }\n            this.toolbarElement.style.display = 'none';\n            this.primaryToolbar.updateInteractionTools(true);\n        }\n        else {\n            var toolBarInitialStatus = this.toolbarElement.style.display;\n            this.toolbarElement.style.display = 'block';\n            if (element) {\n                this.primaryToolbar.selectItem(element);\n                if (toolBarInitialStatus === 'none') {\n                    this.primaryToolbar.DisableInteractionTools();\n                    this.adjustViewer(true);\n                }\n            }\n        }\n        // tslint:disable-next-line:max-line-length           \n        if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n            this.pdfViewer.magnification.fitToPage();\n        }\n        if (this.pdfViewerBase.isPanMode) {\n            this.enableAnnotationAddTools(false);\n        }\n        else {\n            this.enableAnnotationAddTools(true);\n        }\n        this.isToolbarHidden = !this.isToolbarHidden;\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(true);\n        // tslint:disable-next-line:max-line-length  \n        this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n        this.selectAnnotationDeleteItem(true);\n    };\n    AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('HighlightTool') !== -1) {\n            this.showHighlightTool(true);\n        }\n        else {\n            this.showHighlightTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('UnderlineTool') !== -1) {\n            this.showUnderlineTool(true);\n        }\n        else {\n            this.showUnderlineTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('StrikethroughTool') !== -1) {\n            this.showStrikethroughTool(true);\n        }\n        else {\n            this.showStrikethroughTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('ColorEditTool') !== -1) {\n            this.showColorEditTool(true);\n        }\n        else {\n            this.showColorEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('OpacityEditTool') !== -1) {\n            this.showOpacityEditTool(true);\n        }\n        else {\n            this.showOpacityEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('AnnotationDeleteTool') !== -1) {\n            this.showAnnotationDeleteTool(true);\n        }\n        else {\n            this.showAnnotationDeleteTool(false);\n        }\n        this.showSeparator();\n    };\n    AnnotationToolbar.prototype.showSeparator = function () {\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)\n            || (!this.isColorToolVisible && !this.isOpacityToolVisible)) {\n            this.applyHideToToolbar(false, 3, 3);\n        }\n        if ((!this.isColorToolVisible && !this.isOpacityToolVisible) && (!this.isHighlightBtnVisible &&\n            !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) || !this.isDeleteAnnotationToolVisible) {\n            this.applyHideToToolbar(false, 6, 6);\n        }\n    };\n    AnnotationToolbar.prototype.showHighlightTool = function (isShow) {\n        this.isHighlightBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 0, 0);\n    };\n    AnnotationToolbar.prototype.showUnderlineTool = function (isShow) {\n        this.isUnderlineBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 1, 1);\n    };\n    AnnotationToolbar.prototype.showStrikethroughTool = function (isShow) {\n        this.isStrikethroughBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 2, 2);\n    };\n    AnnotationToolbar.prototype.showColorEditTool = function (isShow) {\n        this.isColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 4, 4);\n    };\n    AnnotationToolbar.prototype.showOpacityEditTool = function (isShow) {\n        this.isOpacityToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 5, 5);\n    };\n    AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow) {\n        this.isDeleteAnnotationToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 7, 7);\n    };\n    AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n        var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n        if (isAdjust) {\n            if (this.pdfViewer.enableToolbar) {\n                sideBarToolbar.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = (annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (annotationToolbarHeight) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (annotationToolbarHeight)) + 'px';\n            sideBarToolbar.style.height = sideBarToolbar.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n            splitterElement.style.height = splitterElement.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n        }\n        else {\n            if (this.pdfViewer.enableToolbar) {\n                // tslint:disable-next-line:max-line-length\n                sideBarToolbar.style.top = toolbarHeight + 'px';\n                sideBarContentContainer.style.top = toolbarHeight + 'px';\n                splitterElement.style.top = toolbarHeight + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = 1 + 'px';\n                sideBarToolbar.style.height = '100%';\n                sideBarContentContainer.style.top = 1 + 'px';\n                sideBarContentContainer.style.height = '100%';\n                splitterElement.style.top = 1 + 'px';\n                splitterElement.style.height = '100%';\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n            sideBarToolbar.style.height = this.getHeight(sideBarToolbar, annotationToolbarHeight);\n            splitterElement.style.height = this.getHeight(splitterElement, annotationToolbarHeight);\n        }\n        this.updateContentContainerHeight(isAdjust);\n    };\n    AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust) {\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n        if (sideBarClientRect.height !== 0) {\n            if (isAdjust) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n        var toolbarHeight = element.getBoundingClientRect().height;\n        if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n            // getComputedStyle gets the value from style and toolbar border height is added to it.\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n        }\n        return toolbarHeight;\n    };\n    AnnotationToolbar.prototype.getHeight = function (element, toolbarHeight) {\n        var height = element.getBoundingClientRect().height;\n        return (height !== 0) ? height + toolbarHeight + 'px' : '';\n    };\n    AnnotationToolbar.prototype.handleHighlight = function () {\n        if (!this.isHighlightEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n            this.primaryToolbar.selectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            this.isHighlightEnabled = true;\n            this.isUnderlineEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderline = function () {\n        if (!this.isUnderlineEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n            this.primaryToolbar.selectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            this.isUnderlineEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethrough = function () {\n        if (!this.isStrikethroughEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n            this.primaryToolbar.selectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.enableAnnotationPropertiesTools(true);\n            // tslint:disable-next-line:max-line-length\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            this.isStrikethroughEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isUnderlineEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.deselectAllItems = function () {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(false);\n        this.updateColorInIcon(this.colorDropDownElement, '#000000');\n        this.selectAnnotationDeleteItem(false);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable) {\n        this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n        this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n        var isButtonsEnabled = false;\n        if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n            isButtonsEnabled = true;\n        }\n        return isButtonsEnabled;\n    };\n    AnnotationToolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.enableAnnotationAddTools(true);\n        }\n        else {\n            this.enableAnnotationAddTools(false);\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.resetToolbar = function () {\n        this.adjustViewer(false);\n        this.updateToolbarItems();\n        this.toolbarElement.style.display = 'none';\n        this.isToolbarHidden = true;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clear = function () {\n        this.deselectAllItems();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.destroy = function () {\n        this.colorDropDown.destroy();\n        this.opacityDropDown.destroy();\n        this.toolbar.destroy();\n    };\n    AnnotationToolbar.prototype.getElementHeight = function (element) {\n        return element.getBoundingClientRect().height;\n    };\n    AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight - toolbarHeight;\n    };\n    AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight + toolbarHeight;\n    };\n    return AnnotationToolbar;\n}());\nexport { AnnotationToolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `AjaxRequestSettings` module is used to set the ajax Request Headers of PDF viewer.\n */\nvar AjaxRequestSettings = /** @class */ (function (_super) {\n    __extends(AjaxRequestSettings, _super);\n    function AjaxRequestSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], AjaxRequestSettings.prototype, \"ajaxHeaders\", void 0);\n    return AjaxRequestSettings;\n}(ChildProperty));\nexport { AjaxRequestSettings };\n/**\n * The `AnnotationToolbarSettings` module is used to provide the annotation toolbar settings of the PDF viewer.\n */\nvar AnnotationToolbarSettings = /** @class */ (function (_super) {\n    __extends(AnnotationToolbarSettings, _super);\n    function AnnotationToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], AnnotationToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], AnnotationToolbarSettings.prototype, \"annotationToolbarItem\", void 0);\n    return AnnotationToolbarSettings;\n}(ChildProperty));\nexport { AnnotationToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * The `StrikethroughSettings` module is used to provide the properties to Strikethrough annotation.\n */\nvar StrikethroughSettings = /** @class */ (function (_super) {\n    __extends(StrikethroughSettings, _super);\n    function StrikethroughSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], StrikethroughSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ff0000')\n    ], StrikethroughSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], StrikethroughSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('strikethrough')\n    ], StrikethroughSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], StrikethroughSettings.prototype, \"modifiedDate\", void 0);\n    return StrikethroughSettings;\n}(ChildProperty));\nexport { StrikethroughSettings };\n/**\n * The `UnderlineSettings` module is used to provide the properties to Underline annotation.\n */\nvar UnderlineSettings = /** @class */ (function (_super) {\n    __extends(UnderlineSettings, _super);\n    function UnderlineSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], UnderlineSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#00ff00')\n    ], UnderlineSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], UnderlineSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('underline')\n    ], UnderlineSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], UnderlineSettings.prototype, \"modifiedDate\", void 0);\n    return UnderlineSettings;\n}(ChildProperty));\nexport { UnderlineSettings };\n/**\n * The `HighlightSettings` module is used to provide the properties to Highlight annotation.\n */\nvar HighlightSettings = /** @class */ (function (_super) {\n    __extends(HighlightSettings, _super);\n    function HighlightSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], HighlightSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ffff00')\n    ], HighlightSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], HighlightSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('highlight')\n    ], HighlightSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], HighlightSettings.prototype, \"modifiedDate\", void 0);\n    return HighlightSettings;\n}(ChildProperty));\nexport { HighlightSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download file': 'Download file',\n            'Download': 'Download',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            'Apply': 'Apply',\n            'GoToPage': 'Go to Page',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            'No Text Found': 'No Text Found',\n            'Undo': 'Undo',\n            'Redo': 'Redo',\n            'Annotation': 'Add or Edit annotations',\n            'Highlight': 'Highlight Text',\n            'Underline': 'Underline Text',\n            'Strikethrough': 'Strikethrough Text',\n            'Delete': 'Delete annotation',\n            'Opacity': 'Opacity',\n            'Color edit': 'Change Color',\n            'Opacity edit': 'Change Opacity',\n            'Highlight context': 'Highlight',\n            'Underline context': 'Underline',\n            'Strikethrough context': 'Strike through',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.',\n            'Open text': 'Open',\n            'First text': 'First Page',\n            'Previous text': 'Previous Page',\n            'Next text': 'Next Page',\n            'Last text': 'Last Page',\n            'Zoom in text': 'Zoom In',\n            'Zoom out text': 'Zoom Out',\n            'Selection text': 'Selection',\n            'Pan text': 'Pan',\n            'Print text': 'Print',\n            'Search text': 'Search',\n            'Annotation Edit text': 'Edit Annotation'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"isDocumentEdited\", {\n        /**\n         * Checks whether the PDF document is edited.\n         */\n        get: function () {\n            return this.viewerBase.isDocumentEdited;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"thumbnailView\", {\n        /**\n         * Gets the thumbnail-view object of the pdf viewer.\n         * @returns { ThumbnailView }\n         */\n        get: function () {\n            return this.thumbnailViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"annotation\", {\n        /**\n         * Gets the annotation object of the pdf viewer.\n         * @returns { Annotation }\n         */\n        get: function () {\n            return this.annotationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar || this.enableNavigationToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableAnnotation) {\n            modules.push({\n                member: 'Annotation', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document - Specifies the document name for load\n     * @param  {string} password - Specifies the Given document password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    /**\n     * Perform undo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.undo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.undo();\n        }\n    };\n    /**\n     * Perform redo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.redo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.redo();\n        }\n    };\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        if (!isNullOrUndefined(this.element)) {\n            this.element.classList.remove('e-pdfviewer');\n            this.element.innerHTML = '';\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewer.prototype.fireAnnotationAdd = function (pageNumber, index, type, bounds, settings) {\n        var eventArgs = { name: 'annotationAdd', pageIndex: pageNumber, annotationId: index, annotationType: type, annotationBound: bounds, annotationSettings: settings };\n        this.trigger('annotationAdd', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAnnotationRemove = function (pageNumber, index, type) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'annotationRemove', pageIndex: pageNumber, annotationId: index, annotationType: type };\n        this.trigger('annotationRemove', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewer.prototype.fireAnnotationPropertiesChange = function (pageNumber, index, type, isColorChanged, isOpacityChanged) {\n        var eventArgs = { name: 'annotationPropertiesChange', pageIndex: pageNumber, annotationId: index, annotationType: type, isColorChanged: isColorChanged, isOpacityChanged: isOpacityChanged };\n        this.trigger('annotationPropertiesChange', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigationToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableAnnotation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextMarkupAnnotation\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'AnnotationEditTool', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ ajaxHeaders: [] })\n    ], PdfViewer.prototype, \"ajaxRequestSettings\", void 0);\n    __decorate([\n        Property({ showTooltip: true, annotationToolbarItem: ['HighlightTool', 'UnderlineTool', 'StrikethroughTool', 'ColorEditTool', 'OpacityEditTool', 'AnnotationDeleteTool'] })\n    ], PdfViewer.prototype, \"annotationToolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#FFDF56', author: 'Guest', subject: 'Highlight', modifiedDate: '' })\n    ], PdfViewer.prototype, \"highlightSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#ff0000', author: 'Guest', subject: 'Strikethrough', modifiedDate: '' })\n    ], PdfViewer.prototype, \"strikethroughSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#00ff00', author: 'Guest', subject: 'Underline', modifiedDate: '' })\n    ], PdfViewer.prototype, \"underlineSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationAdd\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationRemove\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationPropertiesChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { ListView } from '@syncfusion/ej2-lists';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.childNavigateCount = 0;\n        // tslint:disable-next-line\n        this.bookmarkClick = function (args) {\n            // tslint:disable-next-line\n            if (!args.event.target.classList.contains('e-icons')) {\n                var bookid = args.data.Id;\n                _this.childNavigateCount = 0;\n                _this.pdfViewerBase.navigationPane.goBackToToolbar();\n                _this.navigateToBookmark(bookid);\n            }\n            else {\n                _this.childNavigateCount++;\n            }\n            return false;\n        };\n        this.nodeClick = function (args) {\n            _this.setHeight(args.node);\n            var bookid = Number(args.nodeData.id);\n            _this.navigateToBookmark(bookid);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var bookmarkRequest = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        bookmarkRequest.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        bookmarkRequest.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.pdfViewerBase.setCustomAjaxHeaders(bookmarkRequest);\n        }\n        bookmarkRequest.responseType = 'json';\n        bookmarkRequest.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        bookmarkRequest.onreadystatechange = function (event) {\n            if (bookmarkRequest.readyState === 4 && bookmarkRequest.status === 200) {\n                if (_this.pdfViewerBase.navigationPane) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        data = JSON.parse(data);\n                    }\n                    _this.bookmarks = { bookMark: data.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n                }\n                if (_this.pdfViewerBase.navigationPane) {\n                    if (_this.bookmarks == null) {\n                        _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                    }\n                    else {\n                        _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                        _this.isBookmarkViewDiv = false;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        bookmarkRequest.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(bookmarkRequest.status, bookmarkRequest.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        var _this = this;\n        if (!this.isBookmarkViewDiv) {\n            this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n            this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n            // tslint:disable-next-line:max-line-length\n            var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon e-right' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            // tslint:disable-next-line:max-line-length\n            var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n            if (this.pdfViewer.enableRtl) {\n                bookmarkTitle.style.paddingRight = 26 + 'px';\n            }\n            else {\n                bookmarkTitle.style.paddingLeft = 40 + 'px';\n            }\n            bookmarkTitle.innerText = '${Title}';\n            bookmarkIconView.appendChild(bookmarkTitle);\n            // tslint:disable-next-line:max-line-length\n            this.treeObj = new TreeView({\n                fields: {\n                    dataSource: this.bookmarks.bookMark,\n                    id: 'Id',\n                    text: 'Title',\n                    child: 'Child',\n                    hasChildren: 'HasChild',\n                },\n                nodeTemplate: bookmarkIconView.outerHTML,\n                nodeSelected: this.nodeClick.bind(this),\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.treeObj.enableRtl = true;\n            }\n            this.treeObj.appendTo(this.bookmarkView);\n            ['mouseover', 'keydown'].forEach(function (evt) { return _this.bookmarkView.addEventListener(evt, function (event) {\n                _this.setHeight(event.target);\n            }); });\n            this.isBookmarkViewDiv = true;\n        }\n        this.bookmarkView.style.display = 'block';\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkContentMobile = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.remove();\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.getElement('_bookmarks_container').appendChild(this.bookmarkView);\n        this.bookmarkList = new ListView({\n            dataSource: this.bookmarks.bookMark,\n            fields: {\n                id: 'Id',\n                text: 'Title',\n                child: 'Child'\n            },\n            showHeader: false,\n            select: this.bookmarkClick.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.bookmarkList.enableRtl = true;\n        }\n        this.bookmarkList.appendTo(this.bookmarkView);\n    };\n    // tslint:disable-next-line\n    BookmarkView.prototype.setHeight = function (element) {\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            else if (element.classList.contains('e-list-parent')) {\n                element = element.querySelector('.e-fullrow');\n            }\n            else if (element.classList.value !== ('e-fullrow') && element.closest('.e-list-item')) {\n                element = element.closest('.e-list-item').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.setBookmarkContentHeight = function () {\n        // tslint:disable-next-line\n        var element = this.treeObj.element;\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    BookmarkView.prototype.navigateToBookmark = function (bookid) {\n        var pageIndex = this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n        var Y = this.bookmarksDestination.bookMarkDestination[bookid].Y;\n        this.goToBookmark(pageIndex, Y);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @param  {number} pageIndex - Specifies the pageIndex for Navigate\n     * @param  {number} y - Specifies the Y coordinates value of the Page\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n            this.pdfViewerBase.updateMobileScrollerPosition();\n        }\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.disableBookmarkButton();\n            this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        }\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            if (this.bookmarkView.parentElement !== null) {\n                this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n            }\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.contextMenuHeight = 144;\n        /**\n         * @private\n         */\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                var selectionRectBounds = this.getSelectionRectangleBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    // tslint:disable-next-line:max-line-length\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bound: selectionBounds, rectangleBounds: selectionRectBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            if (lastElement.childNodes[0]) {\n                                this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                            }\n                            else {\n                                this.extendSelectionStich(lastElement, this.getTextLastLength(lastElement), selection);\n                            }\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBound = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    var selectionRectBounds = this.getSelectionRectangleBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bound: selectionBound, rectangleBounds: selectionRectBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode);\n        var endElement = document.getElementById(endNode);\n        if (startElement.childNodes[0]) {\n            startElement = startElement.childNodes[0];\n        }\n        if (endElement.childNodes[0]) {\n            endElement = endElement.childNodes[0];\n        }\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds = this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber);\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getSelectionRectangleBounds = function (range, pageNumber) {\n        var selectionBounds = [];\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var startOffset = 0;\n            var endOffset = 0;\n            var currentId = 0;\n            var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(range.startContainer);\n            var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(range.startContainer, anchorPageId);\n            var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(range.endContainer);\n            var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(range.endContainer, focusPageId);\n            var textDivs = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).childNodes;\n            if (pageNumber === anchorPageId) {\n                currentId = anchorTextId;\n            }\n            else {\n                currentId = 0;\n            }\n            for (var j = currentId; j < textDivs.length; j++) {\n                var textElement = textDivs[j];\n                if (j === anchorTextId) {\n                    startOffset = range.startOffset;\n                }\n                else {\n                    startOffset = 0;\n                }\n                if (j === focusTextId) {\n                    endOffset = range.endOffset;\n                }\n                else {\n                    endOffset = textElement.textContent.length;\n                }\n                var newRange = document.createRange();\n                for (var k = 0; k < textElement.childNodes.length; k++) {\n                    var node = textElement.childNodes[k];\n                    newRange.setStart(node, startOffset);\n                    newRange.setEnd(node, endOffset);\n                }\n                var boundingRect = this.normalizeBounds(newRange.getBoundingClientRect(), pageNumber);\n                selectionBounds.push(boundingRect);\n                newRange.detach();\n                if (j === focusTextId) {\n                    break;\n                }\n            }\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n            selectionBounds.push(bounds);\n        }\n        return selectionBounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.width)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bound = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bound = ranges[i].bound;\n                }\n            }\n        }\n        return bound;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.calculateContextMenuPosition(event.touches[0].clientY, event.touches[0].clientX);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.calculateContextMenuPosition = function (top, left) {\n        top = top - this.pdfViewerBase.toolbarHeight;\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var contextTop = top - this.contextMenuHeight;\n            if (contextTop < this.pdfViewerBase.toolbarHeight) {\n                top = top + this.contextMenuHeight;\n            }\n            else {\n                top = contextTop;\n            }\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(top, left - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        if (this.pdfViewerBase.getTextMarkupAnnotationMode()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch(_this.searchInput);\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            _this.searchButtonClick(_this.searchBtn, _this.searchInput);\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        if (this.pdfViewer.enableRtl) {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-next-search');\n        }\n        else {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        }\n        this.prevSearchBtn.setAttribute('aria-label', 'Previous Search text');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        if (this.pdfViewer.enableRtl) {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-prev-search');\n        }\n        else {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        }\n        this.nextSearchBtn.setAttribute('aria-label', 'Next Search text');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        if (this.pdfViewer.enableRtl) {\n            this.searchBox.classList.add('e-rtl');\n            this.searchBox.style.left = '88.3px';\n        }\n        else {\n            this.searchBox.classList.remove('e-rtl');\n            this.searchBox.style.right = '88.3px';\n        }\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableToolbar) {\n            var secondaryToolbar = this.pdfViewerBase.getElement('_toolbarContainer_popup');\n            if (secondaryToolbar) {\n                if (secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)) {\n                    this.searchBox.style.right = '0px';\n                }\n            }\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n                this.searchBox.style.right = '0px';\n                // tslint:disable-next-line\n                this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n                // tslint:disable-next-line\n                this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            }\n            else {\n                this.searchBox.style.right = '88.3px';\n                this.searchBox.style.width = '';\n                this.searchInput.style.width = '';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function (searchElement) {\n        var inputString = searchElement.value;\n        this.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.initiateSearch = function (inputString) {\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch(this.searchInput);\n            }\n        }\n        else {\n            this.initiateTextSearch(this.searchInput);\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -100 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                var targetScrollElement = this.getScrollElement(element);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                var targetScrollElement = this.getScrollElement(element_1);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    TextSearch.prototype.getScrollElement = function (element) {\n        var targetElement = element;\n        if (element.childNodes.length > 0) {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                if (element.childNodes[i].classList) {\n                    if (element.childNodes[i].classList.contains('e-pv-search-text-highlight')) {\n                        targetElement = element.childNodes[i];\n                    }\n                }\n            }\n        }\n        return targetElement;\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (Browser.isDevice) {\n                parent.scrollLeft = offsetX;\n            }\n            else {\n                if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                    parent.scrollLeft = offsetX;\n                }\n            }\n        }\n        parent.scrollTop = offsetY;\n        this.pdfViewerBase.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.pdfViewerBase.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.prevSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.prevSearchBtn.disabled = true;\n            }\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.nextSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.nextSearchBtn.disabled = true;\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchButtonClick = function (element, inputElement) {\n        if (element.classList.contains('e-pv-search-icon')) {\n            this.initiateTextSearch(inputElement);\n        }\n        else if (element.classList.contains('e-pv-search-close')) {\n            inputElement.value = '';\n            this.resetTextSearch();\n            inputElement.focus();\n        }\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (this.searchBtn) {\n            if (isEnable) {\n                this.searchBtn.classList.remove('e-pv-search-close');\n                this.searchBtn.classList.add('e-pv-search-icon');\n            }\n            else {\n                this.searchBtn.classList.remove('e-pv-search-icon');\n                this.searchBtn.classList.add('e-pv-search-close');\n            }\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));\n        }\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText - Specifies the searchText content\n     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', {\n                id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container'\n            });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex < _this.pdfViewerBase.pageCount; pageIndex++) {\n                    var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                    var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                    _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = {\n            pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1\n        };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.pdfViewerBase.setCustomAjaxHeaders(request);\n        }\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        var printImage = request.responseText;\n        if (typeof printImage !== 'object') {\n            printImage = JSON.parse(printImage);\n        }\n        var annotationSource = '';\n        if (printImage.textMarkupAnnotation && this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            annotationSource = this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printImage.textMarkupAnnotation, pageIndex);\n        }\n        // tslint:disable-next-line:max-line-length\n        this.printCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_printCanvas_' + pageIndex, className: 'e-pv-print-canvas' });\n        this.printCanvas.style.width = pageWidth + 'px';\n        this.printCanvas.style.height = pageHeight + 'px';\n        this.printCanvas.height = 1056 * window.devicePixelRatio;\n        this.printCanvas.width = 816 * window.devicePixelRatio;\n        var context = this.printCanvas.getContext('2d');\n        var pageImage = new Image();\n        var annotationImage = new Image();\n        pageImage.onload = function () {\n            if (pageHeight > pageWidth) {\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                }\n            }\n            else {\n                // translate to center canvas\n                context.translate(proxy.printCanvas.width * 0.5, proxy.printCanvas.height * 0.5);\n                // rotate the canvas to - 90 degree \n                context.rotate(-0.5 * Math.PI);\n                // un translate the canvas back to origin\n                context.translate(-proxy.printCanvas.height * 0.5, -proxy.printCanvas.width * 0.5);\n                // draw the image\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                }\n            }\n            if (pageIndex === (proxy.pdfViewerBase.pageCount - 1)) {\n                proxy.printWindowOpen();\n            }\n        };\n        pageImage.src = printImage.image;\n        annotationImage.src = annotationSource;\n        this.printViewerContainer.appendChild(this.printCanvas);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:100%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        for (var i = 0; i < this.printViewerContainer.children.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            var canvasUrl = this.printViewerContainer.children[i].toDataURL();\n            this.frameDoc.document.write('<div style=\"margin:0mm;width:816px;height:1056px;position:relative\"><img src=\"' + canvasUrl + '\" id=\"' + 'image_' + i + '\" /></div>');\n        }\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            try {\n                this.iframe.contentWindow.document.execCommand('print', false, null);\n            }\n            catch (e) {\n                this.iframe.contentWindow.print();\n            }\n        }\n        else {\n            setTimeout(function () {\n                _this.iframe.contentWindow.print();\n                _this.iframe.contentWindow.focus();\n                document.body.removeChild(_this.iframe);\n            }, 200);\n        }\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"names":["Annotation","pdfViewer","viewerBase","this","actionCollection","redoCollection","isPopupNoteVisible","pdfViewerBase","enableTextMarkupAnnotation","textMarkupAnnotationModule","TextMarkupAnnotation","prototype","setAnnotationMode","type","clearAnnotationMode","drawTextMarkupAnnotations","toString","isTextMarkupAnnotationMode","deleteAnnotation","deleteTextMarkupAnnotation","toolbarModule","annotationToolbarModule","selectAnnotationDeleteItem","enableAnnotationPropertiesTools","initializeCollection","popupNote","createNote","addAction","pageNumber","index","annotation","actionString","property","action","pageIndex","modifiedProperty","push","updateToolbar","undo","actionObject","pop","undoTextMarkupAction","undoRedoPropertyChange","redo","redoTextMarkupAction","updateUndoRedoButtons","createElement","id","element","className","styles","popupNoteAuthor","appendChild","popupNoteContent","mainContainer","showPopupNote","event","color","author","note","mainContainerPosition","getBoundingClientRect","popupNoteClientRect","textContent","style","backgroundColor","display","topPosition","pageY","top","leftPosition","pageX","left","width","height","hidePopupNote","createTextMarkupPopup","_this","elementId","popupElement","headerElement","authorPopupElement","closeBtn","modifiedDateElement","contentContainer","noteContentElement","contentEditable","viewerContainer","addEventListener","saveClosePopupMenu","bind","onPopupElementMoveStart","onPopupElementMove","window","onPopupElementMoveEnd","focus","changedTouches","target","contains","childNodes","isPopupMenuMoved","popupElementClientRect","clientX","clientY","pageSize","currentAnnotPageNumber","getZoomFactor","parseFloat","top_1","clientPosition","pageDiv","document","getElementById","saveNoteContent","innerText","closePopupMenu","parentElement","removeChild","showAnnotationPopup","getEventPageNumber","currentTextMarkupAnnotation","getProperDate","modifiedDate","canvasPosition","date","dateObject","Date","isNaN","getFullYear","dateString","slice","getMonth","getDate","getHours","getMinutes","getSeconds","eventTarget","pageString","split","parseInt","clear","destroy","getModuleName","LinkAnnotation","renderHyperlinkContent","data","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","_loop_1","i","aTag","rect","this_1","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","onclick","fireHyperlinkClick","open","_loop_2","this_2","undefined","destPageHeight","destLocation","scrollValue","name","scrollTop","background","position","Left","Top","Width","Height","modifyZindexForTextSelection","isAdd","pageCount","getElement","pageChildNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","aElement","getElementsByTagName","parentNode","currentTextMarkupAddMode","selectTextMarkupCurrentPage","currentAnnotationIndex","highlightColor","highlightSettings","underlineColor","underlineSettings","strikethroughColor","strikethroughSettings","highlightOpacity","opacity","underlineOpacity","strikethroughOpacity","createAnnotationLayer","pageWidth","pageHeight","displayMode","annotationCanvas","renderTextMarkupAnnotationsInPage","textMarkupAnnotations","canvas","renderTextMarkupAnnotations","factor","getMagnifiedValue","context","getContext","setLineDash","annotations","getAnnotations","annotationObject","TextMarkupAnnotationType","textMarkupAnnotationType","Color","Opacity","bounds","Bounds","Author","subject","Subject","ModifiedDate","Note","Rect","storeAnnotations","annotBounds","renderHighlightAnnotation","renderStrikeoutAnnotation","renderUnderlineAnnotation","maintainAnnotationSelection","selectionObject","textSelectionModule","selectionRangeArray","convertSelectionToTextMarkup","getSelection","pageBounds","getDrawnBounds","drawTextMarkups","clearTextSelection","rectangleBounds","bound","getPageContext","getAddedAnnotation","isDocumentEdited","settings","annotationModule","fireAnnotationAdd","beginPath","x","X","y","Y","globalAlpha","closePath","fillStyle","msFillRule","fill","save","getProperBounds","drawLine","boundValues","moveTo","lineTo","lineWidth","strokeStyle","stroke","printTextMarkupAnnotations","toDataURL","saveTextMarkupAnnotations","storeObject","sessionStorage","getItem","documentId","Array","colorpick","ColorPicker","j","annotationCollection","JSON","parse","newArray","pageAnnotationObject","z","stringify","getBoundsForSave","colorString","getValue","getRgbCode","pageAnnotations","deletedAnnotation","splice","manageAnnotations","fireAnnotationRemove","Browser","isDevice","hideMobileAnnotationToolbar","showToolbar","modifyColorProperty","modifyAnnotationProperty","fireAnnotationPropertiesChange","modifyOpacityProperty","args","value","status","toLocaleString","clearCurrentAnnotation","tempColor","tempOpacity","enableAnnotationPropertiesTool","clearCurrentAnnotationSelection","lowerPageIndex","higherPageIndex","k","clearAnnotationSelection","stringArray","r","g","b","selection","anchorNode","range","createRange","isBackWardSelection","textLayer","focusNode","pageId","getPageIndex","pageRect","setStart","focusOffset","setEnd","anchorOffset","boundingRect","rectangle","getDefaultValue","right","bottom","rectangleArray","startNode","endNode","selectionStartOffset","selectionEndOffset","anchorPageId","anchorTextId","getTextIndex","focusPageId","focusTextId","startOffset","endOffset","currentId","selectionRects","pageStartId","pageEndId","pageStartOffset","pageEndOffset","textDivs","textElement","node","detach","startElementNode","endElementNode","pageRange","pageRectBounds","pageRectangle","removeAllRanges","rerenderAnnotationsPinch","annotCanvas","oldAnnotCanvas","rerenderAnnotations","oldCanvas","newCanvas","resizeAnnotations","onTextMarkupAnnotationMouseUp","isNullOrUndefined","isClickedOnScrollBar","currentAnnot","getCurrentMarkupAnnotation","selectAnnotation","isToolbarHidden","showAnnotationToolbar","annotationItem","onTextMarkupAnnotationTouchEnd","number","touchCanvas","touches","onTextMarkupAnnotationMouseMove","cursor","isPanMode","getAnnotationToolStatus","currentTextMarkupAnnotations","canvasParentPosition","leftClickPosition","topClickPosition","annotationList","isAnnotationGot","top_2","compareCurrentAnnotations","previousX","currentAnnotation","firstAnnotBounds","firstXposition","firstYposition","secondAnnotBounds","secondXposition","secondYposition","drawAnnotationSelectRect","isEnable","createMobileAnnotationToolbar","isMobileAnnotEnabled","enable","updateColorInIcon","colorDropDownElement","setCurrentColorInPicker","annotObject","removeItem","getPageCollection","indexOf","markupAnnotation","annotationStringified","setItem","predefinedDate","storedIndex","NavigationPane","viewer","base","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isTooltipCreated","isThumbnail","isNavigationToolbarVisible","isBookmarkListOpen","isNavigationPaneResized","isBookmarkOpen","isThumbnailOpen","resizeIconMouseOver","srcElement","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","offsetTop","offsetParent","clientWidth","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","getPopupNoteVisibleStatus","preventDefault","enableRtl","maxWidth","Math","floor","outerContainerWidth","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","closeDiv","viewerWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","bookmarkButton","children","bookmarkViewModule","setBookmarkContentHeight","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","localeObj","getConstant","bookmarkPane","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","openThumbnailPane","bookmarkButtonOnClick","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","createNavigationPane","sideBarToolbar","attrs","role","aria-orientation","tabindex","cssFloat","sideBarToolbarSplitter","direction","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","sideBarTitleOnMouseup","adjustPane","splitterElement","toolbarContainer","toolbarHeight","getComputedStyle","createNavigationPaneMobile","option","toolbarElement","viewerMainContainer","insertBefore","items","searchTemplate","prefixIcon","tooltipText","click","goBackToToolbar","template","iconElement","firstElementChild","enableSearchItems","textSearchModule","searchButtonClick","searchInput","searchPrevious","searchNext","text","toolbar","Tool","overflowMode","appendTo","initiateSearchBox","initiateBookmarks","searchBtn","which","initiateTextSearch","resetVariables","setSearchInputWidth","enableItems","mobileScrollerContainer","bookmarkContainer","renderBookmarkContentMobile","inputString","initiateSearch","cancelTextSearch","childNavigateCount","bookmarkList","back","onWindowResize","searchInputParent","padding","getPropertyValue","getParentElementSearchBox","idString","createTooltipMobile","toastObject","tooltipChild","tooltipDiv","Toast","close","onTooltipClose","animation","hide","duration","effect","clientHeight","show","tooltipElement","isMessagePopupOpened","toolbarResize","thumbnailButton","disabled","aria-label","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","buttonSpan","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","enableBookmarkButton","resizeIcon","setResizeIconTop","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","t","call","label","ops","trys","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","previousTime","currentTime","isTouchScrolled","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","dragX","dragY","isScrollbarMouseDown","scrollX","scrollY","ispageMoved","isThumb","isTapHidden","singleTapTimer","tapCount","isInitialLoaded","navigationPane","isAnnotationToolbarHidden","updatePageHeight","annotationToolbarHeight","onToolbarResize","enableToolbar","textSearchBoxOnResize","mobilePageNoContainer","updateMobileScrollerPosition","viewerContainerOnMousedown","button","detail","isIE","documentMode","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","idStringArray","firePageClick","offsetX","offsetY","isTextMarkupAnnotationModule","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","isCollapsed","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","getTextMarkupAnnotationMode","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","getCurrentTextMarkupAnnotation","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","setTouchPoints","preventTouchEvent","getTime","handleTaps","contextMenuObj","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","difference","speed","abs","viewerContainerOnPointerEnd","viewerContainerOnScroll","scrollposX","scrollposY","ratio","scrollHeight","containerValue","verticalScrollValue","getPageHeight","getPageTop","fitType","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","TextLayer","initializeComponent","toolbarDiv","createMobilePageNumberContainer","tabIndex","touchAction","setMaximumHeight","intializeToolbar","mobilecurrentPageContainer","mobilenumberContainer","mobiletotalPageContainer","mobileSpanContainer","createThumbnailContainer","createPrintPopup","createGoToPagePopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","innerHTML","zIndex","mobileScrollContainerDown","mobileScrollContainerEnd","initiatePageRender","documentData","password","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","interactionMode","initiatePanning","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","minHeight","goToPagePopup","removeEventListener","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","ajaxRequestSettings","ajaxHeaders","setCustomAjaxHeaders","responseType","send","onreadystatechange","readyState","currentTarget","response","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","initPageDiv","isAutoZoom","isInitialLoading","createRequestForRender","pageTop","viewerHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","unload","updateWaitingPopup","pageCurrentRect","firstChild","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","windowSessionStorageClear","fireDocumentUnload","unWireEvents","request_1","forEach","getScrollParent","scrollNodeX","scrollNodeY","userAgent","appVersion","scrollTo","nodeName","overflowY","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","closeCorruptPopup","beforeClose","goToPageElement","inputContainer","goToPageInput","pageNoContainer","GoToPageCancelClick","GoToPageApplyClick","closeGoToPagePopUp","NumericTextBox","format","showSpinButton","inputValue","EnableApplyButton","DisableApplyButton","getElementsByClassName","navigation","goToPage","differenceRatio","passwordInput","passwordCancel","passwordCancelClick","applyPassword","isInteraction","fitToAuto","fitToWidth","applyLeftPosition","modifyTextCursor","disableTextSelectionMode","enableAnnotationAddTools","enableTextSelectionMode","onSingleTap","onDoubleTap","moreDropDown","dropDown","getSelectTextMarkupCurrentPage","magnification","onDoubleTapMagnification","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","pageCanvas","maintainSelectionOnScroll","indexInArray","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","imageData","matrix_1","image_1","Image","onload","devicePixelRatio","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","renderTextContent","linkAnnotationModule","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","rotation","addTextLayer","renderTextContents","resizeTextContents","orderPageDivElements","renderPageCanvas","nextElement","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","URL","createObjectURL","anchorElement","href","documentElement","location","padCharacter","replace","textMarkupAnnotationCollection","createBlobUrl","info","msSaveOrOpenBlob","getStoredData","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","blobObj","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","headerName","headerValue","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","byteNumbers","charCodeAt","byteArray","Uint8Array","Blob","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","isAnnotationButtonsEnabled","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","whiteSpace","setStyleToTextDiv","Bottom","setTextElementProperties","font","fontSize","fontFamily","contextWidth","measureText","scale","applyTextRotation","Rotation","resizeExcessDiv","textRotation","scaleString","transform","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","startId","endId","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","compareDocumentPosition","backward","Node","DOCUMENT_POSITION_PRECEDING","previousZoomFactor","textSearch","copyContextMenu","iconCss","Context","contextMenuOnBeforeOpen","select","onMenuItemSelect","created","contextMenuOnCreated","animationSettings","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","isTapToFitZoom","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","zoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","calculateScrollValues","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","annotationLayers","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","thumbnailViewChildrenElement","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","isUndoRedoBtnsVisible","isAnnotationEditBtnVisible","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","handleToolbarButtonClick","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","enteredValue","navigationModule","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","AnnotationToolbar","initializeAnnotationToolbar","showNavigationToolbar","enableNavigationToolbar","navigationToolbar","navigationToolbarSplitter","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","showUndoRedoTool","showAnnotationEditTool","applyHideToToolbar","showSeparator","enableToolbarItem","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableUndoRedoTool","enableAnnotationEditTool","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","undoItem","redoItem","resetToolbar","moreOptionItem","deSelectItem","updateInteractionItems","enableAnnotation","annotationToolbarSettings","annotationToolbarItem","enableCollectionAvailable","disableUndoRedoButtons","collection","unWireEvent","fileInputElement","controlWidth","createToolbarItemsForMobile","tool","clicked","createToolbarItems","createZoomDropdown","createNumericTextBox","refreshOverflow","afterToolbarCreation","currentPageInputTemplate","createCurrentPageInputTemplate","totalPageTemplate","createTotalPageTemplate","zoomDropDownTemplateString","createZoomDropdownElement","align","itemsContainer","addClassToolbarItem","createTooltip","addPropertiesToolItemContainer","minWidth","createToolbarItem","outerHTML","ComboBox","dataSource","fields","popupHeight","showClearButton","createMoreOption","DropDownButton","dropdownButtonPosition","beforeItemRender","bookmarks","elementName","toolbarItem","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","endIndex","isHide","hideItem","printModule","print","updateInteractionTools","initiateAnnotationMode","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","selectItem","showSearchBox","searchInputElement","DisableInteractionTools","isTextSelect","toolbarItems","toolbarSettingsItems","toolbarBorderHeight","isHighlightEnabled","isUnderlineEnabled","isStrikethroughEnabled","isHighlightBtnVisible","isUnderlineBtnVisible","isStrikethroughBtnVisible","isColorToolVisible","isOpacityToolVisible","isDeleteAnnotationToolVisible","isCurrentAnnotationOpacitySet","primaryToolbar","onToolbarClicked","createDropDowns","applyAnnotationToolbarSettings","createMobileToolbarItems","deleteItem","colorTemplate","getTemplate","opacityTemplate","page","colorPalette","createColorPicker","colorDropDown","createDropDownButton","colorDropDownBeforeOpen","colorDropDownOpen","onColorPickerCancelClick","opacityDropDownElement","sliderContainer","createSlider","opacityDropDown","opacityDropDownBeforeOpen","opacitySlider","opacityChange","changed","opacityDropDownOpen","toggle","refresh","setProperties","updateOpacityIndicator","iconClass","dropDownButton","inputElement","colorPicker","inline","mode","enableOpacity","onColorPickerChange","showButtons","currentValue","hex","borderBottomColor","opacityIndicator","outerContainer","sliderElement","Slider","highlightItem","underlineItem","strikethroughItem","closeItem","handleHighlight","handleUnderline","handleStrikethrough","toolBarInitialStatus","adjustViewer","enablePropertiesTool","deselectAllItems","showHighlightTool","showUnderlineTool","showStrikethroughTool","showColorEditTool","showOpacityEditTool","showAnnotationDeleteTool","isAdjust","getToolbarHeight","updateViewerHeight","getElementHeight","resetViewerHeight","getHeight","updateContentContainerHeight","sideBarClientRect","isButtonsEnabled","__extends","extendStatics","d","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","AjaxRequestSettings","AnnotationToolbarSettings","ServerActionSettings","StrikethroughSettings","UnderlineSettings","HighlightSettings","PdfViewer","options","defaultLocale","Cancel","Download file","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","Apply","GoToPage","No matches","No Text Found","Undo","Redo","Highlight","Underline","Strikethrough","Delete","Color edit","Opacity edit","Highlight context","Underline context","Strikethrough context","Server error","Open text","First text","Previous text","Next text","Last text","Zoom in text","Zoom out text","Selection text","Pan text","Print text","Search text","Annotation Edit text","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","enablePrint","enableDownload","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","annotationId","annotationType","annotationBound","annotationSettings","isColorChanged","isOpacityChanged","Event","NotifyPropertyChanges","Component","BookmarkView","bookmarkClick","bookid","Id","navigateToBookmark","nodeClick","setHeight","Number","nodeData","bookmarkRequest","bookMark","bookmarksDestination","bookMarkDestination","BookmarksDestination","isBookmarkViewDiv","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","paddingRight","paddingLeft","treeObj","TreeView","child","hasChildren","nodeTemplate","nodeSelected","evt","ListView","showHeader","fullRowSelect","querySelector","closest","nextElementSibling","PageIndex","goToBookmark","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","contextMenuHeight","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","yTouch","getNodeElement","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","selectNodeContents","currentPosition","endPosition","rangeBounds","addRange","extend","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","getNodeElementFromNode","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","selectionBounds","getSelectionBounds","getRangeAt","selectionRectBounds","getSelectionRectangleBounds","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","selectionBound","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","newRange","getTextId","lastIndexOf","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","calculateContextMenuPosition","contextTop","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","clearAllOccurrences","searchKeypressHandler","enableNextButton","enablePrevButton","updateSearchInputIcon","searchClickHandler","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","secondaryToolbar","onTextSearchClose","initSearch","highlightOthers","searchElement","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","targetScrollElement","getScrollElement","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","applyTextSelection","iconSpan","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printImage","responseText","annotationSource","textMarkupAnnotation","printCanvas","pageImage","annotationImage","translate","rotate","PI","printWindowOpen","browserUserAgent","write","canvasUrl"],"mappings":"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"}