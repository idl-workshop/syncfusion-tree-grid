{"version":3,"file":"ej2-pdfviewer.min.js","sources":["../../src/pdfviewer/annotation/annotation.js","../../src/pdfviewer/annotation/link-annotation.js","../../src/pdfviewer/annotation/text-markup-annotation.js","../../src/pdfviewer/base/navigation-pane.js","../../src/pdfviewer/base/pdfviewer-base.js","../../src/pdfviewer/base/text-layer.js","../../src/pdfviewer/base/context-menu.js","../../src/pdfviewer/magnification/magnification.js","../../src/pdfviewer/navigation/page-navigation.js","../../src/pdfviewer/thumbnail-view/thumbnail-view.js","../../src/pdfviewer/toolbar/toolbar.js","../../src/pdfviewer/toolbar/annotation-toolbar.js","../../src/pdfviewer/pdfviewer.js","../../src/pdfviewer/bookmark-view/bookmark-view.js","../../src/pdfviewer/text-selection/text-selection.js","../../src/pdfviewer/text-search/text-search.js","../../src/pdfviewer/print/print.js","../../src/global.js"],"sourcesContent":["import { TextMarkupAnnotation } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Annotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.actionCollection = [];\n        /**\n         * @private\n         */\n        this.redoCollection = [];\n        /**\n         * @private\n         */\n        this.isPopupNoteVisible = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n    }\n    /**\n     * Set annotation type to be added in next user interaction in PDF Document.\n     * @param type\n     * @returns void\n     */\n    Annotation.prototype.setAnnotationMode = function (type) {\n        if (type === 'None') {\n            this.clearAnnotationMode();\n        }\n        else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n            if (this.textMarkupAnnotationModule) {\n                this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n            }\n        }\n    };\n    Annotation.prototype.clearAnnotationMode = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.deleteAnnotation = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n            if (this.pdfViewer.toolbarModule) {\n                if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false);\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.initializeCollection = function () {\n        this.actionCollection = [];\n        this.redoCollection = [];\n        if (!this.popupNote) {\n            this.createNote();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.addAction = function (pageNumber, index, annotation, actionString, property) {\n        var action = { pageIndex: pageNumber, index: index, annotation: annotation, action: actionString, modifiedProperty: property };\n        this.actionCollection.push(action);\n        this.updateToolbar();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.undo = function () {\n        var actionObject = this.actionCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.redoCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.redo = function () {\n        var actionObject = this.redoCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.actionCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    Annotation.prototype.updateToolbar = function () {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n        }\n    };\n    Annotation.prototype.createNote = function () {\n        // tslint:disable-next-line:max-line-length\n        this.popupNote = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note', className: 'e-pv-annotation-note', styles: 'display:none' });\n        this.popupNoteAuthor = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_author', className: 'e-pv-annotation-note-author' });\n        this.popupNote.appendChild(this.popupNoteAuthor);\n        // tslint:disable-next-line:max-line-length\n        this.popupNoteContent = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_content', className: 'e-pv-annotation-note-content' });\n        this.popupNote.appendChild(this.popupNoteContent);\n        this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n        var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n        if (author) {\n            this.popupNoteAuthor.textContent = author;\n        }\n        this.popupNoteContent.textContent = note;\n        if (type === 'Highlight') {\n            this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n        }\n        else if (type === 'Underline') {\n            this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n        }\n        else if (type === 'Strikethrough') {\n            this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n        }\n        this.popupNote.style.display = 'block';\n        var topPosition = (event.pageY - mainContainerPosition.top + 5);\n        var leftPosition = (event.pageX - mainContainerPosition.left + 5);\n        if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n            leftPosition = leftPosition - popupNoteClientRect.width;\n        }\n        if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n            topPosition = topPosition - popupNoteClientRect.height;\n        }\n        this.popupNote.style.top = topPosition + 'px';\n        this.popupNote.style.left = leftPosition + 'px';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.hidePopupNote = function () {\n        this.popupNote.style.display = 'none';\n    };\n    Annotation.prototype.createTextMarkupPopup = function () {\n        var _this = this;\n        var elementId = this.pdfViewer.element.id;\n        // tslint:disable-next-line:max-line-length\n        this.popupElement = createElement('div', { id: elementId + '_popup_annotation_note', className: 'e-pv-annotation-popup-menu', styles: 'display:none' });\n        var headerElement = createElement('div', { id: elementId + '_popup_header', className: 'e-pv-annotation-popup-header' });\n        // tslint:disable-next-line:max-line-length\n        this.authorPopupElement = createElement('div', { id: elementId + '_popup_author', className: 'e-pv-annotation-popup-author' });\n        headerElement.appendChild(this.authorPopupElement);\n        // tslint:disable-next-line:max-line-length\n        var closeBtn = createElement('span', { id: elementId + '_popup_close', className: 'e-pv-annotation-popup-close e-pv-icon' });\n        headerElement.appendChild(closeBtn);\n        this.popupElement.appendChild(headerElement);\n        // tslint:disable-next-line:max-line-length\n        this.modifiedDateElement = createElement('div', { id: elementId + '_popup_modified_time', className: 'e-pv-annotation-modified-time' });\n        this.popupElement.appendChild(this.modifiedDateElement);\n        // tslint:disable-next-line:max-line-length\n        var contentContainer = createElement('div', { id: elementId + '_popup_content_container', className: 'e-pv-annotation-popup-note-container' });\n        this.noteContentElement = createElement('div', { id: elementId + '_popup_content', className: 'e-pv-annotation-popup-content' });\n        this.noteContentElement.contentEditable = 'true';\n        contentContainer.appendChild(this.noteContentElement);\n        this.popupElement.appendChild(contentContainer);\n        this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n        closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n        closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n        this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n        window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n        this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n        window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n        this.noteContentElement.addEventListener('mousedown', function () { _this.noteContentElement.focus(); });\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMoveStart = function (event) {\n        if (event.type === 'touchstart') {\n            event = event.changedTouches[0];\n        }\n        if ((event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            this.isPopupMenuMoved = true;\n            var popupElementClientRect = this.popupElement.getBoundingClientRect();\n            this.clientX = event.clientX - popupElementClientRect.left;\n            // tslint:disable-next-line:max-line-length\n            this.clientY = (event.clientY - popupElementClientRect.top) + (this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMove = function (event) {\n        if (event.type === 'touchmove') {\n            event = event.changedTouches[0];\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.isPopupMenuMoved && (event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            var left = (event.clientX - this.clientX) + parseFloat(this.popupElement.style.left);\n            var top_1 = ((event.clientY - this.clientY) + parseFloat(this.popupElement.style.top));\n            this.clientX = event.clientX;\n            this.clientY = event.clientY;\n            var clientPosition = this.popupElement.getBoundingClientRect();\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (left > parseFloat(pageDiv.style.left) && (left + clientPosition.width) < (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                this.popupElement.style.left = (left) + 'px';\n            }\n            else {\n                this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            if (top_1 > parseFloat(pageDiv.style.top) && (top_1 + clientPosition.height) < (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                this.popupElement.style.top = (top_1) + 'px';\n            }\n            else {\n                this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n            }\n        }\n    };\n    Annotation.prototype.onPopupElementMoveEnd = function () {\n        this.isPopupMenuMoved = false;\n    };\n    Annotation.prototype.saveClosePopupMenu = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n        }\n        this.closePopupMenu();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.closePopupMenu = function () {\n        if (this.popupElement) {\n            this.popupElement.parentElement.removeChild(this.popupElement);\n            this.popupElement = null;\n            this.isPopupNoteVisible = false;\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showAnnotationPopup = function (event) {\n        if (this.textMarkupAnnotationModule) {\n            this.currentAnnotPageNumber = this.getEventPageNumber(event);\n            // tslint:disable-next-line:max-line-length\n            if (this.textMarkupAnnotationModule && (event.target !== (this.noteContentElement) || (event.target.contains(this.noteContentElement.childNodes[0])))) {\n                this.hidePopupNote();\n                if (!this.popupElement) {\n                    this.createTextMarkupPopup();\n                    this.popupElement.style.display = 'block';\n                    this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n                    // tslint:disable-next-line:max-line-length\n                    this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n                    this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n                    var clientPosition = this.popupElement.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n                    var canvasPosition = pageDiv.getBoundingClientRect();\n                    var topPosition = ((event.clientY) - canvasPosition.top) + parseFloat(pageDiv.style.top);\n                    var leftPosition = (event.clientX);\n                    if ((leftPosition + clientPosition.width) > (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                        this.popupElement.style.left = (leftPosition - clientPosition.width) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.left = leftPosition + 'px';\n                    }\n                    if ((topPosition + clientPosition.height) > (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                        this.popupElement.style.top = (topPosition - clientPosition.height) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.top = topPosition + 'px';\n                    }\n                    this.isPopupNoteVisible = true;\n                }\n            }\n        }\n    };\n    Annotation.prototype.getProperDate = function (date) {\n        var dateObject = new Date(date.toString());\n        if (isNaN(dateObject.getFullYear())) {\n            var dateString = date.slice(2, 16);\n            // tslint:disable-next-line:max-line-length\n            dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n            dateObject = new Date(dateString);\n        }\n        // tslint:disable-next-line:max-line-length\n        return (dateObject.getMonth() + 1) + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.getEventPageNumber = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line:max-line-length\n        var pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1];\n        // tslint:disable-next-line\n        return parseInt(pageString);\n    };\n    /**\n     * private\n     */\n    Annotation.prototype.clear = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.destroy = function () {\n        this.textMarkupAnnotationModule.clear();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.getModuleName = function () {\n        return 'Annotation';\n    };\n    return Annotation;\n}());\nexport { Annotation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined && linkPage[i] > 0) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                if (scrollValue !== undefined) {\n                    aTag.name = scrollValue.toString();\n                    aTag.onclick = function () {\n                        // tslint:disable-next-line:radix\n                        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                        return false;\n                    };\n                }\n                var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n                pageDiv.appendChild(aTag);\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n            if (pageDiv) {\n                var pageChildNodes = pageDiv.childNodes;\n                for (var i = 0; i < pageChildNodes.length; i++) {\n                    var childElement = pageChildNodes[i];\n                    if (childElement.tagName === 'A') {\n                        if (isAdd) {\n                            childElement.classList.add('e-pv-onselection');\n                        }\n                        else {\n                            childElement.classList.remove('e-pv-onselection');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * The `TextMarkupAnnotation` module is used to handle text markup annotation actions of PDF viewer.\n * @hidden\n */\nvar TextMarkupAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextMarkupAnnotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.currentTextMarkupAddMode = '';\n        /**\n         * @private\n         */\n        this.selectTextMarkupCurrentPage = null;\n        /**\n         * @private\n         */\n        this.currentTextMarkupAnnotation = null;\n        this.currentAnnotationIndex = null;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.highlightColor = pdfViewer.highlightSettings.color;\n        this.underlineColor = pdfViewer.underlineSettings.color;\n        this.strikethroughColor = pdfViewer.strikethroughSettings.color;\n        this.highlightOpacity = pdfViewer.highlightSettings.opacity;\n        this.underlineOpacity = pdfViewer.underlineSettings.opacity;\n        this.strikethroughOpacity = pdfViewer.strikethroughSettings.opacity;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        // tslint:disable-next-line:max-line-length\n        var annotationCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber, className: 'e-pv-annotation-canvas' });\n        annotationCanvas.width = pageWidth;\n        annotationCanvas.height = pageHeight;\n        annotationCanvas.style.display = displayMode;\n        pageDiv.appendChild(annotationCanvas);\n        return annotationCanvas;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotationsInPage = function (textMarkupAnnotations, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        this.renderTextMarkupAnnotations(textMarkupAnnotations, pageNumber, canvas, this.pdfViewerBase.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotations = function (textMarkupAnnotations, pageNumber, canvas, factor) {\n        if (canvas) {\n            canvas.width = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].width, factor);\n            canvas.height = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].height, factor);\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            // tslint:disable-next-line\n            var annotations = this.getAnnotations(pageNumber, textMarkupAnnotations);\n            if (annotations) {\n                for (var i = 0; i < annotations.length; i++) {\n                    // tslint:disable-next-line\n                    var annotation = annotations[i];\n                    var annotationObject = null;\n                    if (annotation.TextMarkupAnnotationType) {\n                        // tslint:disable-next-line:max-line-length\n                        annotationObject = { textMarkupAnnotationType: annotation.TextMarkupAnnotationType, color: annotation.Color, opacity: annotation.Opacity, bounds: annotation.Bounds, author: annotation.Author, subject: annotation.Subject, modifiedDate: annotation.ModifiedDate, note: annotation.Note, rect: annotation.Rect };\n                        this.storeAnnotations(pageNumber, annotationObject);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var type = annotation.TextMarkupAnnotationType ? annotation.TextMarkupAnnotationType : annotation.textMarkupAnnotationType;\n                    // tslint:disable-next-line\n                    var annotBounds = annotation.Bounds ? annotation.Bounds : annotation.bounds;\n                    var opacity = annotation.Opacity ? annotation.Opacity : annotation.opacity;\n                    var color = annotation.Color ? annotation.Color : annotation.color;\n                    switch (type) {\n                        case 'Highlight':\n                            this.renderHighlightAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Strikethrough':\n                            this.renderStrikeoutAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Underline':\n                            this.renderUnderlineAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                    }\n                }\n            }\n            if (pageNumber === this.selectTextMarkupCurrentPage) {\n                this.maintainAnnotationSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.drawTextMarkupAnnotations = function (type) {\n        this.isTextMarkupAnnotationMode = true;\n        this.currentTextMarkupAddMode = type;\n        var selectionObject = this.pdfViewer.textSelectionModule.selectionRangeArray;\n        if (selectionObject.length > 0) {\n            this.convertSelectionToTextMarkup(type, selectionObject, this.pdfViewerBase.getZoomFactor());\n        }\n        if (window.getSelection().toString()) {\n            var pageBounds = this.getDrawnBounds();\n            if (pageBounds.length > 0) {\n                for (var i = 0; i < pageBounds.length; i++) {\n                    // tslint:disable-next-line:max-line-length\n                    this.drawTextMarkups(type, pageBounds[i].bounds, pageBounds[i].pageIndex, pageBounds[i].rect, this.pdfViewerBase.getZoomFactor());\n                }\n            }\n        }\n        // this.pdfViewerBase.annotationHelper.redoCollection = [];\n        this.pdfViewer.textSelectionModule.clearTextSelection();\n    };\n    TextMarkupAnnotation.prototype.convertSelectionToTextMarkup = function (type, selectionObject, factor) {\n        for (var i = 0; i < selectionObject.length; i++) {\n            this.drawTextMarkups(type, selectionObject[i].rectangleBounds, selectionObject[i].pageNumber, selectionObject[i].bound, factor);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.drawTextMarkups = function (type, bounds, pageNumber, rect, factor) {\n        var annotation = null;\n        var context = this.getPageContext(pageNumber);\n        if (context) {\n            context.setLineDash([]);\n            switch (type) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.highlightColor, this.highlightOpacity, bounds, this.pdfViewer.highlightSettings.author, this.pdfViewer.highlightSettings.subject, this.pdfViewer.highlightSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderHighlightAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.strikethroughColor, this.strikethroughOpacity, bounds, this.pdfViewer.strikethroughSettings.author, this.pdfViewer.strikethroughSettings.subject, this.pdfViewer.strikethroughSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderStrikeoutAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.underlineColor, this.underlineOpacity, bounds, this.pdfViewer.underlineSettings.author, this.pdfViewer.underlineSettings.subject, this.pdfViewer.underlineSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderUnderlineAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n            }\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line\n            var settings = { opacity: annotation.opacity, color: annotation.color, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate };\n            var index = this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length - 1].index;\n            this.pdfViewer.fireAnnotationAdd(pageNumber, index, type, annotation.rect, settings);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderHighlightAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = bounds[i];\n            context.beginPath();\n            var x = bound.X ? bound.X : bound.left;\n            var y = bound.Y ? bound.Y : bound.top;\n            var width = bound.Width ? bound.Width : bound.width;\n            var height = bound.Height ? bound.Height : bound.height;\n            // tslint:disable-next-line:max-line-length\n            context.rect((x * factor), (y * factor), (width * factor), (height * factor));\n            context.globalAlpha = opacity * 0.5;\n            context.closePath();\n            context.fillStyle = color;\n            context.msFillRule = 'nonzero';\n            context.fill();\n        }\n        context.save();\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderStrikeoutAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, bound.x, bound.y, bound.width, (bound.height / 2), color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderUnderlineAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var boundValues = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, boundValues.x, boundValues.y, boundValues.width, boundValues.height, color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getProperBounds = function (bound) {\n        var x = bound.X ? bound.X : bound.left;\n        var y = bound.Y ? bound.Y : bound.top;\n        var width = bound.Width ? bound.Width : bound.width;\n        var height = bound.Height ? bound.Height : bound.height;\n        return { x: x, y: y, width: width, height: height };\n    };\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.drawLine = function (opacity, x, y, width, height, color, factor, context) {\n        context.globalAlpha = opacity;\n        context.beginPath();\n        context.moveTo((x * factor), (y + height) * factor);\n        context.lineTo((width + x) * factor, (y + height) * factor);\n        context.lineWidth = 1;\n        context.strokeStyle = color;\n        context.closePath();\n        context.msFillRule = 'nonzero';\n        context.stroke();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.printTextMarkupAnnotations = function (textMarkupAnnotations, pageIndex) {\n        var canvas = createElement('canvas', { id: this.pdfViewer.element.id + '_print_annotation_layer_' + pageIndex });\n        // tslint:disable-next-line\n        var annotations = this.getAnnotations(pageIndex, null);\n        if (annotations) {\n            this.renderTextMarkupAnnotations(null, pageIndex, canvas, 1);\n        }\n        else {\n            this.renderTextMarkupAnnotations(textMarkupAnnotations, pageIndex, canvas, 1);\n        }\n        var imageSource = canvas.toDataURL();\n        return imageSource;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveTextMarkupAnnotations = function () {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        // tslint:disable-next-line\n        var annotations = new Array();\n        var colorpick = new ColorPicker();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        // tslint:disable-next-line:max-line-length\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds));\n                        var colorString = colorpick.getValue(pageAnnotationObject.annotations[z].color, 'rgba');\n                        pageAnnotationObject.annotations[z].color = JSON.stringify(this.getRgbCode(colorString));\n                        pageAnnotationObject.annotations[z].rect = JSON.stringify(pageAnnotationObject.annotations[z].rect);\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.deleteTextMarkupAnnotation = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n            var deletedAnnotation = null;\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    deletedAnnotation = pageAnnotations.splice(i, 1)[0];\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, deletedAnnotation, 'Text Markup Deleted', null);\n                    this.currentAnnotationIndex = i;\n                }\n            }\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.currentTextMarkupAnnotation = null;\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, deletedAnnotation.textMarkupAnnotationType);\n            this.currentAnnotationIndex = null;\n            this.selectTextMarkupCurrentPage = null;\n            if (Browser.isDevice) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyColorProperty = function (color) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Color', color, null);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, true, false);\n            this.currentAnnotationIndex = null;\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyOpacityProperty = function (args) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Opacity', args.value / 100, args.name);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            if (args.name === 'changed') {\n                this.pdfViewerBase.isDocumentEdited = true;\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, false, true);\n                this.currentAnnotationIndex = null;\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.modifyAnnotationProperty = function (property, value, status) {\n        var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                if (property === 'Color') {\n                    pageAnnotations[i].color = value;\n                }\n                else if (property === 'Opacity') {\n                    pageAnnotations[i].opacity = value;\n                }\n                var date = new Date();\n                pageAnnotations[i].modifiedDate = date.toLocaleString();\n                this.currentAnnotationIndex = i;\n                if (status === null || status === 'changed') {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, this.currentTextMarkupAnnotation, 'Text Markup Property modified', property);\n                }\n                this.currentTextMarkupAnnotation = pageAnnotations[i];\n            }\n        }\n        return pageAnnotations;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.undoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.splice(index, 1);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 0, annotation);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.undoRedoPropertyChange = function (annotation, pageNumber, index, property) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (property === 'Color') {\n                var tempColor = pageAnnotations[index].color;\n                pageAnnotations[index].color = annotation.color;\n                annotation.color = tempColor;\n            }\n            else {\n                var tempOpacity = pageAnnotations[index].opacity;\n                pageAnnotations[index].opacity = annotation.opacity;\n                annotation.opacity = tempOpacity;\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        return annotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.redoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.push(annotation);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 1);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveNoteContent = function (pageNumber, note) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    pageAnnotations[i].note = note;\n                }\n            }\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.pdfViewerBase.isDocumentEdited = true;\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotation = function () {\n        this.selectTextMarkupCurrentPage = null;\n        this.currentTextMarkupAnnotation = null;\n        this.enableAnnotationPropertiesTool(false);\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotationSelection = function (pageNumber) {\n        var lowerPageIndex = (pageNumber - 2) >= 0 ? (pageNumber - 2) : 0;\n        // tslint:disable-next-line:max-line-length\n        var higherPageIndex = (pageNumber + 2) < this.pdfViewerBase.pageCount ? (pageNumber + 2) : this.pdfViewerBase.pageCount - 1;\n        for (var k = lowerPageIndex; k <= higherPageIndex; k++) {\n            this.clearAnnotationSelection(k);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getBoundsForSave = function (bounds) {\n        // tslint:disable-next-line\n        var newArray = [];\n        for (var i = 0; i < bounds.length; i++) {\n            var left = bounds[i].left ? bounds[i].left : bounds[i].Left;\n            var top_1 = bounds[i].top ? bounds[i].top : bounds[i].Top;\n            var height = bounds[i].height ? bounds[i].height : bounds[i].Height;\n            var width = bounds[i].width ? bounds[i].width : bounds[i].Width;\n            newArray.push({ left: left, top: top_1, width: width, height: height });\n        }\n        return newArray;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getRgbCode = function (colorString) {\n        var stringArray = colorString.split(',');\n        // tslint:disable-next-line:radix\n        var r = parseInt(stringArray[0].split('(')[1]);\n        // tslint:disable-next-line:radix\n        var g = parseInt(stringArray[1]);\n        // tslint:disable-next-line:radix\n        var b = parseInt(stringArray[2]);\n        return { r: r, g: g, b: b };\n    };\n    TextMarkupAnnotation.prototype.getDrawnBounds = function () {\n        var pageBounds = [];\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var range = document.createRange();\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode === selection.focusNode) {\n                var pageId = this.pdfViewerBase.textLayer.getPageIndex(selection.anchorNode);\n                if (!isNaN(pageId)) {\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + pageId).getBoundingClientRect();\n                    if (isBackWardSelection) {\n                        range.setStart(selection.focusNode, selection.focusOffset);\n                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                    }\n                    else {\n                        if (selection.anchorOffset < selection.focusOffset) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            range.setStart(selection.focusNode, selection.focusOffset);\n                            range.setEnd(selection.anchorNode, selection.anchorOffset);\n                        }\n                    }\n                    var boundingRect = range.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                    var rectangleArray = [];\n                    rectangleArray.push(rectangle);\n                    // tslint:disable-next-line\n                    var rect = { left: rectangle.left, top: rectangle.top, right: rectangle.right, bottom: rectangle.bottom };\n                    pageBounds.push({ pageIndex: pageId, bounds: rectangleArray, rect: rect });\n                }\n            }\n            else {\n                var startNode = void 0;\n                var endNode = void 0;\n                var selectionStartOffset = void 0;\n                var selectionEndOffset = void 0;\n                if (isBackWardSelection) {\n                    startNode = selection.focusNode;\n                    selectionStartOffset = selection.focusOffset;\n                    endNode = selection.anchorNode;\n                    selectionEndOffset = selection.anchorOffset;\n                }\n                else {\n                    startNode = selection.anchorNode;\n                    selectionStartOffset = selection.anchorOffset;\n                    endNode = selection.focusNode;\n                    selectionEndOffset = selection.focusOffset;\n                }\n                var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(startNode);\n                var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(startNode, anchorPageId);\n                var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(endNode);\n                var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(endNode, focusPageId);\n                var startOffset = 0;\n                var endOffset = 0;\n                var currentId = 0;\n                for (var i = anchorPageId; i <= focusPageId; i++) {\n                    var selectionRects = [];\n                    var pageStartId = void 0;\n                    var pageEndId = void 0;\n                    var pageStartOffset = void 0;\n                    var pageEndOffset = void 0;\n                    var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + i).getBoundingClientRect();\n                    if (i === anchorPageId) {\n                        currentId = anchorTextId;\n                    }\n                    else {\n                        currentId = 0;\n                    }\n                    for (var j = currentId; j < textDivs.length; j++) {\n                        var textElement = textDivs[j];\n                        if (j === currentId) {\n                            pageStartId = currentId;\n                            pageStartOffset = (i === anchorPageId) ? selectionStartOffset : 0;\n                        }\n                        else {\n                            pageEndId = j;\n                            pageEndOffset = (i === focusPageId) ? selectionEndOffset : textElement.textContent.length;\n                        }\n                        if (j === anchorTextId && i === anchorPageId) {\n                            startOffset = selectionStartOffset;\n                        }\n                        else {\n                            startOffset = 0;\n                        }\n                        if (j === focusTextId && i === focusPageId) {\n                            endOffset = selectionEndOffset;\n                        }\n                        else {\n                            endOffset = textElement.textContent.length;\n                        }\n                        for (var k = 0; k < textElement.childNodes.length; k++) {\n                            var node = textElement.childNodes[k];\n                            range.setStart(node, startOffset);\n                            range.setEnd(node, endOffset);\n                        }\n                        var boundingRect = range.getBoundingClientRect();\n                        // tslint:disable-next-line:max-line-length\n                        var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                        selectionRects.push(rectangle);\n                        range.detach();\n                        if (i === focusPageId && j === focusTextId) {\n                            break;\n                        }\n                    }\n                    var startElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageStartId).childNodes[0];\n                    var endElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageEndId).childNodes[0];\n                    var pageRange = document.createRange();\n                    pageRange.setStart(startElementNode, pageStartOffset);\n                    pageRange.setEnd(endElementNode, pageEndOffset);\n                    var pageRectBounds = pageRange.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageRectangle = { left: this.getDefaultValue(pageRectBounds.left - pageRect.left), top: this.getDefaultValue(pageRectBounds.top - pageRect.top), width: this.getDefaultValue(pageRectBounds.width), height: this.getDefaultValue(pageRectBounds.height), right: this.getDefaultValue(pageRectBounds.right - pageRect.left), bottom: this.getDefaultValue(pageRectBounds.bottom - pageRect.top) };\n                    // tslint:disable-next-line\n                    var rect = { left: pageRectangle.left, top: pageRectangle.top, right: pageRectangle.right, bottom: pageRectangle.bottom };\n                    pageBounds.push({ pageIndex: i, bounds: selectionRects, rect: rect });\n                }\n            }\n        }\n        selection.removeAllRanges();\n        return pageBounds;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotationsPinch = function (pageNumber) {\n        var annotCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (annotCanvas) {\n            var oldAnnotCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n            if (oldAnnotCanvas) {\n                if (annotCanvas) {\n                    oldAnnotCanvas.id = annotCanvas.id;\n                    annotCanvas.parentElement.removeChild(annotCanvas);\n                }\n                else {\n                    oldAnnotCanvas.id = this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber;\n                }\n                annotCanvas = oldAnnotCanvas;\n            }\n            annotCanvas.style.width = '';\n            annotCanvas.style.height = '';\n            annotCanvas.width = this.pdfViewerBase.pageSize[pageNumber].width * this.pdfViewerBase.getZoomFactor();\n            annotCanvas.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor();\n            this.renderTextMarkupAnnotations(null, pageNumber, annotCanvas, this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotations = function (pageNumber) {\n        var oldCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n        if (oldCanvas) {\n            oldCanvas.parentElement.removeChild(oldCanvas);\n        }\n        var newCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (newCanvas) {\n            newCanvas.style.display = 'block';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            canvas.style.width = width + 'px';\n            canvas.style.height = height + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseUp = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageNumber, canvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, canvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n                if (this.pdfViewer.toolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                }\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else {\n            if (!this.pdfViewerBase.isClickedOnScrollBar(event)) {\n                this.clearCurrentAnnotation();\n                this.clearCurrentAnnotationSelection(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationTouchEnd = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            this.clearCurrentAnnotationSelection(pageNumber);\n            var touchCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            // tslint:disable-next-line:max-line-length\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.touches[0].clientX, event.touches[0].clientY, pageNumber, touchCanvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, touchCanvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else if (this.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n            var number = this.selectTextMarkupCurrentPage;\n            this.selectTextMarkupCurrentPage = null;\n            this.clearAnnotationSelection(number);\n        }\n        else {\n            this.clearCurrentAnnotation();\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseMove = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line\n        var pageIndex = parseInt(eventTarget.id.split('_text_')[1]) || parseInt(eventTarget.id.split('_textLayer_')[1]) || parseInt(eventTarget.id.split('_annotationCanvas_')[1]);\n        if (pageIndex) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageIndex, canvas);\n            if (currentAnnot) {\n                eventTarget.style.cursor = 'pointer';\n                // this.showPopupNote(event, currentAnnot);\n            }\n            else {\n                this.pdfViewer.annotationModule.hidePopupNote();\n                if (this.pdfViewerBase.isPanMode && !this.pdfViewerBase.getAnnotationToolStatus()) {\n                    eventTarget.style.cursor = 'grab';\n                }\n                else {\n                    eventTarget.style.cursor = 'auto';\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.showPopupNote = function (event, annotation) {\n        if (annotation.note) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.showPopupNote(event, annotation.color, annotation.author, annotation.note, annotation.textMarkupAnnotationType);\n        }\n    };\n    TextMarkupAnnotation.prototype.getCurrentMarkupAnnotation = function (clientX, clientY, pageNumber, canvas) {\n        var currentTextMarkupAnnotations = [];\n        var canvasParentPosition = canvas.parentElement.getBoundingClientRect();\n        var leftClickPosition = clientX - canvasParentPosition.left;\n        var topClickPosition = clientY - canvasParentPosition.top;\n        var annotationList = this.getAnnotations(pageNumber, null);\n        var isAnnotationGot = false;\n        if (annotationList) {\n            for (var i = 0; i < annotationList.length; i++) {\n                var annotation = annotationList[i];\n                for (var j = 0; j < annotation.bounds.length; j++) {\n                    // tslint:disable-next-line\n                    var bound = annotation.bounds[j];\n                    var left = bound.left ? bound.left : bound.Left;\n                    var top_2 = bound.top ? bound.top : bound.Top;\n                    var width = bound.width ? bound.width : bound.Width;\n                    var height = bound.height ? bound.height : bound.Height;\n                    // tslint:disable-next-line:max-line-length\n                    if (leftClickPosition >= this.getMagnifiedValue(left, this.pdfViewerBase.getZoomFactor()) && leftClickPosition <= this.getMagnifiedValue(left + width, this.pdfViewerBase.getZoomFactor()) && topClickPosition >= this.getMagnifiedValue(top_2, this.pdfViewerBase.getZoomFactor()) && topClickPosition <= this.getMagnifiedValue(top_2 + height, this.pdfViewerBase.getZoomFactor())) {\n                        currentTextMarkupAnnotations.push(annotation);\n                        isAnnotationGot = true;\n                    }\n                    else {\n                        if (isAnnotationGot) {\n                            isAnnotationGot = false;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        var currentAnnot = null;\n        if (currentTextMarkupAnnotations.length > 1) {\n            currentAnnot = this.compareCurrentAnnotations(currentTextMarkupAnnotations);\n        }\n        else if (currentTextMarkupAnnotations.length === 1) {\n            currentAnnot = currentTextMarkupAnnotations[0];\n        }\n        return currentAnnot;\n    };\n    TextMarkupAnnotation.prototype.compareCurrentAnnotations = function (annotations) {\n        var previousX;\n        var currentAnnotation = null;\n        for (var i = 0; i < annotations.length; i++) {\n            if (i === annotations.length - 1) {\n                break;\n            }\n            // tslint:disable-next-line\n            var firstAnnotBounds = annotations[i].bounds;\n            var firstXposition = firstAnnotBounds[0].left ? firstAnnotBounds[0].left : firstAnnotBounds[0].Left;\n            var firstYposition = firstAnnotBounds[0].top ? firstAnnotBounds[0].top : firstAnnotBounds[0].Top;\n            // tslint:disable-next-line\n            var secondAnnotBounds = annotations[i + 1].bounds;\n            var secondXposition = secondAnnotBounds[0].left ? secondAnnotBounds[0].left : secondAnnotBounds[0].Left;\n            var secondYposition = secondAnnotBounds[0].top ? secondAnnotBounds[0].top : secondAnnotBounds[0].Top;\n            if ((firstXposition < secondXposition) || (firstYposition < secondYposition)) {\n                previousX = secondXposition;\n                currentAnnotation = annotations[i + 1];\n            }\n            else {\n                previousX = firstXposition;\n                currentAnnotation = annotations[i];\n            }\n            if (previousX && (i === (annotations.length - 2))) {\n                if ((previousX === firstXposition) && (previousX === secondXposition)) {\n                    previousX = secondXposition;\n                    currentAnnotation = annotations[i + 1];\n                }\n            }\n        }\n        return currentAnnotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clearAnnotationSelection = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        }\n    };\n    TextMarkupAnnotation.prototype.selectAnnotation = function (annotation, canvas) {\n        for (var i = 0; i < annotation.bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = annotation.bounds[i];\n            var x = bound.left ? bound.left : bound.Left;\n            var y = bound.top ? bound.top : bound.Top;\n            var width = bound.width ? bound.width : bound.Width;\n            var height = bound.height ? bound.height : bound.Height;\n            // tslint:disable-next-line:max-line-length\n            this.drawAnnotationSelectRect(canvas, this.getMagnifiedValue(x - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(y - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(width + 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(height + 0.5, this.pdfViewerBase.getZoomFactor()));\n        }\n    };\n    TextMarkupAnnotation.prototype.drawAnnotationSelectRect = function (canvas, x, y, width, height) {\n        var context = canvas.getContext('2d');\n        context.beginPath();\n        context.setLineDash([4 * this.pdfViewerBase.getZoomFactor()]);\n        context.globalAlpha = 1;\n        context.rect(x, y, width, height);\n        context.closePath();\n        context.strokeStyle = '#0000ff';\n        context.stroke();\n        context.save();\n    };\n    TextMarkupAnnotation.prototype.enableAnnotationPropertiesTool = function (isEnable) {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(isEnable);\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(isEnable);\n                var enable = isEnable;\n                if (this.isTextMarkupAnnotationMode) {\n                    enable = true;\n                }\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(enable);\n                if (this.currentTextMarkupAnnotation) {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, this.currentTextMarkupAnnotation.color);\n                }\n                else {\n                    if (!this.isTextMarkupAnnotationMode) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, '#000000');\n                    }\n                    else {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.maintainAnnotationSelection = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + this.selectTextMarkupCurrentPage);\n            if (canvas) {\n                this.selectAnnotation(this.currentTextMarkupAnnotation, canvas);\n            }\n        }\n    };\n    TextMarkupAnnotation.prototype.storeAnnotations = function (pageNumber, annotation) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        var index = 0;\n        if (!storeObject) {\n            var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n            markupAnnotation.annotations.push(annotation);\n            index = markupAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(markupAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        else {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var pageIndex = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        return index;\n    };\n    TextMarkupAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var index = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAnnotations = function (pageIndex, textMarkupAnnotations) {\n        // tslint:disable-next-line\n        var annotationCollection;\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = textMarkupAnnotations;\n            }\n        }\n        else {\n            annotationCollection = textMarkupAnnotations;\n        }\n        return annotationCollection;\n    };\n    TextMarkupAnnotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n        var index = null;\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].pageIndex === pageNumber) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAddedAnnotation = function (type, color, opacity, bounds, author, subject, predefinedDate, note, rect, pageNumber) {\n        var date = new Date();\n        // tslint:disable-next-line:max-line-length\n        var modifiedDate = predefinedDate ? predefinedDate : date.toLocaleString();\n        // tslint:disable-next-line\n        var annotation = { textMarkupAnnotationType: type, color: color, opacity: opacity, bounds: bounds, author: author, subject: subject, modifiedDate: modifiedDate, note: note, rect: rect };\n        var storedIndex = this.storeAnnotations(pageNumber, annotation);\n        this.pdfViewer.annotationModule.addAction(pageNumber, storedIndex, annotation, 'Text Markup Added', null);\n        return annotation;\n    };\n    TextMarkupAnnotation.prototype.getPageContext = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        var context = null;\n        if (canvas) {\n            context = canvas.getContext('2d');\n        }\n        return context;\n    };\n    TextMarkupAnnotation.prototype.getDefaultValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    TextMarkupAnnotation.prototype.getMagnifiedValue = function (value, factor) {\n        return value * factor;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clear = function () {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n    };\n    return TextMarkupAnnotation;\n}());\nexport { TextMarkupAnnotation };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { Toast } from '@syncfusion/ej2-notifications';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isTooltipCreated = false;\n        this.isThumbnail = false;\n        /**\n         * @private\n         */\n        this.isNavigationToolbarVisible = false;\n        /**\n         * @private\n         */\n        this.isBookmarkListOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        /**\n         * @private\n         */\n        this.isBookmarkOpen = false;\n        /**\n         * @private\n         */\n        this.isThumbnailOpen = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY,\n                proxy.sideBarResizer.offsetParent.clientWidth\n            ];\n            _this.previousX = event.clientX;\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            if (!_this.pdfViewerBase.getPopupNoteVisibleStatus()) {\n                event.preventDefault();\n                if (proxy.isDown && _this.sideBarContentContainer) {\n                    // prevent the sidebar from becoming too narrow, or from occupying more\n                    // than half of the available viewer width.\n                    if (_this.pdfViewer.enableRtl) {\n                        var currentWidth = _this.previousX - event.clientX;\n                        var width = currentWidth + proxy.offset[2];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.right = width + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    else {\n                        var width = event.clientX + proxy.offset[0];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.left = width + 'px';\n                        proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                    proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                    proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.pdfViewerBase.updateZoomValue();\n                    if (!proxy.bookmarkButton.children[0].classList.contains('e-pv-bookmark-disable-icon')) {\n                        proxy.pdfViewer.bookmarkViewModule.setBookmarkContentHeight();\n                    }\n                }\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            _this.sideBarContent.setAttribute('aria-label', 'Thumbnail View Panel');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        /**\n         * @private\n         */\n        this.openThumbnailPane = function () {\n            var proxy = _this;\n            var sideBarContent = document.getElementById(_this.pdfViewer.element.id + '_sideBarContent');\n            var sideBarContentContainer = document.getElementById(_this.pdfViewer.element.id + '_sideBarContentContainer');\n            var viewerContainer = document.getElementById(_this.pdfViewer.element.id + '_viewerContainer');\n            var pageContainer = document.getElementById(_this.pdfViewer.element.id + '_pageViewContainer');\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'block';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarResizer').style.display = 'none';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarTitleContainer').style.display = 'none';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarContentSplitter').style.display = 'none';\n            sideBarContent.classList.add('e-thumbnail');\n            sideBarContentContainer.classList.add('e-thumbnail');\n            if (sideBarContentContainer) {\n                if (proxy.isThumbnail) {\n                    sideBarContentContainer.style.display = 'none';\n                    viewerContainer.style.width = proxy.pdfViewer.element.clientWidth + 'px';\n                    pageContainer.style.width = viewerContainer.clientWidth + 'px';\n                    viewerContainer.style.left = sideBarContentContainer.clientWidth + 'px';\n                    proxy.pdfViewerBase.updateZoomValue();\n                    proxy.isThumbnail = false;\n                }\n                else {\n                    sideBarContent.focus();\n                    sideBarContentContainer.style.display = 'block';\n                    // tslint:disable-next-line:max-line-length\n                    viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - sideBarContentContainer.clientWidth) + 'px';\n                    pageContainer.style.width = viewerContainer.clientWidth + 'px';\n                    viewerContainer.style.left = (sideBarContentContainer.clientWidth) + 'px';\n                    proxy.pdfViewerBase.updateZoomValue();\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.isThumbnail = true;\n                }\n            }\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.sideBarContent.setAttribute('aria-label', 'Bookmark View Panel');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        if (!Browser.isDevice) {\n            this.createNavigationPane();\n        }\n    };\n    NavigationPane.prototype.createNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar', attrs: { 'role': 'toolbar', 'aria-orientation': 'vertical', 'tabindex': '-1' } });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbar.style.cssFloat = 'right';\n            this.sideBarToolbar.style.right = 1 + 'px';\n            this.sideBarToolbar.style.position = 'relative';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbarSplitter.classList.add('e-right');\n        }\n        else {\n            this.sideBarToolbarSplitter.classList.add('e-left');\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentContainer.classList.add('e-right');\n        }\n        else {\n            this.sideBarContentContainer.classList.add('e-left');\n        }\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentSplitter.style.right = 0 + 'px';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content', attrs: { 'tabindex': '0' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContent.style.right = 0 + 'px';\n            this.sideBarContent.style.direction = 'rtl';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitleContainer.style.right = 0 + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title', attrs: { 'tabindex': '-1' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitle.classList.add('e-right');\n        }\n        else {\n            this.sideBarTitle.classList.add('e-left');\n        }\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarResizer.classList.add('e-right');\n        }\n        else {\n            this.sideBarResizer.classList.add('e-left');\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        if (!this.pdfViewer.enableRtl) {\n            this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        }\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.adjustPane = function () {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        if (toolbarHeight === 0) {\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(toolbarContainer)['height']) + 1;\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar.style.top = toolbarHeight + 'px';\n        this.sideBarContentContainer.style.top = toolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + 'px';\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createNavigationPaneMobile = function (option) {\n        var _this = this;\n        this.isNavigationToolbarVisible = true;\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_navigationToolbar', className: 'e-pv-nav-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n        var items;\n        if (option === 'search') {\n            var searchTemplate = '<div class=\"e-input-group e-pv-search-input-mobile\" id=\"' + this.pdfViewer.element.id +\n                '_search_input_container\"><input class=\"e-input\" type=\"text\" placeholder=\"' +\n                this.pdfViewer.localeObj.getConstant('Find in document') + '\" id=\"' +\n                this.pdfViewer.element.id + '_search_input\"></input></div>';\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { template: searchTemplate },\n                {\n                    prefixIcon: 'e-pv-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_search_box-icon',\n                    click: function () {\n                        var iconElement = _this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n                        if (iconElement.classList.contains('e-pv-search-close')) {\n                            _this.enableSearchItems(false);\n                        }\n                        _this.pdfViewer.textSearchModule.searchButtonClick(iconElement, _this.searchInput);\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-prev-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_prev_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchPrevious();\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-next-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_next_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchNext();\n                    }\n                }\n            ];\n        }\n        else {\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { text: this.pdfViewer.localeObj.getConstant('Bookmarks') }\n            ];\n        }\n        this.toolbar = new Tool({ items: items, width: '', height: '', overflowMode: 'Popup' });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        if (option === 'search') {\n            this.initiateSearchBox();\n        }\n        else {\n            this.initiateBookmarks();\n        }\n    };\n    NavigationPane.prototype.initiateSearchBox = function () {\n        var _this = this;\n        this.searchInput = this.pdfViewerBase.getElement('_search_input');\n        this.pdfViewer.textSearchModule.searchBtn = this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n        this.searchInput.addEventListener('keyup', function (event) {\n            _this.enableSearchItems(true);\n            var searchString = _this.searchInput.value;\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n            }\n            else {\n                _this.pdfViewer.textSearchModule.resetVariables();\n            }\n        });\n        this.pdfViewer.textSearchModule.searchInput = this.searchInput;\n        this.setSearchInputWidth();\n        this.enableSearchItems(false);\n        this.searchInput.focus();\n    };\n    NavigationPane.prototype.enableSearchItems = function (isEnable) {\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_prev_occurrence').parentElement, isEnable);\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_next_occurrence').parentElement, isEnable);\n    };\n    NavigationPane.prototype.initiateBookmarks = function () {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = 'none';\n        }\n        // tslint:disable-next-line:max-line-length\n        var bookmarkContainer = createElement('div', { id: this.pdfViewer.element.id + '_bookmarks_container', className: 'e-pv-bookmark-container' });\n        bookmarkContainer.style.width = '100%';\n        bookmarkContainer.style.height = this.pdfViewerBase.viewerContainer.style.height;\n        this.pdfViewerBase.getElement('_viewerMainContainer').appendChild(bookmarkContainer);\n        this.pdfViewerBase.viewerContainer.style.display = 'none';\n        this.isBookmarkListOpen = true;\n        this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile();\n    };\n    NavigationPane.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        this.pdfViewer.textSearchModule.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.goBackToToolbar = function () {\n        this.isNavigationToolbarVisible = false;\n        this.pdfViewer.textSearchModule.cancelTextSearch();\n        this.searchInput = null;\n        if (this.pdfViewer.bookmarkViewModule.childNavigateCount !== 0) {\n            this.pdfViewer.bookmarkViewModule.bookmarkList.back();\n            this.pdfViewer.bookmarkViewModule.childNavigateCount--;\n        }\n        else {\n            if (this.toolbar != null) {\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n            var bookmarkContainer = this.pdfViewerBase.getElement('_bookmarks_container');\n            if (bookmarkContainer) {\n                bookmarkContainer.parentElement.removeChild(bookmarkContainer);\n                if (Browser.isDevice) {\n                    this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n                }\n            }\n            if (this.toolbarElement && this.toolbarElement.parentElement != null) {\n                this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n            }\n            this.pdfViewerBase.viewerContainer.style.display = 'block';\n            this.isBookmarkListOpen = false;\n            if (!this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled) {\n                this.pdfViewer.toolbarModule.showToolbar(true);\n                this.pdfViewerBase.onWindowResize();\n            }\n        }\n    };\n    NavigationPane.prototype.setSearchInputWidth = function () {\n        var searchInputParent = this.searchInput.parentElement;\n        var padding = window.getComputedStyle(searchInputParent.parentElement, null).getPropertyValue('padding-left');\n        // tslint:disable-next-line:max-line-length\n        var width = this.toolbarElement.clientWidth - this.getParentElementSearchBox('_backward').clientWidth\n            - this.getParentElementSearchBox('_search_box-icon').clientWidth - this.getParentElementSearchBox('_prev_occurrence').clientWidth\n            - this.getParentElementSearchBox('_next_occurrence').clientWidth - 6;\n        if (padding !== '') {\n            width = width - (parseFloat(padding) * 2);\n        }\n        searchInputParent.style.width = width + 'px';\n    };\n    NavigationPane.prototype.getParentElementSearchBox = function (idString) {\n        return this.pdfViewerBase.getElement(idString).parentElement;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createTooltipMobile = function (text) {\n        if (!this.isTooltipCreated) { //boolean to prevent again toast creation.\n            // tslint:disable-next-line:max-line-length\n            var tooltipDiv = createElement('div', { className: 'e-pv-container-tooltip', id: this.pdfViewer.element.id + '_container_tooltip' });\n            this.pdfViewer.element.appendChild(tooltipDiv);\n            // tslint:disable-next-line:max-line-length\n            this.toastObject = new Toast({ title: text, target: this.pdfViewer.element, close: this.onTooltipClose.bind(this), position: { X: 0, Y: 0 }, animation: { hide: { duration: 200, effect: 'FadeOut' } } });\n            this.toastObject.appendTo(tooltipDiv);\n            var y = this.pdfViewer.element.clientHeight * 0.65;\n            var x = (this.pdfViewer.element.clientWidth - tooltipDiv.clientWidth) / 2;\n            this.isTooltipCreated = true;\n            this.toastObject.show({ position: { X: x, Y: y } });\n            var tooltipChild = tooltipDiv.firstElementChild;\n            if (tooltipChild) {\n                tooltipChild.style.width = 'auto';\n            }\n        }\n        else {\n            if (this.toastObject) {\n                this.toastObject.title = text;\n                var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n                var tooltipChild = tooltipElement.firstElementChild;\n                if (tooltipChild) {\n                    tooltipChild.style.width = 'auto';\n                    tooltipChild.firstElementChild.firstElementChild.textContent = text;\n                }\n            }\n        }\n    };\n    NavigationPane.prototype.onTooltipClose = function (args) {\n        this.isTooltipCreated = false;\n        var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n        this.pdfViewer.textSearchModule.isMessagePopupOpened = false;\n        this.toastObject.destroy();\n        tooltipElement.parentElement.removeChild(tooltipElement);\n        this.toastObject = null;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.toolbarResize = function () {\n        if (this.searchInput) {\n            this.searchInput.style.width = 'auto';\n            this.setSearchInputWidth();\n        }\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled', 'aria-label': 'Page Thumbnails', 'tabindex': '-1' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled', 'aria-label': 'Bookmarks', 'tabindex': '-1' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        if (this.pdfViewer.enableRtl) {\n            this.closeDiv.style.left = 8 + 'px';\n        }\n        else {\n            this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        this.resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        this.setResizeIconTop();\n        this.resizeIcon.style.position = 'absolute';\n        this.resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        this.resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(this.resizeIcon);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.setResizeIconTop = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.sideBarToolbar && this.sideBarToolbar.clientHeight && this.resizeIcon.style.top === '') {\n            this.resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        }\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                proxy.pdfViewerBase.viewerContainer.style.right = (proxy.sideToolbarWidth) + 'px';\n            }\n            else {\n                proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            }\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            if (this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                this.pdfViewerBase.viewerContainer.style.left = 1 + 'px';\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            }\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.isDocumentEdited = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        /**\n         * @private\n         */\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.previousTime = 0;\n        this.currentTime = 0;\n        this.isTouchScrolled = false;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        /**\n         * @private\n         */\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        this.scrollX = 0;\n        this.scrollY = 0;\n        this.ispageMoved = false;\n        this.isThumb = false;\n        this.isTapHidden = false;\n        // tslint:disable-next-line\n        this.singleTapTimer = null;\n        this.tapCount = 0;\n        /**\n         * @private\n         */\n        this.isInitialLoaded = false;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            if (_this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                var toolbarHeight = proxy.getElement('_toolbarContainer').getBoundingClientRect().height;\n                if (proxy.isAnnotationToolbarHidden() || Browser.isDevice) {\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight);\n                }\n                else {\n                    var annotationToolbarHeight = proxy.getElement('_annotation_toolbar').getBoundingClientRect().height;\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n                }\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            if (proxy.pdfViewer.bookmarkViewModule && Browser.isDevice) {\n                var bookmarkContainer = proxy.getElement('_bookmarks_container');\n                if (bookmarkContainer) {\n                    bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n                }\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule && !Browser.isDevice) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            if (!proxy.navigationPane.isBookmarkListOpen) {\n                proxy.updateZoomValue();\n            }\n            if (Browser.isDevice) {\n                proxy.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width)) + 'px';\n                proxy.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(proxy.mobilePageNoContainer.style.width) / 2) + 'px';\n                proxy.mobilePageNoContainer.style.top = (proxy.pdfViewer.element.clientHeight / 2) + 'px';\n                proxy.updateMobileScrollerPosition();\n            }\n            else {\n                proxy.navigationPane.setResizeIconTop();\n            }\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0 && !_this.getPopupNoteVisibleStatus()) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (_this.isViewerMouseDown) {\n                    if (_this.scrollHoldTimer) {\n                        clearTimeout(_this.scrollHoldTimer);\n                        _this.scrollHoldTimer = null;\n                    }\n                    if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                        _this.pageViewScrollChanged(_this.currentPageNumber);\n                    }\n                }\n                if (event.button === 0) {\n                    // 0 is for left button.\n                    var eventTarget = event.target;\n                    if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                        var idStringArray = eventTarget.id.split('_');\n                        // tslint:disable-next-line\n                        _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                    }\n                    if (_this.isTextMarkupAnnotationModule()) {\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n                _this.isViewerMouseDown = false;\n            }\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    case 90: //z key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.undo();\n                        }\n                        break;\n                    case 89: //y key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.redo();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else {\n                switch (event.keyCode) {\n                    case 46:\n                        if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                            _this.pdfViewer.annotationModule.deleteAnnotation();\n                        }\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                            _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                        }\n                        else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n                            // tslint:disable-next-line:max-line-length\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                        }\n                    }\n                }\n                else if (_this.getCurrentTextMarkupAnnotation()) {\n                    // this.pdfViewer.annotationModule.showAnnotationPopup(event);\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        // tslint:disable-next-line\n        this.onWindowMouseUp = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (event.button === 0) {\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                        }\n                        if (_this.viewerContainer.contains(event.target)) {\n                            if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                            else {\n                                if (window.getSelection().anchorNode !== null) {\n                                    _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                                }\n                            }\n                        }\n                    }\n                    else if (_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                    }\n                }\n                else if (event.button === 2) {\n                    if (_this.viewerContainer.contains(event.target)) {\n                        window.getSelection().removeAllRanges();\n                    }\n                }\n                if (_this.isViewerMouseDown) {\n                    _this.isViewerMouseDown = false;\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.clear();\n                        _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                    }\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                _this.preventTouchEvent(event);\n            }\n            if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            _this.scrollY = touchPoints[0].clientY;\n            _this.previousTime = new Date().getTime();\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (Browser.isDevice && _this.pageCount > 0 && !_this.isThumb && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                    _this.handleTaps(touchPoints);\n                }\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n                if (Browser.isDevice) {\n                    clearTimeout(_this.singleTapTimer);\n                    _this.tapCount = 0;\n                }\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            if (Browser.isDevice) {\n                clearTimeout(_this.singleTapTimer);\n                _this.tapCount = 0;\n            }\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.isTouchScrolled = true;\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n            if (Browser.isDevice && _this.isTouchScrolled) {\n                _this.currentTime = new Date().getTime();\n                var duration = _this.currentTime - _this.previousTime;\n                // tslint:disable-next-line\n                var difference = _this.scrollY - event.changedTouches[0].pageY;\n                // tslint:disable-next-line\n                var speed = (difference) / (duration);\n                if (Math.abs(speed) > 1.5) {\n                    // tslint:disable-next-line\n                    var scrollTop = (difference) + ((duration) * speed);\n                    _this.viewerContainer.scrollTop += scrollTop;\n                    _this.updateMobileScrollerPosition();\n                }\n            }\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnScroll = function (event) {\n            var proxy = _this;\n            var scrollposX = 0;\n            var scrollposY = 0;\n            if (event.touches && Browser.isDevice) {\n                // tslint:disable-next-line\n                var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n                if (_this.isThumb) {\n                    _this.ispageMoved = true;\n                    _this.mobilePageNoContainer.style.display = 'block';\n                    scrollposX = event.touches[0].pageX - _this.scrollX;\n                    scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n                    _this.viewerContainer.scrollTop = scrollposY * ratio;\n                    // tslint:disable-next-line\n                    var containerValue = event.touches[0].pageY;\n                    if (_this.viewerContainer.scrollTop !== 0 && ((containerValue) <= _this.viewerContainer.clientHeight)) {\n                        _this.mobileScrollerContainer.style.top = containerValue + 'px';\n                    }\n                }\n                else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                    _this.mobilePageNoContainer.style.display = 'none';\n                    scrollposY = _this.touchClientY - event.touches[0].pageY;\n                    scrollposX = _this.touchClientX - event.touches[0].pageX;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + (scrollposY);\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + (scrollposX);\n                    // tslint:disable-next-line\n                    _this.updateMobileScrollerPosition();\n                    _this.touchClientY = event.touches[0].pageY;\n                    _this.touchClientX = event.touches[0].pageX;\n                }\n            }\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            // tslint:disable-next-line:max-line-length\n            if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n                _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.viewerContainer.setAttribute('aria-labelledby', _this.pdfViewer.element.id + '_pageDiv_' + (_this.currentPageNumber - 1));\n                if (!Browser.isDevice) {\n                    _this.pdfViewer.toolbarModule.updateNavigationButtons();\n                }\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            if (Browser.isDevice) {\n                this.pdfViewer.element.classList.add('e-pv-mobile-view');\n            }\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container', attrs: { 'aria-label': 'pdfviewer scroll view' } });\n            if (Browser.isDevice) {\n                this.createMobilePageNumberContainer();\n            }\n            this.viewerContainer.tabIndex = 0;\n            if (this.pdfViewer.enableRtl) {\n                this.viewerContainer.style.direction = 'rtl';\n            }\n            element.style.touchAction = 'pan-x pan-y';\n            this.setMaximumHeight(element);\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = this.pdfViewer.element.clientWidth;\n            if (!Browser.isDevice) {\n                viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0);\n            }\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(this.mobileScrollerContainer.style.width)) + 'px';\n                this.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(this.mobilePageNoContainer.style.width) / 2) + 'px';\n                this.mobilePageNoContainer.style.top = (this.pdfViewer.element.clientHeight / 2) + 'px';\n                this.mobilePageNoContainer.style.display = 'none';\n                this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n                this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n                this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n                this.viewerContainer.appendChild(this.mobilePageNoContainer);\n                this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n                this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container', attrs: { 'tabindex': '0', 'aria-label': 'pdfviewer Page View' } });\n            if (this.pdfViewer.enableRtl) {\n                this.pageContainer.style.direction = 'ltr';\n            }\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            this.createPrintPopup();\n            if (Browser.isDevice) {\n                this.createGoToPagePopup();\n            }\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule && !Browser.isDevice) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.initializeCollection();\n            }\n        }\n    };\n    PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.mobilePageNoContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilepagenoContainer', className: 'e-pv-mobilepagenoscroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilecurrentPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilecurrentpageContainer', className: 'e-pv-mobilecurrentpage-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilenumberContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiledashedlineContainer', className: 'e-pv-mobiledashedline-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobiletotalPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiletotalpageContainer', className: 'e-pv-mobiletotalpage-container' });\n        this.mobileScrollerContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilescrollContainer', className: 'e-pv-mobilescroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobileSpanContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilespanContainer', className: 'e-pv-mobilespanscroll-container' });\n        this.mobileSpanContainer.innerHTML = '1';\n        this.mobilecurrentPageContainer.innerHTML = '1';\n        this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n        this.mobileScrollerContainer.style.cssFloat = 'right';\n        this.mobileScrollerContainer.style.width = '40px';\n        this.mobileScrollerContainer.style.height = '32px';\n        this.mobileScrollerContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.width = '120px';\n        this.mobilePageNoContainer.style.height = '100px';\n        this.mobilePageNoContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.position = 'fixed';\n        this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n        this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n        this.mobileScrollerContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        if (this.pdfViewer.interactionMode === 'Pan') {\n            this.initiatePanning();\n        }\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n        this.ispageMoved = false;\n        this.isThumb = true;\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n                var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n                this.pdfViewer.toolbar.showToolbar(true);\n            }\n        }\n        this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.setMaximumHeight = function (element) {\n        if (!Browser.isDevice) {\n            element.style.minHeight = '500px';\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n        if (!this.ispageMoved) {\n            this.goToPagePopup.show();\n        }\n        this.isThumb = false;\n        this.ispageMoved = false;\n        this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n        this.mobilePageNoContainer.style.display = 'none';\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = '';\n                this.mobileScrollerContainer.style.top = (this.toolbarHeight) + 'px';\n            }\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        if (Browser.isDevice) {\n            this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n            this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            this.promptElement.focus();\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '48px';\n            spinnerElement.style.width = '48px';\n            spinnerElement.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.isInitialLoaded = false;\n        this.initiateTextSelectMode();\n        if (!Browser.isDevice) {\n            if (this.navigationPane.sideBarToolbar) {\n                this.navigationPane.clear();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.clear();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.initializeCollection();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        this.windowSessionStorageClear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        if (Browser.isDevice) {\n            this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n        }\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        this.contextMenuModule.destroy();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            if (this.pdfViewer.ajaxRequestSettings) {\n                if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n                    this.setCustomAjaxHeaders(request_1);\n                }\n            }\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        this.sessionStorage.forEach(function (element) {\n            window.sessionStorage.removeItem(element);\n        });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        if (this.currentPageNumber > 0) {\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n            this.corruptPopup.enableRtl = true;\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n        }\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container'\n        });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container'\n        });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createGoToPagePopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_goTopage_popup', className: 'e-pv-gotopage-popup' });\n        this.goToPageElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n        popupElement.appendChild(this.goToPageElement);\n        var inputContainer = createElement('span', { className: 'e-pv-text-input' });\n        // tslint:disable-next-line:max-line-length\n        this.goToPageInput = createElement('input', { id: this.pdfViewer.element.id + '_page_input', className: 'e-input' });\n        this.goToPageInput.type = 'text';\n        this.goToPageInput.style.maxWidth = '80%';\n        this.pageNoContainer = createElement('span', { className: '.e-pv-number-ofpages' });\n        inputContainer.appendChild(this.goToPageInput);\n        inputContainer.appendChild(this.pageNoContainer);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.goToPagePopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('GoToPage'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') },\n                    click: this.GoToPageCancelClick.bind(this),\n                },\n                // tslint:disable-next-line:max-line-length\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Apply'), disabled: true, cssClass: 'e-pv-gotopage-apply-btn', isPrimary: true },\n                    click: this.GoToPageApplyClick.bind(this),\n                },\n            ], close: this.closeGoToPagePopUp.bind(this),\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.goToPagePopup.enableRtl = true;\n        }\n        this.goToPagePopup.appendTo(popupElement);\n        var goToPageTextBox = new NumericTextBox({ format: '##', showSpinButton: false });\n        goToPageTextBox.appendTo(this.goToPageInput);\n        this.goToPageInput.addEventListener('keyup', function () {\n            // tslint:disable-next-line\n            var inputValue = _this.goToPageInput.value;\n            if (inputValue !== '' && parseFloat(inputValue) > 0 && (_this.pdfViewer.pageCount + 1) > parseFloat(inputValue)) {\n                _this.EnableApplyButton();\n            }\n            else {\n                _this.DisableApplyButton();\n            }\n        });\n    };\n    PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n        this.goToPageInput.value = '';\n        this.DisableApplyButton();\n    };\n    PdfViewerBase.prototype.EnableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.removeAttribute('disabled');\n    };\n    PdfViewerBase.prototype.DisableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.setAttribute('disabled', true);\n    };\n    PdfViewerBase.prototype.GoToPageCancelClick = function () {\n        this.goToPagePopup.hide();\n    };\n    PdfViewerBase.prototype.GoToPageApplyClick = function () {\n        this.goToPagePopup.hide();\n        // tslint:disable-next-line\n        var pageNumber = this.goToPageInput.value;\n        this.pdfViewer.navigation.goToPage(pageNumber);\n        this.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n            // tslint:disable-next-line\n            var differenceRatio = (this.viewerContainer.scrollTop) / ratio;\n            this.mobileScrollerContainer.style.top = (this.toolbarHeight + differenceRatio) + 'px';\n        }\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup', attrs: { 'tabindex': '-1' } });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt', attrs: { 'tabindex': '-1' } });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false,\n            close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (!Browser.isDevice) {\n            this.passwordPopup.buttons = [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ];\n        }\n        else {\n            this.passwordPopup.buttons = [\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) },\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                }\n            ];\n        }\n        if (this.pdfViewer.enableRtl) {\n            this.passwordPopup.enableRtl = true;\n        }\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n        this.enableAnnotationAddTools(false);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n        if (!Browser.isDevice) {\n            this.enableAnnotationAddTools(true);\n        }\n    };\n    PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n            }\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.handleTaps = function (touchPoints) {\n        var _this = this;\n        this.singleTapTimer = setTimeout(function () { _this.onSingleTap(touchPoints); }, 300);\n        this.tapCount++;\n        // tslint:disable-next-line\n        var timer = setTimeout(function () { _this.onDoubleTap(touchPoints); }, 200);\n        if (this.tapCount > 2) {\n            this.tapCount = 0;\n        }\n    };\n    PdfViewerBase.prototype.onSingleTap = function (touches) {\n        if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible) {\n            if (this.pdfViewer.toolbarModule) {\n                if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                    (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                    if (!this.isTapHidden) {\n                        this.viewerContainer.scrollTop -= this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                        if (this.pdfViewer.toolbar.moreDropDown) {\n                            var dropDown = this.getElement('_more_option-popup');\n                            if (dropDown.firstElementChild) {\n                                dropDown.classList.remove('e-popup-open');\n                                dropDown.classList.add('e-popup-close');\n                                dropDown.removeChild(dropDown.firstElementChild);\n                            }\n                        }\n                    }\n                    else {\n                        this.viewerContainer.scrollTop += this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        // tslint:disable-next-line:max-line-length\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n                    }\n                    if (this.isTapHidden && Browser.isDevice) {\n                        this.mobileScrollerContainer.style.display = '';\n                        this.updateMobileScrollerPosition();\n                    }\n                    else if (Browser.isDevice && this.getSelectTextMarkupCurrentPage() == null) {\n                        this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    if (this.getSelectTextMarkupCurrentPage() == null) {\n                        this.pdfViewer.toolbarModule.showToolbar(this.isTapHidden);\n                        this.isTapHidden = !this.isTapHidden;\n                    }\n                }\n                this.tapCount = 0;\n            }\n        }\n    };\n    PdfViewerBase.prototype.onDoubleTap = function (touches) {\n        if (this.tapCount === 2) {\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            this.tapCount = 0;\n            if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                if (this.pdfViewer.magnification) {\n                    this.pdfViewer.magnification.onDoubleTapMagnification();\n                }\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                this.isTapHidden = false;\n                clearTimeout(this.singleTapTimer);\n            }\n        }\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n            if (Browser.isDevice && this.mobiletotalPageContainer) {\n                this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n                this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n            }\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * window.devicePixelRatio;\n                                canvas_1.width = pageWidth_1 * window.devicePixelRatio;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                _this.isInitialLoaded = true;\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.isTextMarkupAnnotationModule()) {\n                    // tslint:disable-next-line\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(data['textMarkupAnnotation'], pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        // tslint:disable-next-line\n        var rotation = data['rotation'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (!textLayer) {\n            // tslint:disable-next-line:max-line-length\n            textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n        }\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div', attrs: { 'tabindex': '0' } });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        if (this.pdfViewer.enableRtl) {\n            pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        else {\n            pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = displayMode;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n        }\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                if (!this.pdfViewer.enableRtl) {\n                    pageDiv.style.left = leftPosition + 'px';\n                }\n                else {\n                    pageDiv.style.right = leftPosition + 'px';\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        blobUrl = URL.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n            jsonObject = { hashId: this.hashId, textMarkupAnnotations: textMarkupAnnotationCollection };\n        }\n        else {\n            jsonObject = { hashId: this.hashId };\n        }\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                        window.navigator.msSaveOrOpenBlob(blobUrl, _this.pdfViewer.fileName);\n                    }\n                    else {\n                        _this.downloadDocument(blobUrl);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        this.showPageLoadingIndicator(pageIndex, true);\n        if (this.getPagesZoomed()) {\n            if (this.isInitialLoaded) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                if (this.isInitialLoaded) {\n                    this.showPageLoadingIndicator(pageIndex, false);\n                }\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        if (this_1.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n                            this_1.setCustomAjaxHeaders(request);\n                        }\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        var blobUrl = URL.createObjectURL(blobObj);\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText'], rotation: data['rotation']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.setCustomAjaxHeaders = function (request) {\n        for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n        this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        // tslint:disable-next-line\n        var blob = new Blob(byteArrays, { type: contentType });\n        return blob;\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n        if (this.pdfViewer.toolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.isPopupNoteVisible;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        }\n        else {\n            return null;\n        }\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var textLayer;\n        if (!textDiv) {\n            textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n        return textLayer;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text', attrs: { 'tabindex': '0' } });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation) {\n        var scaleString = 'scale(' + scale + ')';\n        if (rotation === 0) {\n            if (textRotation === 0) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 1) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n            }\n            else if (textRotation === -90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 2) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n            }\n            else if (textRotation === 180) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 3) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n            }\n            else if (textRotation === 90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        // tslint:disable-next-line\n        var rotation;\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n            // tslint:disable-next-line\n            rotation = data['rotation'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds, rotation);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getPageIndex = function (element) {\n        var pageId;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(element.id.split('_text_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(parentElement.id.split('_text_')[1]);\n        }\n        return pageId;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n        var textIndex;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        return textIndex;\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.notifyDialog.enableRtl = true;\n        }\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy'), iconCss: 'e-pv-copy-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Highlight context'), iconCss: 'e-pv-highlight-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Underline context'), iconCss: 'e-pv-underline-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Strikethrough context'), iconCss: 'e-pv-strikethrough-icon' }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            created: this.contextMenuOnCreated.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.contextMenuObj.enableRtl = true;\n        }\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnCreated = function (args) {\n        // tslint:disable-next-line:max-line-length\n        var items = [this.pdfViewer.localeObj.getConstant('Highlight context'), this.pdfViewer.localeObj.getConstant('Underline context'),\n            this.pdfViewer.localeObj.getConstant('Strikethrough context')];\n        if (this.pdfViewer.annotationModule) {\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                this.contextMenuObj.enableItems(items, false);\n            }\n        }\n        else {\n            this.contextMenuObj.enableItems(items, false);\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    // tslint:disable-next-line:max-line-length\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if ((Browser.isIE || Browser.info.name === 'edge') && args.event.target.classList.contains('e-pv-page-container')) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            var currentBound = bounds;\n            if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                isWithin = true;\n            }\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n            isWithin = true;\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case this.pdfViewer.localeObj.getConstant('Copy'):\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Highlight context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Underline context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    ContextMenu.prototype.destroy = function () {\n        this.contextMenuObj.destroy();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { Browser } from '@syncfusion/ej2-base';\n/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        this.isTapToFitZoom = false;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            // tslint:disable-next-line:radix\n            return parseInt((scaleX * 100).toString());\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            // tslint:disable-next-line:radix\n            return parseInt(((viewerHeight / highestHeight) * 100).toString());\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.closePopupMenu();\n        }\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    if (Browser.isDevice) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewerBase.mobilePageNoContainer.style.left = (this.pdfViewer.element.clientWidth / 2) - (parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width) / 2) + 'px';\n                    }\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n        if (Browser.isDevice && this.isPinchZoomed) {\n            // tslint:disable-next-line:radix\n            var zoomPercentage = parseInt((this.zoomFactor * 100).toString()) + '%';\n            this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        if (this.pdfViewerBase.isInitialLoaded) {\n            this.renderInSeparateThread(this.reRenderPageNumber);\n            this.isPagesZoomed = false;\n        }\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            this.calculateScrollValues(scrollValue);\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.calculateScrollValues = function (scrollValue) {\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n        if (currentPageCanvas) {\n            var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n            // update scroll top for the viewer container based on pinch zoom factor\n            var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n            var previousY = scrollValue + this.touchCenterY;\n            // tslint:disable-next-line:max-line-length\n            var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                // tslint:disable-next-line:max-line-length\n                previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n            this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n            // update scroll left for the viewer container based on pinch zoom factor\n            var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n            var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n            var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n            this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n        }\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                var annotationLayers = document.querySelectorAll('canvas[id*=\"_annotationCanvas_\"]');\n                for (var j = 0; j < annotationLayers.length; j++) {\n                    var pageNumber = annotationLayers[j].id.split('_annotationCanvas_')[1];\n                    // tslint:disable-next-line:radix\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                    var annotationCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + i);\n                    annotationCanvas.id = this.pdfViewer.element.id + '_old_annotationCanvas_' + i;\n                }\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i, 'none');\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        if (this.pdfViewer.enableRtl) {\n                            pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        else {\n                            pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                                this.pdfViewer.annotationModule.textMarkupAnnotationModule.resizeAnnotations(width, height, i);\n                            }\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            this.isMagnified = false;\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.onDoubleTapMagnification = function () {\n        this.pdfViewer.toolbarModule.showToolbar(false);\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (!this.isTapToFitZoom) {\n            if (this.zoomFactor < 2) {\n                this.zoomTo(200);\n            }\n            else {\n                this.fitToWidth();\n            }\n        }\n        else {\n            this.zoomTo(this.previousZoomFactor * 100);\n        }\n        this.calculateScrollValues(scrollValue);\n        this.isTapToFitZoom = !this.isTapToFitZoom;\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber - Defines the page number to navigate\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @public\n     */\n    ThumbnailView.prototype.openThumbnailPane = function () {\n        this.pdfViewerBase.navigationPane.openThumbnailPane();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        var _this = this;\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.pdfViewerBase.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.renderThumbnailImage(data);\n                if (!proxy.isThumbnailCompleted) {\n                    proxy.startIndex = proxy.thumbnailLimit;\n                    proxy.isThumbnailCompleted = true;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                // tslint:disable-next-line:max-line-length\n                var pageLink = createElement('a', { id: 'page_' + i, attrs: { 'aria-label': 'Thumbnail of Page' + (i + 1), 'tabindex': '-1', 'role': 'link' } });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane) {\n            if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n                this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n            }\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.resetThumbnailView();\n        }\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { AnnotationToolbar } from '../index';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.isUndoRedoBtnsVisible = true;\n        this.isAnnotationEditBtnVisible = true;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                    args.cancel = true;\n                }\n                else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                    var tooltipData = args.originalEvent.target.parentElement.dataset;\n                    if (tooltipData && tooltipData.tooltipId) {\n                        var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                        if (tooltipElement) {\n                            tooltipElement.style.display = 'none';\n                        }\n                    }\n                }\n            }\n            _this.handleToolbarButtonClick(args);\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                    args.originalEvent.target.blur();\n                    _this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        if (!Browser.isDevice) {\n            this.applyToolbarSettings();\n            this.initialEnableItems();\n            this.pdfViewerBase.navigationPane.adjustPane();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.annotationToolbarModule = new AnnotationToolbar(this.pdfViewer, this.pdfViewerBase, this);\n            if (!Browser.isDevice) {\n                this.annotationToolbarModule.initializeAnnotationToolbar();\n            }\n        }\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n            if (Browser.isDevice) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n            }\n        }\n        else {\n            toolbar.style.display = 'none';\n        }\n    };\n    /**\n     * Shows/hides the Navigation toolbar in the PdfViewer\n     * @param  {boolean} enableNavigationToolbar - If set true , its show the Navigation Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showNavigationToolbar = function (enableNavigationToolbar) {\n        if (!Browser.isDevice) {\n            var navigationToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n            var navigationToolbarSplitter = this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;\n            if (enableNavigationToolbar) {\n                navigationToolbar.style.display = 'block';\n                navigationToolbarSplitter.style.display = 'block';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.clear();\n                }\n            }\n            else {\n                navigationToolbar.style.display = 'none';\n                navigationToolbarSplitter.style.display = 'none';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n                }\n            }\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isVisible - If set true, then its show the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n                case 'UndoRedoTool':\n                    this.showUndoRedoTool(isVisible);\n                    break;\n                case 'AnnotationEditTool':\n                    this.showAnnotationEditTool(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.applyHideToToolbar(true, 15, 15);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isEnable - If set true, then its Enable the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n                case 'UndoRedoTool':\n                    this.enableUndoRedoTool(isEnable);\n                    break;\n                case 'AnnotationEditTool':\n                    this.enableAnnotationEditTool(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 21, 21);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 20, 20);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 18, 18);\n    };\n    Toolbar.prototype.showUndoRedoTool = function (isEnable) {\n        this.isUndoRedoBtnsVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 16, 17);\n    };\n    Toolbar.prototype.showAnnotationEditTool = function (isEnable) {\n        this.isAnnotationEditBtnVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 19, 19);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    Toolbar.prototype.enableUndoRedoTool = function (isEnable) {\n        this.toolbar.enableItems(this.undoItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.redoItem.parentElement, isEnable);\n    };\n    Toolbar.prototype.enableAnnotationEditTool = function (isEnable) {\n        this.toolbar.enableItems(this.annotationItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        if (!Browser.isDevice) {\n            this.currentPageBox.min = 0;\n            this.currentPageBox.value = 0;\n            this.updateTotalPage();\n            this.updateToolbarItems();\n            if (this.annotationToolbarModule) {\n                this.annotationToolbarModule.clear();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, false);\n                this.toolbar.enableItems(this.printItem.parentElement, false);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = true;\n                }\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n                this.toolbar.enableItems(this.annotationItem.parentElement, false);\n                this.toolbar.enableItems(this.panItem.parentElement, false);\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.deSelectItem(this.annotationItem);\n                if (this.annotationToolbarModule) {\n                    this.annotationToolbarModule.resetToolbar();\n                }\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, true);\n                this.toolbar.enableItems(this.printItem.parentElement, true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.updateZoomButtons();\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = false;\n                }\n                this.updateInteractionItems();\n                // modify this condition if new annotation types are added.\n                if (this.pdfViewer.annotationModule && this.pdfViewer.enableAnnotation) {\n                    this.toolbar.enableItems(this.annotationItem.parentElement, true);\n                }\n                if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                    this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                }\n            }\n            if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.length === 0 || !this.pdfViewer.annotationModule) {\n                this.enableToolbarItem(['AnnotationEditTool'], false);\n            }\n        }\n        else {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, true);\n                this.updateUndoRedoButtons();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled && !Browser.isDevice) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateUndoRedoButtons = function () {\n        if (this.pdfViewer.annotationModule) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection, this.undoItem.parentElement);\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection, this.redoItem.parentElement);\n            }\n            else {\n                this.disableUndoRedoButtons();\n            }\n        }\n        else {\n            this.disableUndoRedoButtons();\n        }\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.enableCollectionAvailable = function (collection, item) {\n        if (collection.length > 0) {\n            this.toolbar.enableItems(item, true);\n        }\n        else {\n            this.toolbar.enableItems(item, false);\n        }\n    };\n    Toolbar.prototype.disableUndoRedoButtons = function () {\n        this.toolbar.enableItems(this.undoItem.parentElement, false);\n        this.toolbar.enableItems(this.redoItem.parentElement, false);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        if (this.moreDropDown) {\n            this.moreDropDown.destroy();\n        }\n        if (this.annotationToolbarModule) {\n            this.annotationToolbarModule.destroy();\n        }\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (!Browser.isDevice) {\n            if (this.currentPageBox.value === pageIndex) {\n                this.currentPageBoxElement.value = pageIndex.toString();\n            }\n            this.currentPageBox.value = pageIndex;\n        }\n        else {\n            this.pdfViewerBase.mobileSpanContainer.innerHTML = pageIndex.toString();\n            this.pdfViewerBase.mobilecurrentPageContainer.innerHTML = pageIndex.toString();\n        }\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.currentPageBox.min = 1;\n            }\n            this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        if (!Browser.isDevice) {\n            this.toolbar = new tool({\n                clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup',\n                items: this.createToolbarItems(), created: function () {\n                    _this.createZoomDropdown();\n                    _this.createNumericTextBox();\n                    _this.toolbar.refreshOverflow();\n                }\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.toolbar.appendTo(this.toolbarElement);\n            this.afterToolbarCreation();\n            this.updateTotalPage();\n            this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        }\n        else {\n            this.createToolbarItemsForMobile();\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.disableUndoRedoButtons();\n        }\n        return this.toolbarElement;\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.createToolbarItems = function () {\n        var currentPageInputTemplate = this.createCurrentPageInputTemplate();\n        var totalPageTemplate = this.createTotalPageTemplate();\n        var zoomDropDownTemplateString = this.createZoomDropdownElement();\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-open-document-icon e-pv-icon', cssClass: 'e-pv-open-document-container', id: this.pdfViewer.element.id + '_open', text: this.pdfViewer.localeObj.getConstant('Open text'), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n        }\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-zoom-out-icon e-pv-icon', cssClass: 'e-pv-zoom-out-container', id: this.pdfViewer.element.id + '_zoomOut', text: this.pdfViewer.localeObj.getConstant('Zoom out text'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-zoom-in-icon e-pv-icon', cssClass: 'e-pv-zoom-in-container', id: this.pdfViewer.element.id + '_zoomIn', text: this.pdfViewer.localeObj.getConstant('Zoom in text'), align: 'Left' });\n        items.push({ template: zoomDropDownTemplateString, cssClass: 'e-pv-zoom-drop-down-container', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-select-tool-icon e-pv-icon', cssClass: 'e-pv-text-select-tool-container', id: this.pdfViewer.element.id + '_selectTool', text: this.pdfViewer.localeObj.getConstant('Selection text') });\n        items.push({ prefixIcon: 'e-pv-pan-tool-icon e-pv-icon', cssClass: 'e-pv-pan-tool-container', id: this.pdfViewer.element.id + '_handTool', text: this.pdfViewer.localeObj.getConstant('Pan text') });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-undo-icon e-pv-icon', cssClass: 'e-pv-undo-container', id: this.pdfViewer.element.id + '_undo', text: this.pdfViewer.localeObj.getConstant('Undo'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-redo-icon e-pv-icon', cssClass: 'e-pv-redo-container', id: this.pdfViewer.element.id + '_redo', text: this.pdfViewer.localeObj.getConstant('Redo'), align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-search-icon e-pv-icon', cssClass: 'e-pv-text-search-container', id: this.pdfViewer.element.id + '_search', text: this.pdfViewer.localeObj.getConstant('Search text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-annotation-icon e-pv-icon', cssClass: 'e-pv-annotation-container', id: this.pdfViewer.element.id + '_annotation', text: this.pdfViewer.localeObj.getConstant('Annotation Edit text'), align: 'Right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-print-document-icon e-pv-icon', cssClass: 'e-pv-print-document-container', id: this.pdfViewer.element.id + '_print', text: this.pdfViewer.localeObj.getConstant('Print text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-download-document-icon e-pv-icon', cssClass: 'e-pv-download-document-container', id: this.pdfViewer.element.id + '_download', text: this.pdfViewer.localeObj.getConstant('Download'), align: 'Right' });\n        return items;\n    };\n    Toolbar.prototype.afterToolbarCreation = function () {\n        this.itemsContainer = this.toolbar.element.childNodes[0];\n        this.itemsContainer.id = this.pdfViewer.element.id + '_toolbarItemsContainer';\n        this.openDocumentItem = this.addClassToolbarItem('_open', 'e-pv-open-document', this.pdfViewer.localeObj.getConstant('Open'));\n        this.undoItem = this.addClassToolbarItem('_undo', 'e-pv-undo', this.pdfViewer.localeObj.getConstant('Undo'));\n        this.redoItem = this.addClassToolbarItem('_redo', 'e-pv-redo', this.pdfViewer.localeObj.getConstant('Redo'));\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        this.zoomOutItem = this.addClassToolbarItem('_zoomOut', 'e-pv-zoom-out', this.pdfViewer.localeObj.getConstant('Zoom Out'));\n        this.zoomInItem = this.addClassToolbarItem('_zoomIn', 'e-pv-zoom-in', this.pdfViewer.localeObj.getConstant('Zoom In'));\n        // tslint:disable-next-line:max-line-length\n        this.textSelectItem = this.addClassToolbarItem('_selectTool', 'e-pv-text-select-tool', this.pdfViewer.localeObj.getConstant('Text Selection'));\n        this.panItem = this.addClassToolbarItem('_handTool', 'e-pv-pan-tool', this.pdfViewer.localeObj.getConstant('Panning'));\n        // tslint:disable-next-line:max-line-length\n        this.textSearchItem = this.addClassToolbarItem('_search', 'e-pv-text-search', this.pdfViewer.localeObj.getConstant('Text Search'));\n        this.annotationItem = this.addClassToolbarItem('_annotation', 'e-pv-annotation', this.pdfViewer.localeObj.getConstant('Annotation'));\n        // tslint:disable-next-line:max-line-length\n        this.printItem = this.addClassToolbarItem('_print', 'e-pv-print-document', this.pdfViewer.localeObj.getConstant('Print'));\n        this.downloadItem = this.addClassToolbarItem('_download', 'e-pv-download-document', this.pdfViewer.localeObj.getConstant('Download file'));\n        this.zoomDropdownItem = this.pdfViewerBase.getElement('_zoomDropDown');\n        this.createTooltip(this.zoomDropdownItem, this.pdfViewer.localeObj.getConstant('Zoom'));\n        this.zoomDropdownItem.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Zoom'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement, null, '_zoomDropDownContainer');\n        this.pdfViewerBase.getElement('_zoomDropDownContainer').style.minWidth = '';\n        this.createTooltip(this.currentPageBoxElement, this.pdfViewer.localeObj.getConstant('Page Number'));\n        this.currentPageBoxElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Page Number'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement, 'e-pv-current-page-container', '_currentPageInputContainer');\n        this.pdfViewerBase.getElement('_currentPageInputContainer').style.minWidth = '20px';\n        this.totalPageItem = this.pdfViewerBase.getElement('_totalPage');\n        this.addPropertiesToolItemContainer(this.totalPageItem.parentElement, 'e-pv-total-page-container', '_totalPageContainer');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.addClassToolbarItem = function (idString, className, tooltipText) {\n        var element = this.pdfViewerBase.getElement(idString);\n        element.classList.add(className);\n        element.classList.add('e-pv-tbar-btn');\n        element.setAttribute('aria-label', tooltipText);\n        element.parentElement.classList.add(className + '-container');\n        element.parentElement.classList.add('e-popup-text');\n        element.parentElement.id = this.pdfViewer.element.id + idString + 'Container';\n        if (element.childNodes.length > 0) {\n            var spanElement = element.childNodes[0];\n            spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n            spanElement.classList.remove('e-icons');\n            spanElement.classList.remove('e-btn-icon');\n            if (this.pdfViewer.enableRtl) {\n                spanElement.classList.add('e-right');\n            }\n            var textElement = element.childNodes[1];\n            if (textElement) {\n                if (textElement.classList.contains('e-tbar-btn-text')) {\n                    textElement.id = this.pdfViewer.element.id + idString + 'Text';\n                }\n            }\n        }\n        element.style.width = '';\n        this.createTooltip(element, tooltipText);\n        return element;\n    };\n    Toolbar.prototype.addPropertiesToolItemContainer = function (element, className, idString) {\n        if (className !== null) {\n            element.classList.add(className);\n        }\n        element.classList.add('e-popup-text');\n        element.id = this.pdfViewer.element.id + idString;\n    };\n    Toolbar.prototype.createZoomDropdownElement = function () {\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', null);\n        return zoomDropdownElement.outerHTML;\n    };\n    Toolbar.prototype.createZoomDropdown = function () {\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.pdfViewerBase.getElement('_zoomDropDown'));\n    };\n    Toolbar.prototype.createCurrentPageInputTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var goToPageElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', null);\n        return goToPageElement.outerHTML;\n    };\n    Toolbar.prototype.createTotalPageTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var totalPageElement = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', 'e-pv-total-page');\n        return totalPageElement.outerHTML;\n    };\n    Toolbar.prototype.createNumericTextBox = function () {\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = this.pdfViewerBase.getElement('_currentPageInput');\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n    };\n    Toolbar.prototype.createToolbarItemsForMobile = function () {\n        this.toolbarElement.classList.add('e-pv-mobile-toolbar');\n        var template = '<button id=\"' + this.pdfViewer.element.id + '_more_option\" class=\"e-tbar-btn\"></button>';\n        this.toolbar = new tool({\n            // tslint:disable-next-line:max-line-length\n            items: [{ prefixIcon: 'e-pv-open-document-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Open'), id: this.pdfViewer.element.id + '_open' },\n                { type: 'Separator', align: 'Left' },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-undo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Undo'), id: this.pdfViewer.element.id + '_undo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-redo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Redo'), id: this.pdfViewer.element.id + '_redo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-text-search-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Text Search'), id: this.pdfViewer.element.id + '_search', align: 'Right' },\n                { template: template, align: 'Right' }\n            ], clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup'\n        });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.openDocumentItem = this.pdfViewerBase.getElement('_open');\n        this.openDocumentItem.classList.add('e-pv-open-document');\n        this.openDocumentItem.firstElementChild.id = this.pdfViewer.element.id + '_openIcon';\n        this.textSearchItem = this.pdfViewerBase.getElement('_search');\n        this.textSearchItem.classList.add('e-pv-text-search');\n        this.textSearchItem.firstElementChild.id = this.pdfViewer.element.id + '_searchIcon';\n        this.undoItem = this.pdfViewerBase.getElement('_undo');\n        this.undoItem.classList.add('e-pv-undo');\n        this.redoItem = this.pdfViewerBase.getElement('_redo');\n        this.redoItem.classList.add('e-pv-redo');\n        this.redoItem.firstElementChild.id = this.pdfViewer.element.id + '_redoIcon';\n        this.undoItem.firstElementChild.id = this.pdfViewer.element.id + '_undoIcon';\n        this.createMoreOption(this.pdfViewer.element.id + '_more_option');\n    };\n    Toolbar.prototype.createMoreOption = function (idString) {\n        var _this = this;\n        this.moreOptionItem = document.getElementById(idString);\n        var items = [\n            {\n                text: this.pdfViewer.localeObj.getConstant('Download'), id: this.pdfViewer.element.id + '_menu_download',\n                iconCss: 'e-icons e-pv-download-document-icon e-pv-icon'\n            },\n            {\n                text: this.pdfViewer.localeObj.getConstant('Bookmarks'), id: this.pdfViewer.element.id + '_menu_bookmarks',\n                iconCss: 'e-icons e-pv-bookmark-icon e-pv-icon'\n            }\n        ];\n        this.moreDropDown = new DropDownButton({\n            items: items, iconCss: 'e-pv-more-icon e-pv-icon', cssClass: 'e-caret-hide',\n            open: function (args) {\n                var dropdownButtonPosition = _this.moreDropDown.element.getBoundingClientRect();\n                // tslint:disable-next-line:max-line-length\n                if (!_this.pdfViewer.enableRtl) {\n                    args.element.parentElement.style.left = dropdownButtonPosition.left + dropdownButtonPosition.width - args.element.parentElement.offsetWidth + 'px';\n                }\n            }, select: function (args) {\n                switch (args.item.id) {\n                    case _this.pdfViewer.element.id + '_menu_download':\n                        _this.pdfViewerBase.download();\n                        break;\n                    case _this.pdfViewer.element.id + '_menu_bookmarks':\n                        _this.showToolbar(false);\n                        _this.pdfViewerBase.navigationPane.createNavigationPaneMobile('bookmarks');\n                        break;\n                    default:\n                        break;\n                }\n            }, beforeItemRender: function (args) {\n                if (args.item.id === _this.pdfViewer.element.id + '_menu_bookmarks') {\n                    if (!_this.pdfViewer.bookmarkViewModule || !_this.pdfViewer.bookmarkViewModule.bookmarks) {\n                        args.element.classList.add('e-disabled');\n                    }\n                    else {\n                        args.element.classList.remove('e-disabled');\n                    }\n                }\n            }, close: function (args) {\n                _this.moreOptionItem.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        });\n        this.moreDropDown.appendTo('#' + idString);\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, className) {\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            toolbarItem.className = className;\n        }\n        if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        return toolbarItem;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.createTooltip = function (toolbarItem, tooltipText) {\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip && this.toolbarElement.contains(args.target)) {\n            args.cancel = true;\n        }\n        if (this.annotationToolbarModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.annotationToolbarSettings.showTooltip && this.annotationToolbarModule.toolbarElement.contains(args.target)) {\n                args.cancel = true;\n            }\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n            this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n            this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n            this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n            this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.navigationPane.toolbarResize();\n        }\n        else {\n            this.toolbar.refreshOverflow();\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.handleToolbarButtonClick = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_open':\n            case this.pdfViewer.element.id + '_openIcon':\n            case this.pdfViewer.element.id + '_openText':\n                this.fileInputElement.click();\n                if (Browser.isDevice) {\n                    args.originalEvent.target.blur();\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n                break;\n            case this.pdfViewer.element.id + '_download':\n            case this.pdfViewer.element.id + '_downloadIcon':\n            case this.pdfViewer.element.id + '_downloadText':\n                this.pdfViewerBase.download();\n                break;\n            case this.pdfViewer.element.id + '_print':\n            case this.pdfViewer.element.id + '_printIcon':\n            case this.pdfViewer.element.id + '_printText':\n                if (this.pdfViewer.printModule) {\n                    this.pdfViewer.printModule.print();\n                }\n                break;\n            case this.pdfViewer.element.id + '_undo':\n            case this.pdfViewer.element.id + '_undoIcon':\n            case this.pdfViewer.element.id + '_undoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.undo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_redo':\n            case this.pdfViewer.element.id + '_redoIcon':\n            case this.pdfViewer.element.id + '_redoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.redo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_firstPage':\n            case this.pdfViewer.element.id + '_firstPageIcon':\n            case this.pdfViewer.element.id + '_firstPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToFirstPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_previousPage':\n            case this.pdfViewer.element.id + '_previousPageIcon':\n            case this.pdfViewer.element.id + '_previousPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToPreviousPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_nextPage':\n            case this.pdfViewer.element.id + '_nextPageIcon':\n            case this.pdfViewer.element.id + '_nextPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToNextPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_lastPage':\n            case this.pdfViewer.element.id + '_lastPageIcon':\n            case this.pdfViewer.element.id + '_lastPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToLastPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_zoomIn':\n            case this.pdfViewer.element.id + '_zoomInIcon':\n            case this.pdfViewer.element.id + '_zoomInText':\n                this.pdfViewer.magnificationModule.zoomIn();\n                break;\n            case this.pdfViewer.element.id + '_zoomOut':\n            case this.pdfViewer.element.id + '_zoomOutIcon':\n            case this.pdfViewer.element.id + '_zoomOutText':\n                this.pdfViewer.magnificationModule.zoomOut();\n                break;\n            case this.pdfViewer.element.id + '_selectTool':\n            case this.pdfViewer.element.id + '_selectToolIcon':\n            case this.pdfViewer.element.id + '_selectToolText':\n                if (!this.isSelectionToolDisabled) {\n                    this.pdfViewerBase.initiateTextSelectMode();\n                    this.updateInteractionTools(true);\n                }\n                break;\n            case this.pdfViewer.element.id + '_handTool':\n            case this.pdfViewer.element.id + '_handToolIcon':\n            case this.pdfViewer.element.id + '_handToolText':\n                if (!this.isScrollingToolDisabled) {\n                    this.pdfViewerBase.initiatePanning();\n                    this.updateInteractionTools(false);\n                }\n                break;\n            case this.pdfViewer.element.id + '_search':\n            case this.pdfViewer.element.id + '_searchIcon':\n            case this.pdfViewer.element.id + '_searchText':\n                this.textSearchButtonHandler();\n                break;\n            case this.pdfViewer.element.id + '_annotation':\n            case this.pdfViewer.element.id + '_annotationIcon':\n            case this.pdfViewer.element.id + '_annotationText':\n                this.initiateAnnotationMode();\n                break;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:radix\n            var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n            if (this.zoomDropDown.text === currentPercent) {\n                this.zoomDropDown.element.value = currentPercent;\n            }\n            if (this.zoomDropDown.index === 9) {\n                this.zoomDropDown.value = 2;\n            }\n            // tslint:disable-next-line\n            this.zoomDropDown.text = currentPercent;\n        }\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n                this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n                this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n                if (this.isTextSearchBoxDisplayed) {\n                    this.selectItem(this.textSearchItem);\n                    // tslint:disable-next-line:max-line-length\n                    var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                    searchInputElement.select();\n                    searchInputElement.focus();\n                }\n                else {\n                    this.deSelectItem(this.textSearchItem);\n                }\n            }\n        }\n        else {\n            this.showToolbar(false);\n            this.pdfViewerBase.navigationPane.createNavigationPaneMobile('search');\n        }\n    };\n    Toolbar.prototype.initiateAnnotationMode = function () {\n        if (this.annotationToolbarModule) {\n            if (this.pdfViewerBase.isPanMode && this.annotationToolbarModule.isToolbarHidden) {\n                this.pdfViewerBase.initiateTextSelectMode();\n            }\n            this.DisableInteractionTools();\n            this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.DisableInteractionTools = function () {\n        this.deSelectItem(this.textSelectItem);\n        this.deSelectItem(this.panItem);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enableNavigationToolbar) {\n            this.showNavigationToolbar(true);\n        }\n        else {\n            this.showNavigationToolbar(false);\n        }\n        if (this.isPrintBtnVisible) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.isDownloadBtnVisible) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.isSearchBtnVisible) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (this.isOpenBtnVisible && toolbarItems.length === 1) ||\n            // tslint:disable-next-line:max-line-length\n            (!this.isNavigationToolVisible && !this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible && !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if (((!this.isNavigationToolVisible && !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) ||\n            (this.isOpenBtnVisible && !this.isNavigationToolVisible) ||\n            // tslint:disable-next-line:max-line-length\n            ((!this.isOpenBtnVisible && !this.isNavigationToolVisible) || (!this.isMagnificationToolVisible && !this.isScrollingBtnVisible && !this.isSelectionBtnVisible))) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible || this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n        if (((!this.isMagnificationToolVisible && !this.isNavigationToolVisible && !this.isScrollingBtnVisible\n            && !this.isSelectionBtnVisible) && this.isUndoRedoBtnsVisible || !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems) {\n            if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n                this.showOpenOption(true);\n            }\n            else {\n                this.showOpenOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n                this.showPageNavigationTool(true);\n            }\n            else {\n                this.showPageNavigationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n                this.showMagnificationTool(true);\n            }\n            else {\n                this.showMagnificationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n                this.showSelectionTool(true);\n            }\n            else {\n                this.showSelectionTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n                this.showScrollingTool(true);\n            }\n            else {\n                this.showScrollingTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n                this.showPrintOption(true);\n            }\n            else {\n                this.showPrintOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n                this.showDownloadOption(true);\n            }\n            else {\n                this.showDownloadOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n                this.showSearchOption(true);\n            }\n            else {\n                this.showSearchOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('UndoRedoTool') !== -1) {\n                this.showUndoRedoTool(true);\n            }\n            else {\n                this.showUndoRedoTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('AnnotationEditTool') !== -1) {\n                this.showAnnotationEditTool(true);\n            }\n            else {\n                this.showAnnotationEditTool(false);\n            }\n            this.showSeparator(toolbarSettingsItems);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */ (function () {\n    function AnnotationToolbar(viewer, viewerBase, toolbar) {\n        this.toolbarBorderHeight = 1;\n        /**\n         * @private\n         */\n        this.isToolbarHidden = false;\n        /**\n         * @private\n         */\n        this.isMobileAnnotEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        this.isHighlightBtnVisible = true;\n        this.isUnderlineBtnVisible = true;\n        this.isStrikethroughBtnVisible = true;\n        this.isColorToolVisible = true;\n        this.isOpacityToolVisible = true;\n        this.isDeleteAnnotationToolVisible = true;\n        this.isCurrentAnnotationOpacitySet = false;\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n        this.primaryToolbar = toolbar;\n    }\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.toolbar = new Tool({\n            width: '', height: '', overflowMode: 'Popup',\n            items: this.createToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n            created: function () {\n                _this.createDropDowns();\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterToolbarCreation();\n        this.showAnnotationToolbar(null);\n        this.applyAnnotationToolbarSettings();\n        this.updateToolbarItems();\n    };\n    AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable) {\n        var _this = this;\n        if (Browser.isDevice) {\n            if (this.toolbarElement == null && isEnable) {\n                this.isMobileAnnotEnabled = true;\n                // tslint:disable-next-line:max-line-length\n                this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n                this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n                this.toolbar = new Tool({\n                    width: '', height: '', overflowMode: 'Popup',\n                    items: this.createMobileToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n                    created: function () {\n                        _this.createDropDowns();\n                    }\n                });\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.pdfViewerBase.navigationPane.goBackToToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(false);\n                this.toolbar.appendTo(this.toolbarElement);\n                this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n                this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n            }\n            else if (this.toolbarElement != null) {\n                if (isEnable) {\n                    this.isMobileAnnotEnabled = true;\n                    this.pdfViewerBase.navigationPane.goBackToToolbar();\n                    this.pdfViewer.toolbarModule.showToolbar(false);\n                    this.toolbarElement.style.display = 'block';\n                }\n                else if (!isEnable) {\n                    this.isMobileAnnotEnabled = false;\n                    this.pdfViewer.toolbarModule.showToolbar(true);\n                    this.hideMobileAnnotationToolbar();\n                }\n            }\n        }\n        else {\n            this.isMobileAnnotEnabled = true;\n        }\n    };\n    AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n        if (this.toolbarElement != null) {\n            this.toolbarElement.style.display = 'none';\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createMobileToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        // tslint:disable-next-line:max-line-length\n        items.push({ template: colorTemplate, align: 'right' });\n        items.push({ template: opacityTemplate, align: 'right' });\n        items.push({ type: 'Separator', align: 'right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.goBackToToolbar = function () {\n        this.isMobileAnnotEnabled = false;\n        this.hideMobileAnnotationToolbar();\n        this.pdfViewer.toolbarModule.showToolbar(true);\n        var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n        if (page) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate, align: 'Left' });\n        items.push({ template: opacityTemplate, align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon', className: 'e-pv-annotation-tools-close-container', id: this.pdfViewer.element.id + '_annotation_close', align: 'Right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n        var element = createElement(elementName, { id: this.pdfViewer.element.id + id });\n        if (className) {\n            element.className = className;\n        }\n        return element.outerHTML;\n    };\n    AnnotationToolbar.prototype.createDropDowns = function () {\n        this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n        this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n        this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n        this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n        this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n        this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n        var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n        this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n        this.opacitySlider.change = this.opacityChange.bind(this);\n        this.opacitySlider.changed = this.opacityChange.bind(this);\n        this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n    };\n    AnnotationToolbar.prototype.opacityDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            var opacityElement = this.pdfViewerBase.getElement('_annotation_opacity-popup');\n            opacityElement.style.left = '0px';\n        }\n    };\n    AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.colorDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n            }\n            else {\n                this.setCurrentColorInPicker();\n            }\n        }\n        this.colorPalette.refresh();\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor }, true);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor }, true);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor }, true);\n                    break;\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    AnnotationToolbar.prototype.colorDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.getElement('_annotation_color-popup').style.left = '0px';\n        }\n        this.colorPalette.refresh();\n    };\n    AnnotationToolbar.prototype.opacityChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n                    this.isCurrentAnnotationOpacitySet = false;\n                }\n                else {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n                }\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = args.value / 100;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = args.value / 100;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = args.value / 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.isCurrentAnnotationOpacitySet = true;\n                // tslint:disable-next-line:max-line-length\n                this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n                        break;\n                    case 'Underline':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n                        break;\n                    case 'Strikethrough':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n        // tslint:disable-next-line:max-line-length\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        return dropDownButton;\n    };\n    AnnotationToolbar.prototype.createColorPicker = function (idString) {\n        var inputElement = createElement('input', { id: idString + '_target' });\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', cssClass: 'e-show-value', enableOpacity: false,\n            change: this.onColorPickerChange.bind(this), value: '#000000', showButtons: false,\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(args.currentValue.hex);\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = args.currentValue.hex;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = args.currentValue.hex;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = args.currentValue.hex;\n                        break;\n                }\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, args.currentValue.hex);\n        this.colorDropDown.toggle();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n        element.childNodes[0].style.borderBottomColor = color;\n    };\n    AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n        this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n    };\n    AnnotationToolbar.prototype.createSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-opacity-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-opacity-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.opacitySlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-opacity-slider', max: 100, min: 0 });\n        // tslint:disable-next-line:max-line-length\n        this.opacityIndicator = createElement('div', { id: idString + '_opacity_indicator', className: 'e-pv-annotation-opacity-indicator' });\n        this.opacityIndicator.textContent = '100%';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(this.opacityIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.opacityIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.enableRtl = true;\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(label);\n        }\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.afterToolbarCreation = function () {\n        // tslint:disable-next-line:max-line-length\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // tslint:disable-next-line:max-line-length\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n        this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n        this.selectAnnotationDeleteItem(false);\n        this.enableAnnotationPropertiesTools(false);\n    };\n    AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_highlight':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.handleHighlight();\n                break;\n            case this.pdfViewer.element.id + '_underline':\n            case this.pdfViewer.element.id + '_underlineIcon':\n                this.handleUnderline();\n                break;\n            case this.pdfViewer.element.id + '_strikethrough':\n            case this.pdfViewer.element.id + '_strikethroughIcon':\n                this.handleStrikethrough();\n                break;\n            case this.pdfViewer.element.id + '_annotation_delete':\n            case this.pdfViewer.element.id + '_annotation_deleteIcon':\n                this.pdfViewer.annotationModule.deleteAnnotation();\n                break;\n            case this.pdfViewer.element.id + '_annotation_close':\n            case this.pdfViewer.element.id + '_annotation_closeIcon':\n                this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.showAnnotationToolbar = function (element) {\n        if (!this.isToolbarHidden) {\n            // tslint:disable-next-line\n            var annotationModule = this.pdfViewer.annotationModule;\n            if (element) {\n                this.adjustViewer(false);\n                this.primaryToolbar.deSelectItem(element);\n            }\n            // tslint:disable-next-line:max-line-length           \n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.enablePropertiesTool(annotationModule);\n            }\n            else {\n                this.deselectAllItems();\n            }\n            this.toolbarElement.style.display = 'none';\n            this.primaryToolbar.updateInteractionTools(true);\n        }\n        else {\n            var toolBarInitialStatus = this.toolbarElement.style.display;\n            this.toolbarElement.style.display = 'block';\n            if (element) {\n                this.primaryToolbar.selectItem(element);\n                if (toolBarInitialStatus === 'none') {\n                    this.primaryToolbar.DisableInteractionTools();\n                    this.adjustViewer(true);\n                }\n            }\n        }\n        // tslint:disable-next-line:max-line-length           \n        if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n            this.pdfViewer.magnification.fitToPage();\n        }\n        if (this.pdfViewerBase.isPanMode) {\n            this.enableAnnotationAddTools(false);\n        }\n        else {\n            this.enableAnnotationAddTools(true);\n        }\n        this.isToolbarHidden = !this.isToolbarHidden;\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(true);\n        // tslint:disable-next-line:max-line-length  \n        this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n        this.selectAnnotationDeleteItem(true);\n    };\n    AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('HighlightTool') !== -1) {\n            this.showHighlightTool(true);\n        }\n        else {\n            this.showHighlightTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('UnderlineTool') !== -1) {\n            this.showUnderlineTool(true);\n        }\n        else {\n            this.showUnderlineTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('StrikethroughTool') !== -1) {\n            this.showStrikethroughTool(true);\n        }\n        else {\n            this.showStrikethroughTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('ColorEditTool') !== -1) {\n            this.showColorEditTool(true);\n        }\n        else {\n            this.showColorEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('OpacityEditTool') !== -1) {\n            this.showOpacityEditTool(true);\n        }\n        else {\n            this.showOpacityEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('AnnotationDeleteTool') !== -1) {\n            this.showAnnotationDeleteTool(true);\n        }\n        else {\n            this.showAnnotationDeleteTool(false);\n        }\n        this.showSeparator();\n    };\n    AnnotationToolbar.prototype.showSeparator = function () {\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)\n            || (!this.isColorToolVisible && !this.isOpacityToolVisible)) {\n            this.applyHideToToolbar(false, 3, 3);\n        }\n        if ((!this.isColorToolVisible && !this.isOpacityToolVisible) && (!this.isHighlightBtnVisible &&\n            !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) || !this.isDeleteAnnotationToolVisible) {\n            this.applyHideToToolbar(false, 6, 6);\n        }\n    };\n    AnnotationToolbar.prototype.showHighlightTool = function (isShow) {\n        this.isHighlightBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 0, 0);\n    };\n    AnnotationToolbar.prototype.showUnderlineTool = function (isShow) {\n        this.isUnderlineBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 1, 1);\n    };\n    AnnotationToolbar.prototype.showStrikethroughTool = function (isShow) {\n        this.isStrikethroughBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 2, 2);\n    };\n    AnnotationToolbar.prototype.showColorEditTool = function (isShow) {\n        this.isColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 4, 4);\n    };\n    AnnotationToolbar.prototype.showOpacityEditTool = function (isShow) {\n        this.isOpacityToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 5, 5);\n    };\n    AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow) {\n        this.isDeleteAnnotationToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 7, 7);\n    };\n    AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n        var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n        if (isAdjust) {\n            if (this.pdfViewer.enableToolbar) {\n                sideBarToolbar.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = (annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (annotationToolbarHeight) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (annotationToolbarHeight)) + 'px';\n            sideBarToolbar.style.height = sideBarToolbar.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n            splitterElement.style.height = splitterElement.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n        }\n        else {\n            if (this.pdfViewer.enableToolbar) {\n                // tslint:disable-next-line:max-line-length\n                sideBarToolbar.style.top = toolbarHeight + 'px';\n                sideBarContentContainer.style.top = toolbarHeight + 'px';\n                splitterElement.style.top = toolbarHeight + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = 1 + 'px';\n                sideBarToolbar.style.height = '100%';\n                sideBarContentContainer.style.top = 1 + 'px';\n                sideBarContentContainer.style.height = '100%';\n                splitterElement.style.top = 1 + 'px';\n                splitterElement.style.height = '100%';\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n            sideBarToolbar.style.height = this.getHeight(sideBarToolbar, annotationToolbarHeight);\n            splitterElement.style.height = this.getHeight(splitterElement, annotationToolbarHeight);\n        }\n        this.updateContentContainerHeight(isAdjust);\n    };\n    AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust) {\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n        if (sideBarClientRect.height !== 0) {\n            if (isAdjust) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n        var toolbarHeight = element.getBoundingClientRect().height;\n        if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n            // getComputedStyle gets the value from style and toolbar border height is added to it.\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n        }\n        return toolbarHeight;\n    };\n    AnnotationToolbar.prototype.getHeight = function (element, toolbarHeight) {\n        var height = element.getBoundingClientRect().height;\n        return (height !== 0) ? height + toolbarHeight + 'px' : '';\n    };\n    AnnotationToolbar.prototype.handleHighlight = function () {\n        if (!this.isHighlightEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n            this.primaryToolbar.selectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            this.isHighlightEnabled = true;\n            this.isUnderlineEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderline = function () {\n        if (!this.isUnderlineEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n            this.primaryToolbar.selectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            this.isUnderlineEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethrough = function () {\n        if (!this.isStrikethroughEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n            this.primaryToolbar.selectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.enableAnnotationPropertiesTools(true);\n            // tslint:disable-next-line:max-line-length\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            this.isStrikethroughEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isUnderlineEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.deselectAllItems = function () {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(false);\n        this.updateColorInIcon(this.colorDropDownElement, '#000000');\n        this.selectAnnotationDeleteItem(false);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable) {\n        this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n        this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n        var isButtonsEnabled = false;\n        if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n            isButtonsEnabled = true;\n        }\n        return isButtonsEnabled;\n    };\n    AnnotationToolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.enableAnnotationAddTools(true);\n        }\n        else {\n            this.enableAnnotationAddTools(false);\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.resetToolbar = function () {\n        this.adjustViewer(false);\n        this.updateToolbarItems();\n        this.toolbarElement.style.display = 'none';\n        this.isToolbarHidden = true;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clear = function () {\n        this.deselectAllItems();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.destroy = function () {\n        this.colorDropDown.destroy();\n        this.opacityDropDown.destroy();\n        this.toolbar.destroy();\n    };\n    AnnotationToolbar.prototype.getElementHeight = function (element) {\n        return element.getBoundingClientRect().height;\n    };\n    AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight - toolbarHeight;\n    };\n    AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight + toolbarHeight;\n    };\n    return AnnotationToolbar;\n}());\nexport { AnnotationToolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `AjaxRequestSettings` module is used to set the ajax Request Headers of PDF viewer.\n */\nvar AjaxRequestSettings = /** @class */ (function (_super) {\n    __extends(AjaxRequestSettings, _super);\n    function AjaxRequestSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], AjaxRequestSettings.prototype, \"ajaxHeaders\", void 0);\n    return AjaxRequestSettings;\n}(ChildProperty));\nexport { AjaxRequestSettings };\n/**\n * The `AnnotationToolbarSettings` module is used to provide the annotation toolbar settings of the PDF viewer.\n */\nvar AnnotationToolbarSettings = /** @class */ (function (_super) {\n    __extends(AnnotationToolbarSettings, _super);\n    function AnnotationToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], AnnotationToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], AnnotationToolbarSettings.prototype, \"annotationToolbarItem\", void 0);\n    return AnnotationToolbarSettings;\n}(ChildProperty));\nexport { AnnotationToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * The `StrikethroughSettings` module is used to provide the properties to Strikethrough annotation.\n */\nvar StrikethroughSettings = /** @class */ (function (_super) {\n    __extends(StrikethroughSettings, _super);\n    function StrikethroughSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], StrikethroughSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ff0000')\n    ], StrikethroughSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], StrikethroughSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('strikethrough')\n    ], StrikethroughSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], StrikethroughSettings.prototype, \"modifiedDate\", void 0);\n    return StrikethroughSettings;\n}(ChildProperty));\nexport { StrikethroughSettings };\n/**\n * The `UnderlineSettings` module is used to provide the properties to Underline annotation.\n */\nvar UnderlineSettings = /** @class */ (function (_super) {\n    __extends(UnderlineSettings, _super);\n    function UnderlineSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], UnderlineSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#00ff00')\n    ], UnderlineSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], UnderlineSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('underline')\n    ], UnderlineSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], UnderlineSettings.prototype, \"modifiedDate\", void 0);\n    return UnderlineSettings;\n}(ChildProperty));\nexport { UnderlineSettings };\n/**\n * The `HighlightSettings` module is used to provide the properties to Highlight annotation.\n */\nvar HighlightSettings = /** @class */ (function (_super) {\n    __extends(HighlightSettings, _super);\n    function HighlightSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], HighlightSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ffff00')\n    ], HighlightSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], HighlightSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('highlight')\n    ], HighlightSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], HighlightSettings.prototype, \"modifiedDate\", void 0);\n    return HighlightSettings;\n}(ChildProperty));\nexport { HighlightSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download file': 'Download file',\n            'Download': 'Download',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            'Apply': 'Apply',\n            'GoToPage': 'Go to Page',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            'No Text Found': 'No Text Found',\n            'Undo': 'Undo',\n            'Redo': 'Redo',\n            'Annotation': 'Add or Edit annotations',\n            'Highlight': 'Highlight Text',\n            'Underline': 'Underline Text',\n            'Strikethrough': 'Strikethrough Text',\n            'Delete': 'Delete annotation',\n            'Opacity': 'Opacity',\n            'Color edit': 'Change Color',\n            'Opacity edit': 'Change Opacity',\n            'Highlight context': 'Highlight',\n            'Underline context': 'Underline',\n            'Strikethrough context': 'Strike through',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.',\n            'Open text': 'Open',\n            'First text': 'First Page',\n            'Previous text': 'Previous Page',\n            'Next text': 'Next Page',\n            'Last text': 'Last Page',\n            'Zoom in text': 'Zoom In',\n            'Zoom out text': 'Zoom Out',\n            'Selection text': 'Selection',\n            'Pan text': 'Pan',\n            'Print text': 'Print',\n            'Search text': 'Search',\n            'Annotation Edit text': 'Edit Annotation'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"isDocumentEdited\", {\n        /**\n         * Checks whether the PDF document is edited.\n         */\n        get: function () {\n            return this.viewerBase.isDocumentEdited;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"thumbnailView\", {\n        /**\n         * Gets the thumbnail-view object of the pdf viewer.\n         * @returns { ThumbnailView }\n         */\n        get: function () {\n            return this.thumbnailViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"annotation\", {\n        /**\n         * Gets the annotation object of the pdf viewer.\n         * @returns { Annotation }\n         */\n        get: function () {\n            return this.annotationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar || this.enableNavigationToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableAnnotation) {\n            modules.push({\n                member: 'Annotation', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document - Specifies the document name for load\n     * @param  {string} password - Specifies the Given document password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    /**\n     * Perform undo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.undo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.undo();\n        }\n    };\n    /**\n     * Perform redo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.redo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.redo();\n        }\n    };\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        if (!isNullOrUndefined(this.element)) {\n            this.element.classList.remove('e-pdfviewer');\n            this.element.innerHTML = '';\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewer.prototype.fireAnnotationAdd = function (pageNumber, index, type, bounds, settings) {\n        var eventArgs = { name: 'annotationAdd', pageIndex: pageNumber, annotationId: index, annotationType: type, annotationBound: bounds, annotationSettings: settings };\n        this.trigger('annotationAdd', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAnnotationRemove = function (pageNumber, index, type) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'annotationRemove', pageIndex: pageNumber, annotationId: index, annotationType: type };\n        this.trigger('annotationRemove', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewer.prototype.fireAnnotationPropertiesChange = function (pageNumber, index, type, isColorChanged, isOpacityChanged) {\n        var eventArgs = { name: 'annotationPropertiesChange', pageIndex: pageNumber, annotationId: index, annotationType: type, isColorChanged: isColorChanged, isOpacityChanged: isOpacityChanged };\n        this.trigger('annotationPropertiesChange', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigationToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableAnnotation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextMarkupAnnotation\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'AnnotationEditTool', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ ajaxHeaders: [] })\n    ], PdfViewer.prototype, \"ajaxRequestSettings\", void 0);\n    __decorate([\n        Property({ showTooltip: true, annotationToolbarItem: ['HighlightTool', 'UnderlineTool', 'StrikethroughTool', 'ColorEditTool', 'OpacityEditTool', 'AnnotationDeleteTool'] })\n    ], PdfViewer.prototype, \"annotationToolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#FFDF56', author: 'Guest', subject: 'Highlight', modifiedDate: '' })\n    ], PdfViewer.prototype, \"highlightSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#ff0000', author: 'Guest', subject: 'Strikethrough', modifiedDate: '' })\n    ], PdfViewer.prototype, \"strikethroughSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#00ff00', author: 'Guest', subject: 'Underline', modifiedDate: '' })\n    ], PdfViewer.prototype, \"underlineSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationAdd\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationRemove\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationPropertiesChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { ListView } from '@syncfusion/ej2-lists';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.childNavigateCount = 0;\n        // tslint:disable-next-line\n        this.bookmarkClick = function (args) {\n            // tslint:disable-next-line\n            if (!args.event.target.classList.contains('e-icons')) {\n                var bookid = args.data.Id;\n                _this.childNavigateCount = 0;\n                _this.pdfViewerBase.navigationPane.goBackToToolbar();\n                _this.navigateToBookmark(bookid);\n            }\n            else {\n                _this.childNavigateCount++;\n            }\n            return false;\n        };\n        this.nodeClick = function (args) {\n            _this.setHeight(args.node);\n            var bookid = Number(args.nodeData.id);\n            _this.navigateToBookmark(bookid);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var bookmarkRequest = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        bookmarkRequest.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        bookmarkRequest.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.pdfViewerBase.setCustomAjaxHeaders(bookmarkRequest);\n        }\n        bookmarkRequest.responseType = 'json';\n        bookmarkRequest.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        bookmarkRequest.onreadystatechange = function (event) {\n            if (bookmarkRequest.readyState === 4 && bookmarkRequest.status === 200) {\n                if (_this.pdfViewerBase.navigationPane) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        data = JSON.parse(data);\n                    }\n                    _this.bookmarks = { bookMark: data.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n                }\n                if (_this.pdfViewerBase.navigationPane) {\n                    if (_this.bookmarks == null) {\n                        _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                    }\n                    else {\n                        _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                        _this.isBookmarkViewDiv = false;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        bookmarkRequest.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(bookmarkRequest.status, bookmarkRequest.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        var _this = this;\n        if (!this.isBookmarkViewDiv) {\n            this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n            this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n            // tslint:disable-next-line:max-line-length\n            var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon e-right' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            // tslint:disable-next-line:max-line-length\n            var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n            if (this.pdfViewer.enableRtl) {\n                bookmarkTitle.style.paddingRight = 26 + 'px';\n            }\n            else {\n                bookmarkTitle.style.paddingLeft = 40 + 'px';\n            }\n            bookmarkTitle.innerText = '${Title}';\n            bookmarkIconView.appendChild(bookmarkTitle);\n            // tslint:disable-next-line:max-line-length\n            this.treeObj = new TreeView({\n                fields: {\n                    dataSource: this.bookmarks.bookMark,\n                    id: 'Id',\n                    text: 'Title',\n                    child: 'Child',\n                    hasChildren: 'HasChild',\n                },\n                nodeTemplate: bookmarkIconView.outerHTML,\n                nodeSelected: this.nodeClick.bind(this),\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.treeObj.enableRtl = true;\n            }\n            this.treeObj.appendTo(this.bookmarkView);\n            ['mouseover', 'keydown'].forEach(function (evt) { return _this.bookmarkView.addEventListener(evt, function (event) {\n                _this.setHeight(event.target);\n            }); });\n            this.isBookmarkViewDiv = true;\n        }\n        this.bookmarkView.style.display = 'block';\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkContentMobile = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.remove();\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.getElement('_bookmarks_container').appendChild(this.bookmarkView);\n        this.bookmarkList = new ListView({\n            dataSource: this.bookmarks.bookMark,\n            fields: {\n                id: 'Id',\n                text: 'Title',\n                child: 'Child'\n            },\n            showHeader: false,\n            select: this.bookmarkClick.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.bookmarkList.enableRtl = true;\n        }\n        this.bookmarkList.appendTo(this.bookmarkView);\n    };\n    // tslint:disable-next-line\n    BookmarkView.prototype.setHeight = function (element) {\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            else if (element.classList.contains('e-list-parent')) {\n                element = element.querySelector('.e-fullrow');\n            }\n            else if (element.classList.value !== ('e-fullrow') && element.closest('.e-list-item')) {\n                element = element.closest('.e-list-item').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.setBookmarkContentHeight = function () {\n        // tslint:disable-next-line\n        var element = this.treeObj.element;\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    BookmarkView.prototype.navigateToBookmark = function (bookid) {\n        var pageIndex = this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n        var Y = this.bookmarksDestination.bookMarkDestination[bookid].Y;\n        this.goToBookmark(pageIndex, Y);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @param  {number} pageIndex - Specifies the pageIndex for Navigate\n     * @param  {number} y - Specifies the Y coordinates value of the Page\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n            this.pdfViewerBase.updateMobileScrollerPosition();\n        }\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.disableBookmarkButton();\n            this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        }\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            if (this.bookmarkView.parentElement !== null) {\n                this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n            }\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.contextMenuHeight = 144;\n        /**\n         * @private\n         */\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                var selectionRectBounds = this.getSelectionRectangleBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    // tslint:disable-next-line:max-line-length\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bound: selectionBounds, rectangleBounds: selectionRectBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            if (lastElement.childNodes[0]) {\n                                this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                            }\n                            else {\n                                this.extendSelectionStich(lastElement, this.getTextLastLength(lastElement), selection);\n                            }\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBound = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    var selectionRectBounds = this.getSelectionRectangleBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bound: selectionBound, rectangleBounds: selectionRectBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode);\n        var endElement = document.getElementById(endNode);\n        if (startElement.childNodes[0]) {\n            startElement = startElement.childNodes[0];\n        }\n        if (endElement.childNodes[0]) {\n            endElement = endElement.childNodes[0];\n        }\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds = this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber);\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getSelectionRectangleBounds = function (range, pageNumber) {\n        var selectionBounds = [];\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var startOffset = 0;\n            var endOffset = 0;\n            var currentId = 0;\n            var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(range.startContainer);\n            var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(range.startContainer, anchorPageId);\n            var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(range.endContainer);\n            var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(range.endContainer, focusPageId);\n            var textDivs = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).childNodes;\n            if (pageNumber === anchorPageId) {\n                currentId = anchorTextId;\n            }\n            else {\n                currentId = 0;\n            }\n            for (var j = currentId; j < textDivs.length; j++) {\n                var textElement = textDivs[j];\n                if (j === anchorTextId) {\n                    startOffset = range.startOffset;\n                }\n                else {\n                    startOffset = 0;\n                }\n                if (j === focusTextId) {\n                    endOffset = range.endOffset;\n                }\n                else {\n                    endOffset = textElement.textContent.length;\n                }\n                var newRange = document.createRange();\n                for (var k = 0; k < textElement.childNodes.length; k++) {\n                    var node = textElement.childNodes[k];\n                    newRange.setStart(node, startOffset);\n                    newRange.setEnd(node, endOffset);\n                }\n                var boundingRect = this.normalizeBounds(newRange.getBoundingClientRect(), pageNumber);\n                selectionBounds.push(boundingRect);\n                newRange.detach();\n                if (j === focusTextId) {\n                    break;\n                }\n            }\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n            selectionBounds.push(bounds);\n        }\n        return selectionBounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.width)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bound = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bound = ranges[i].bound;\n                }\n            }\n        }\n        return bound;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.calculateContextMenuPosition(event.touches[0].clientY, event.touches[0].clientX);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.calculateContextMenuPosition = function (top, left) {\n        top = top - this.pdfViewerBase.toolbarHeight;\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var contextTop = top - this.contextMenuHeight;\n            if (contextTop < this.pdfViewerBase.toolbarHeight) {\n                top = top + this.contextMenuHeight;\n            }\n            else {\n                top = contextTop;\n            }\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(top, left - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        if (this.pdfViewerBase.getTextMarkupAnnotationMode()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch(_this.searchInput);\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            _this.searchButtonClick(_this.searchBtn, _this.searchInput);\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        if (this.pdfViewer.enableRtl) {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-next-search');\n        }\n        else {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        }\n        this.prevSearchBtn.setAttribute('aria-label', 'Previous Search text');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        if (this.pdfViewer.enableRtl) {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-prev-search');\n        }\n        else {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        }\n        this.nextSearchBtn.setAttribute('aria-label', 'Next Search text');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        if (this.pdfViewer.enableRtl) {\n            this.searchBox.classList.add('e-rtl');\n            this.searchBox.style.left = '88.3px';\n        }\n        else {\n            this.searchBox.classList.remove('e-rtl');\n            this.searchBox.style.right = '88.3px';\n        }\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableToolbar) {\n            var secondaryToolbar = this.pdfViewerBase.getElement('_toolbarContainer_popup');\n            if (secondaryToolbar) {\n                if (secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)) {\n                    this.searchBox.style.right = '0px';\n                }\n            }\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n                this.searchBox.style.right = '0px';\n                // tslint:disable-next-line\n                this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n                // tslint:disable-next-line\n                this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            }\n            else {\n                this.searchBox.style.right = '88.3px';\n                this.searchBox.style.width = '';\n                this.searchInput.style.width = '';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function (searchElement) {\n        var inputString = searchElement.value;\n        this.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.initiateSearch = function (inputString) {\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch(this.searchInput);\n            }\n        }\n        else {\n            this.initiateTextSearch(this.searchInput);\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -100 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                var targetScrollElement = this.getScrollElement(element);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                var targetScrollElement = this.getScrollElement(element_1);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    TextSearch.prototype.getScrollElement = function (element) {\n        var targetElement = element;\n        if (element.childNodes.length > 0) {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                if (element.childNodes[i].classList) {\n                    if (element.childNodes[i].classList.contains('e-pv-search-text-highlight')) {\n                        targetElement = element.childNodes[i];\n                    }\n                }\n            }\n        }\n        return targetElement;\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (Browser.isDevice) {\n                parent.scrollLeft = offsetX;\n            }\n            else {\n                if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                    parent.scrollLeft = offsetX;\n                }\n            }\n        }\n        parent.scrollTop = offsetY;\n        this.pdfViewerBase.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.pdfViewerBase.setCustomAjaxHeaders(request);\n        }\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.prevSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.prevSearchBtn.disabled = true;\n            }\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.nextSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.nextSearchBtn.disabled = true;\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchButtonClick = function (element, inputElement) {\n        if (element.classList.contains('e-pv-search-icon')) {\n            this.initiateTextSearch(inputElement);\n        }\n        else if (element.classList.contains('e-pv-search-close')) {\n            inputElement.value = '';\n            this.resetTextSearch();\n            inputElement.focus();\n        }\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (this.searchBtn) {\n            if (isEnable) {\n                this.searchBtn.classList.remove('e-pv-search-close');\n                this.searchBtn.classList.add('e-pv-search-icon');\n            }\n            else {\n                this.searchBtn.classList.remove('e-pv-search-icon');\n                this.searchBtn.classList.add('e-pv-search-close');\n            }\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));\n        }\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText - Specifies the searchText content\n     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', {\n                id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container'\n            });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex < _this.pdfViewerBase.pageCount; pageIndex++) {\n                    var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                    var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                    _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = {\n            pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1\n        };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        if (this.pdfViewer.ajaxRequestSettings.ajaxHeaders) {\n            this.pdfViewerBase.setCustomAjaxHeaders(request);\n        }\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        var printImage = request.responseText;\n        if (typeof printImage !== 'object') {\n            printImage = JSON.parse(printImage);\n        }\n        var annotationSource = '';\n        if (printImage.textMarkupAnnotation && this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            annotationSource = this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printImage.textMarkupAnnotation, pageIndex);\n        }\n        // tslint:disable-next-line:max-line-length\n        this.printCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_printCanvas_' + pageIndex, className: 'e-pv-print-canvas' });\n        this.printCanvas.style.width = pageWidth + 'px';\n        this.printCanvas.style.height = pageHeight + 'px';\n        this.printCanvas.height = 1056 * window.devicePixelRatio;\n        this.printCanvas.width = 816 * window.devicePixelRatio;\n        var context = this.printCanvas.getContext('2d');\n        var pageImage = new Image();\n        var annotationImage = new Image();\n        pageImage.onload = function () {\n            if (pageHeight > pageWidth) {\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                }\n            }\n            else {\n                // translate to center canvas\n                context.translate(proxy.printCanvas.width * 0.5, proxy.printCanvas.height * 0.5);\n                // rotate the canvas to - 90 degree \n                context.rotate(-0.5 * Math.PI);\n                // un translate the canvas back to origin\n                context.translate(-proxy.printCanvas.height * 0.5, -proxy.printCanvas.width * 0.5);\n                // draw the image\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                }\n            }\n            if (pageIndex === (proxy.pdfViewerBase.pageCount - 1)) {\n                proxy.printWindowOpen();\n            }\n        };\n        pageImage.src = printImage.image;\n        annotationImage.src = annotationSource;\n        this.printViewerContainer.appendChild(this.printCanvas);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:100%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        for (var i = 0; i < this.printViewerContainer.children.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            var canvasUrl = this.printViewerContainer.children[i].toDataURL();\n            this.frameDoc.document.write('<div style=\"margin:0mm;width:816px;height:1056px;position:relative\"><img src=\"' + canvasUrl + '\" id=\"' + 'image_' + i + '\" /></div>');\n        }\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            try {\n                this.iframe.contentWindow.document.execCommand('print', false, null);\n            }\n            catch (e) {\n                this.iframe.contentWindow.print();\n            }\n        }\n        else {\n            setTimeout(function () {\n                _this.iframe.contentWindow.print();\n                _this.iframe.contentWindow.focus();\n                document.body.removeChild(_this.iframe);\n            }, 200);\n        }\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n","import * as index from './index';\nindex.PdfViewer.Inject(index.LinkAnnotation, index.BookmarkView, index.Magnification, index.ThumbnailView, index.Toolbar, index.Navigation, index.Print, index.TextSelection, index.TextSearch, index.Annotation);\nexport * from './index';\n"],"names":["Annotation","pdfViewer","viewerBase","this","actionCollection","redoCollection","isPopupNoteVisible","pdfViewerBase","enableTextMarkupAnnotation","textMarkupAnnotationModule","TextMarkupAnnotation","prototype","setAnnotationMode","type","clearAnnotationMode","drawTextMarkupAnnotations","toString","isTextMarkupAnnotationMode","deleteAnnotation","deleteTextMarkupAnnotation","toolbarModule","annotationToolbarModule","selectAnnotationDeleteItem","enableAnnotationPropertiesTools","initializeCollection","popupNote","createNote","addAction","pageNumber","index","annotation","actionString","property","action","pageIndex","modifiedProperty","push","updateToolbar","undo","actionObject","pop","undoTextMarkupAction","undoRedoPropertyChange","redo","redoTextMarkupAction","updateUndoRedoButtons","createElement","id","element","className","styles","popupNoteAuthor","appendChild","popupNoteContent","mainContainer","showPopupNote","event","color","author","note","mainContainerPosition","getBoundingClientRect","popupNoteClientRect","textContent","style","backgroundColor","display","topPosition","pageY","top","leftPosition","pageX","left","width","height","hidePopupNote","createTextMarkupPopup","_this","elementId","popupElement","headerElement","authorPopupElement","closeBtn","modifiedDateElement","contentContainer","noteContentElement","contentEditable","viewerContainer","addEventListener","saveClosePopupMenu","bind","onPopupElementMoveStart","onPopupElementMove","window","onPopupElementMoveEnd","focus","changedTouches","target","contains","childNodes","isPopupMenuMoved","popupElementClientRect","clientX","clientY","pageSize","currentAnnotPageNumber","getZoomFactor","parseFloat","top_1","clientPosition","pageDiv","document","getElementById","saveNoteContent","innerText","closePopupMenu","parentElement","removeChild","showAnnotationPopup","getEventPageNumber","currentTextMarkupAnnotation","getProperDate","modifiedDate","canvasPosition","date","dateObject","Date","isNaN","getFullYear","dateString","slice","getMonth","getDate","getHours","getMinutes","getSeconds","eventTarget","pageString","split","parseInt","clear","destroy","getModuleName","LinkAnnotation","renderHyperlinkContent","data","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","this_1","i","aTag","rect","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","onclick","fireHyperlinkClick","open","this_2","undefined","destPageHeight","destLocation","scrollValue","name","scrollTop","background","position","Left","Top","Width","Height","modifyZindexForTextSelection","isAdd","pageCount","getElement","pageChildNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","aElement","getElementsByTagName","parentNode","currentTextMarkupAddMode","selectTextMarkupCurrentPage","currentAnnotationIndex","highlightColor","highlightSettings","underlineColor","underlineSettings","strikethroughColor","strikethroughSettings","highlightOpacity","opacity","underlineOpacity","strikethroughOpacity","createAnnotationLayer","pageWidth","pageHeight","displayMode","annotationCanvas","renderTextMarkupAnnotationsInPage","textMarkupAnnotations","canvas","renderTextMarkupAnnotations","factor","getMagnifiedValue","context","getContext","setLineDash","annotations","getAnnotations","annotationObject","TextMarkupAnnotationType","textMarkupAnnotationType","Color","Opacity","bounds","Bounds","Author","subject","Subject","ModifiedDate","Note","Rect","storeAnnotations","annotBounds","renderHighlightAnnotation","renderStrikeoutAnnotation","renderUnderlineAnnotation","maintainAnnotationSelection","selectionObject","textSelectionModule","selectionRangeArray","convertSelectionToTextMarkup","getSelection","pageBounds","getDrawnBounds","drawTextMarkups","clearTextSelection","rectangleBounds","bound","getPageContext","getAddedAnnotation","isDocumentEdited","settings","annotationModule","fireAnnotationAdd","beginPath","x","X","y","Y","globalAlpha","closePath","fillStyle","msFillRule","fill","save","getProperBounds","drawLine","boundValues","moveTo","lineTo","lineWidth","strokeStyle","stroke","printTextMarkupAnnotations","toDataURL","saveTextMarkupAnnotations","storeObject","sessionStorage","getItem","documentId","Array","colorpick","ColorPicker","j","annotationCollection","JSON","parse","newArray","pageAnnotationObject","z","stringify","getBoundsForSave","colorString","getValue","getRgbCode","pageAnnotations","deletedAnnotation","splice","manageAnnotations","fireAnnotationRemove","Browser","isDevice","hideMobileAnnotationToolbar","showToolbar","modifyColorProperty","modifyAnnotationProperty","fireAnnotationPropertiesChange","modifyOpacityProperty","args","value","status","toLocaleString","clearCurrentAnnotation","tempColor","tempOpacity","enableAnnotationPropertiesTool","clearCurrentAnnotationSelection","lowerPageIndex","higherPageIndex","k","clearAnnotationSelection","stringArray","r","g","b","selection","anchorNode","range","createRange","isBackWardSelection","textLayer","focusNode","pageId","getPageIndex","pageRect","setStart","focusOffset","setEnd","anchorOffset","boundingRect","rectangle","getDefaultValue","right","bottom","rectangleArray","startNode","endNode","selectionStartOffset","selectionEndOffset","anchorPageId","anchorTextId","getTextIndex","focusPageId","focusTextId","startOffset","endOffset","currentId","selectionRects","pageStartId","pageEndId","pageStartOffset","pageEndOffset","textDivs","textElement","node","detach","startElementNode","endElementNode","pageRange","pageRectBounds","pageRectangle","removeAllRanges","rerenderAnnotationsPinch","annotCanvas","oldAnnotCanvas","rerenderAnnotations","oldCanvas","newCanvas","resizeAnnotations","onTextMarkupAnnotationMouseUp","isNullOrUndefined","isClickedOnScrollBar","currentAnnot","getCurrentMarkupAnnotation","selectAnnotation","isToolbarHidden","showAnnotationToolbar","annotationItem","onTextMarkupAnnotationTouchEnd","number","touchCanvas","touches","onTextMarkupAnnotationMouseMove","cursor","isPanMode","getAnnotationToolStatus","currentTextMarkupAnnotations","canvasParentPosition","leftClickPosition","topClickPosition","annotationList","isAnnotationGot","top_2","compareCurrentAnnotations","previousX","currentAnnotation","firstAnnotBounds","firstXposition","firstYposition","secondAnnotBounds","secondXposition","secondYposition","drawAnnotationSelectRect","isEnable","createMobileAnnotationToolbar","isMobileAnnotEnabled","enable","updateColorInIcon","colorDropDownElement","setCurrentColorInPicker","annotObject","removeItem","getPageCollection","indexOf","markupAnnotation","annotationStringified","setItem","predefinedDate","storedIndex","NavigationPane","viewer","base","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isTooltipCreated","isThumbnail","isNavigationToolbarVisible","isBookmarkListOpen","isNavigationPaneResized","isBookmarkOpen","isThumbnailOpen","resizeIconMouseOver","srcElement","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","offsetTop","offsetParent","clientWidth","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","getPopupNoteVisibleStatus","preventDefault","enableRtl","maxWidth","Math","floor","outerContainerWidth","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","closeDiv","viewerWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","bookmarkButton","children","bookmarkViewModule","setBookmarkContentHeight","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","localeObj","getConstant","bookmarkPane","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","openThumbnailPane","bookmarkButtonOnClick","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","createNavigationPane","sideBarToolbar","attrs","role","aria-orientation","tabindex","cssFloat","sideBarToolbarSplitter","direction","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","sideBarTitleOnMouseup","adjustPane","splitterElement","toolbarContainer","toolbarHeight","getComputedStyle","createNavigationPaneMobile","option","toolbarElement","viewerMainContainer","insertBefore","items","searchTemplate","prefixIcon","tooltipText","click","goBackToToolbar","template","iconElement","firstElementChild","enableSearchItems","textSearchModule","searchButtonClick","searchInput","searchPrevious","searchNext","text","toolbar","Tool","overflowMode","appendTo","initiateSearchBox","initiateBookmarks","searchBtn","which","initiateTextSearch","resetVariables","setSearchInputWidth","enableItems","mobileScrollerContainer","bookmarkContainer","renderBookmarkContentMobile","inputString","initiateSearch","cancelTextSearch","childNavigateCount","bookmarkList","back","onWindowResize","searchInputParent","padding","getPropertyValue","getParentElementSearchBox","idString","createTooltipMobile","toastObject","tooltipChild","tooltipDiv","Toast","close","onTooltipClose","animation","hide","duration","effect","clientHeight","show","tooltipElement","isMessagePopupOpened","toolbarResize","thumbnailButton","disabled","aria-label","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","buttonSpan","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","enableBookmarkButton","resizeIcon","setResizeIconTop","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","t","call","label","ops","trys","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","previousTime","currentTime","isTouchScrolled","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","dragX","dragY","isScrollbarMouseDown","scrollX","scrollY","ispageMoved","isThumb","isTapHidden","singleTapTimer","tapCount","isInitialLoaded","navigationPane","isAnnotationToolbarHidden","updatePageHeight","annotationToolbarHeight","onToolbarResize","enableToolbar","textSearchBoxOnResize","mobilePageNoContainer","updateMobileScrollerPosition","viewerContainerOnMousedown","button","detail","isIE","documentMode","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","idStringArray","firePageClick","offsetX","offsetY","isTextMarkupAnnotationModule","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","isCollapsed","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","getTextMarkupAnnotationMode","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","getCurrentTextMarkupAnnotation","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","setTouchPoints","preventTouchEvent","getTime","handleTaps","contextMenuObj","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","difference","speed","abs","viewerContainerOnPointerEnd","viewerContainerOnScroll","scrollposX","scrollposY","ratio","scrollHeight","containerValue","verticalScrollValue","getPageHeight","getPageTop","fitType","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","TextLayer","initializeComponent","toolbarDiv","createMobilePageNumberContainer","tabIndex","touchAction","setMaximumHeight","intializeToolbar","mobilecurrentPageContainer","mobilenumberContainer","mobiletotalPageContainer","mobileSpanContainer","createThumbnailContainer","createPrintPopup","createGoToPagePopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","innerHTML","zIndex","mobileScrollContainerDown","mobileScrollContainerEnd","initiatePageRender","documentData","password","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","interactionMode","initiatePanning","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","minHeight","goToPagePopup","removeEventListener","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","ajaxRequestSettings","ajaxHeaders","setCustomAjaxHeaders","responseType","send","onreadystatechange","readyState","currentTarget","response","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","initPageDiv","isAutoZoom","isInitialLoading","createRequestForRender","pageTop","viewerHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","unload","updateWaitingPopup","pageCurrentRect","firstChild","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","windowSessionStorageClear","fireDocumentUnload","unWireEvents","request_1","forEach","getScrollParent","scrollNodeX","scrollNodeY","userAgent","appVersion","scrollTo","nodeName","overflowY","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","closeCorruptPopup","beforeClose","goToPageElement","inputContainer","goToPageInput","pageNoContainer","GoToPageCancelClick","GoToPageApplyClick","closeGoToPagePopUp","NumericTextBox","format","showSpinButton","inputValue","EnableApplyButton","DisableApplyButton","getElementsByClassName","navigation","goToPage","differenceRatio","passwordInput","passwordCancel","passwordCancelClick","applyPassword","isInteraction","fitToAuto","fitToWidth","applyLeftPosition","modifyTextCursor","disableTextSelectionMode","enableAnnotationAddTools","enableTextSelectionMode","onSingleTap","onDoubleTap","moreDropDown","dropDown","getSelectTextMarkupCurrentPage","magnification","onDoubleTapMagnification","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","pageCanvas","maintainSelectionOnScroll","indexInArray","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","imageData","matrix_1","image_1","Image","onload","devicePixelRatio","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","renderTextContent","linkAnnotationModule","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","rotation","addTextLayer","renderTextContents","resizeTextContents","orderPageDivElements","renderPageCanvas","nextElement","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","URL","createObjectURL","anchorElement","href","documentElement","location","padCharacter","replace","textMarkupAnnotationCollection","createBlobUrl","info","msSaveOrOpenBlob","getStoredData","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","blobObj","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","headerName","headerValue","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","byteNumbers","charCodeAt","byteArray","Uint8Array","Blob","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","isAnnotationButtonsEnabled","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","whiteSpace","setStyleToTextDiv","Bottom","setTextElementProperties","font","fontSize","fontFamily","contextWidth","measureText","scale","applyTextRotation","Rotation","resizeExcessDiv","textRotation","scaleString","transform","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","startId","endId","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","compareDocumentPosition","backward","Node","DOCUMENT_POSITION_PRECEDING","previousZoomFactor","textSearch","copyContextMenu","iconCss","Context","contextMenuOnBeforeOpen","select","onMenuItemSelect","created","contextMenuOnCreated","animationSettings","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","isTapToFitZoom","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","zoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","calculateScrollValues","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","annotationLayers","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","isThumbnailElementBottomAfterViewTop","thumbnailViewChildrenElement","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","isUndoRedoBtnsVisible","isAnnotationEditBtnVisible","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","handleToolbarButtonClick","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","enteredValue","navigationModule","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","AnnotationToolbar","initializeAnnotationToolbar","showNavigationToolbar","enableNavigationToolbar","navigationToolbar","navigationToolbarSplitter","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","showUndoRedoTool","showAnnotationEditTool","applyHideToToolbar","showSeparator","enableToolbarItem","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableUndoRedoTool","enableAnnotationEditTool","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","undoItem","redoItem","resetToolbar","moreOptionItem","deSelectItem","updateInteractionItems","enableAnnotation","annotationToolbarSettings","annotationToolbarItem","enableCollectionAvailable","disableUndoRedoButtons","collection","unWireEvent","fileInputElement","controlWidth","createToolbarItemsForMobile","tool","clicked","createToolbarItems","createZoomDropdown","createNumericTextBox","refreshOverflow","afterToolbarCreation","currentPageInputTemplate","createCurrentPageInputTemplate","totalPageTemplate","createTotalPageTemplate","zoomDropDownTemplateString","createZoomDropdownElement","align","itemsContainer","addClassToolbarItem","createTooltip","addPropertiesToolItemContainer","minWidth","createToolbarItem","outerHTML","ComboBox","dataSource","fields","popupHeight","showClearButton","createMoreOption","DropDownButton","dropdownButtonPosition","beforeItemRender","bookmarks","elementName","toolbarItem","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","endIndex","isHide","hideItem","printModule","print","updateInteractionTools","initiateAnnotationMode","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","selectItem","showSearchBox","searchInputElement","DisableInteractionTools","isTextSelect","toolbarItems","toolbarSettingsItems","toolbarBorderHeight","isHighlightEnabled","isUnderlineEnabled","isStrikethroughEnabled","isHighlightBtnVisible","isUnderlineBtnVisible","isStrikethroughBtnVisible","isColorToolVisible","isOpacityToolVisible","isDeleteAnnotationToolVisible","isCurrentAnnotationOpacitySet","primaryToolbar","onToolbarClicked","createDropDowns","applyAnnotationToolbarSettings","createMobileToolbarItems","deleteItem","colorTemplate","getTemplate","opacityTemplate","page","colorPalette","createColorPicker","colorDropDown","createDropDownButton","colorDropDownBeforeOpen","colorDropDownOpen","onColorPickerCancelClick","opacityDropDownElement","sliderContainer","createSlider","opacityDropDown","opacityDropDownBeforeOpen","opacitySlider","opacityChange","changed","opacityDropDownOpen","toggle","refresh","setProperties","updateOpacityIndicator","iconClass","dropDownButton","inputElement","colorPicker","inline","mode","enableOpacity","onColorPickerChange","showButtons","currentValue","hex","borderBottomColor","opacityIndicator","outerContainer","sliderElement","Slider","highlightItem","underlineItem","strikethroughItem","closeItem","handleHighlight","handleUnderline","handleStrikethrough","toolBarInitialStatus","adjustViewer","enablePropertiesTool","deselectAllItems","showHighlightTool","showUnderlineTool","showStrikethroughTool","showColorEditTool","showOpacityEditTool","showAnnotationDeleteTool","isAdjust","getToolbarHeight","updateViewerHeight","getElementHeight","resetViewerHeight","getHeight","updateContentContainerHeight","sideBarClientRect","isButtonsEnabled","__extends","extendStatics","d","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","AjaxRequestSettings","AnnotationToolbarSettings","ServerActionSettings","StrikethroughSettings","UnderlineSettings","HighlightSettings","PdfViewer","options","defaultLocale","Cancel","Download file","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","Apply","GoToPage","No matches","No Text Found","Undo","Redo","Highlight","Underline","Strikethrough","Delete","Color edit","Opacity edit","Highlight context","Underline context","Strikethrough context","Server error","Open text","First text","Previous text","Next text","Last text","Zoom in text","Zoom out text","Selection text","Pan text","Print text","Search text","Annotation Edit text","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","enablePrint","enableDownload","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","annotationId","annotationType","annotationBound","annotationSettings","isColorChanged","isOpacityChanged","Event","NotifyPropertyChanges","Component","BookmarkView","bookmarkClick","bookid","Id","navigateToBookmark","nodeClick","setHeight","Number","nodeData","bookmarkRequest","bookMark","bookmarksDestination","bookMarkDestination","BookmarksDestination","isBookmarkViewDiv","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","paddingRight","paddingLeft","treeObj","TreeView","child","hasChildren","nodeTemplate","nodeSelected","evt","ListView","showHeader","fullRowSelect","querySelector","closest","nextElementSibling","PageIndex","goToBookmark","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","contextMenuHeight","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","yTouch","getNodeElement","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","selectNodeContents","currentPosition","endPosition","rangeBounds","addRange","extend","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","getNodeElementFromNode","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","selectionBounds","getSelectionBounds","getRangeAt","selectionRectBounds","getSelectionRectangleBounds","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","selectionBound","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","newRange","getTextId","lastIndexOf","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","calculateContextMenuPosition","contextTop","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","clearAllOccurrences","searchKeypressHandler","enableNextButton","enablePrevButton","updateSearchInputIcon","searchClickHandler","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","secondaryToolbar","onTextSearchClose","initSearch","highlightOthers","searchElement","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","targetScrollElement","getScrollElement","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","applyTextSelection","iconSpan","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printImage","responseText","annotationSource","textMarkupAnnotation","printCanvas","pageImage","annotationImage","translate","rotate","PI","printWindowOpen","browserUserAgent","write","canvasUrl","index.PdfViewer","Inject","index.LinkAnnotation","index.BookmarkView","index.Magnification","index.ThumbnailView","index.Toolbar","index.Navigation","index.Print","index.TextSelection","index.TextSearch","index.Annotation"],"mappings":"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"}