/*!
*  filename: ej2-filemanager.min.js
*  version : 17.1.48
*  Copyright Syncfusion Inc. 2001 - 2019. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
this.ej=this.ej||{},this.ej.filemanager=function(e,t,i,n,s,a,o,r,l,h,d){"use strict";function p(e){var t=e.path.substr(0,e.path.length-1);e.targetPath=t.substr(0,t.lastIndexOf("/")+1)}function c(e,t,i){i.setProperties({path:u(e,t)},!0),i.pathId=f(e)}function u(e,t){for(var i=m(e,t,!1),n="/",s=i.length-2;s>=0;s--)n+=i[s]+"/";return n}function f(e){for(var t=m(e,e.getAttribute("data-uid"),!0),i=[],n=t.length-1;n>=0;n--)i.push(t[n]);return i}function m(e,i,n){for(var s=[i],a=e.parentNode;!t.isNullOrUndefined(a);){if(t.matches(a,"."+it)){var o=n?a.getAttribute("data-uid"):t.select("."+nt,a).textContent;s.push(o)}a=a.parentNode}return s}function g(e,t,i){var n;if(t){var s=0;for(s;s<t.length;s++){var a=t[s],o=a.id;!1===a.isFile&&("cut"===i?e.treeNodes.push(o):e.treeNodes=e.treeNodes,"copy"===i?e.copyNodes.push((n={},n.name=a.name,n)):e.copyNodes=e.copyNodes,"Delete"===i?e.removeNodes.push(o):e.removeNodes=e.removeNodes)}}else e.treeNodes="cut"===i?e.treeObj.selectedNodes:e.treeNodes,e.removeNodes="Delete"===i?e.treeObj.selectedNodes:e.removeNodes}function b(e,i,n){var s=[];v(n);var a=n.activeElements;n.targetPath=n.path;var o,r,l=0;if(a){for(O(a[0],n);l<a.length;)"cut"===e&&y(a[l]),r=!1===(o="largeiconsview"===n.activeModule?!a[l].querySelector("."+Ot):null)?t.closest(a[l],"li").getAttribute("data-uid"):null,a[l].querySelector("."+nt)?s.push({name:a[l].querySelector("."+nt).textContent,isFile:o,id:r}):s=s,l++;"detailsview"===n.activeModule&&!1!==i?(s=n.detailsviewModule.gridSelectNodes(),"cut"!==e&&"copy"!==e&&"Delete"!==e||!n.navigationpaneModule||g(n.navigationpaneModule,s,e)):"largeiconsview"===n.activeModule&&n.navigationpaneModule?"cut"===e||"copy"===e||"Delete"===e?g(n.navigationpaneModule,s,e):s=s:("cut"!==e&&"copy"!==e&&"Delete"!==e||!n.navigationpaneModule?s=s:g(n.navigationpaneModule,null,e),"navigationpane"===n.activeModule&&p(n))}return s}function y(e){e.classList.add(ot)}function v(e,t){for(var i=t?e.element.querySelectorAll("."+lt):e.element.querySelectorAll("."+ot),n=0;n<i.length;)t?i[n].classList.remove(lt):i[n].classList.remove(ot),n++}function O(e,i){e&&(e.classList.contains(pt)?i.activeModule="detailsview":t.closest(e,"."+yt)?i.activeModule="largeiconsview":i.activeModule="navigationpane")}function w(e){e.itemData=[S(e)],H(e,Tt,e.path)}function I(e){H(e,Vt,e.path)}function C(e){var i=t.getValue(e.path,e.feFiles);if(i)for(var n=e.selectedItems[e.selectedItems.length-1],s=0,a=i.length;s<a;s++)if(n===t.getValue("name",i[s]))return i[s];return t.getValue(e.path,e.feParent)}function S(e){return t.getValue(e.path,e.feParent)}function j(e){e.cutNodes=[],e.navigationpaneModule.treeNodes=[],e.navigationpaneModule.copyNodes=[],e.nodeNames=[],e.selectedNodes=[],e.nodeNames=b("copy",null,e),e.nodeNames&&(e.fileAction="CopyTo",e.enablePaste=!0,e.notify(Yt,{}))}function N(e){e.navigationpaneModule.treeNodes=[],e.navigationpaneModule.copyNodes=[],e.nodeNames=[],e.selectedNodes=[],e.nodeNames=b("cut",null,e),e.nodeNames&&(e.cutNodes=e.nodeNames,e.fileAction="MoveTo",e.enablePaste=!0,e.notify(Yt,{}))}function E(e){if(!t.getValue("isFile",e))return"e-fe-folder";var i=["bmp","dib","jpg","jpeg","jpe","jfif","gif","tif","tiff","png","ico"],n=["mp3","wav","aac","ogg","wma","aif","fla","m4a"],s=["webm","mkv","flv","vob","ogv","ogg","avi","wmv","mp4","3gp"],a=["css","exe","html","js","msi","pdf","pptx","ppt","rar","zip","txt","docx","doc","xlsx","xls","xml","rtf","php"],o=t.getValue("type",e);-1!==(o=o.toLowerCase()).indexOf(".")&&(o=o.split(".").join(""));return-1!==i.indexOf(o)?mt:-1!==n.indexOf(o)?gt:-1!==s.indexOf(o)?bt:-1!==a.indexOf(o)?"e-fe-"+o:"e-fe-unknown e-fe-"+o}function x(e,i){var n=e.ajaxSettings.getImageUrl?e.ajaxSettings.getImageUrl:e.ajaxSettings.url;return""!==e.breadcrumbbarModule.searchObj.element.value?n+"?path="+t.getValue("filterPath",i):n+"?path="+e.path+t.getValue("name",i)}function D(e,i){if(0===i.length)return i;var n=(new s.Query).sortBy(e.sortBy,e.sortOrder.toLowerCase(),!0).group("isFile"),a=new s.DataManager(i).executeLocal(n);return t.getValue("records",a)}function R(e,i){return P(e,t.select("."+nt,i).textContent)}function P(e,i){var n=t.getValue(e.path,e.feFiles),a=(new s.Query).where("name","equal",i);return new s.DataManager(n).executeLocal(a)[0]}function M(e,i,n){if(t.isNullOrUndefined(n.querySelector("."+ct))){var s=t.createElement("div",{className:ct}),a=t.createElement("div",{className:vt}),o=t.createElement("div",{className:ut}),r=t.createElement("div",{className:ft});"Details"===e.view?n.querySelector("."+wt).appendChild(s):n.appendChild(s),s.appendChild(a),s.appendChild(o),s.appendChild(r)}n.querySelector("."+ct)&&("search"===i?(n.querySelector("."+ut).innerHTML=A(e,"Search-Empty"),n.querySelector("."+ft).innerHTML=A(e,"Search-Key")):(n.querySelector("."+ut).innerHTML=A(e,"Folder-Empty"),n.querySelector("."+ft).innerHTML=A(e,"File-Upload")))}function k(e){return new s.DataManager(e).executeLocal((new s.Query).where(Dt,"equal",!1,!1))}function L(e,i){t.setValue("nodeId",i,e.cwd);for(var n=k(e.files),s=0,a=n.length;s<a;s++)t.setValue("nodeId",i+"_"+s,n[s])}function T(e){for(var i=0;i<e.length;i++)t.setValue("dateCreated",new Date(t.getValue("dateCreated",e[i])),e[i]),t.setValue("dateModified",new Date(t.getValue("dateModified",e[i])),e[i])}function A(e,t){var i=e.localeObj.getConstant(t);return""===i?t:i}function _(e,i){var n=e.cssClass;return n=t.isNullOrUndefined(n)||""===n?i:n+" "+i}function B(e,t){-1!==t.item.id.indexOf("ascending")||-1!==t.item.id.indexOf("descending")?e.sortOrder=U(t.item.id):e.sortBy=U(t.item.id),"Details"===e.view&&(e.isMobile?H(e,qt,e.path):e.notify(Xt,{module:"gridview"})),"LargeIcons"===e.view&&H(e,qt,e.path),e.notify(Kt,{})}function U(e){var t=e.substring(e.lastIndexOf("_")+1),i=t;switch(t){case"date":i="dateModified";break;case"ascending":i="Ascending";break;case"descending":i="Descending"}return i}function F(e,i){for(var n=i.split("/"),s=e.originalPath.split("/"),a=n.length-1,o=s.length-1;a<o;a++){var r=""===s[a+1]?Mt:Pt,l=""===s[a]?"/":e.path+s[a]+"/",h=P(e,s[a]),d=t.getValue("nodeId",h);e.setProperties({path:l},!0),e.pathId.push(d),e.itemData=[h],H(e,r,e.path);break}}function V(e,i){var n=t.getValue("filterPath",i)+"/";n=n.replace(/\\/g,"/"),e.notify(zt,{selectedNode:e.pathId[e.pathId.length-1]}),e.originalPath=n,H(e,e.path!==e.originalPath?Pt:Mt,e.path)}function H(e,t,i){Y(e,{action:"Read",path:i,showHiddenItems:e.showHiddenItems,data:e.itemData},J,t)}function z(e,t){Y(e,{action:"CreateFolder",path:e.path,name:t,data:e.itemData},X)}function q(e,t){Y(e,{action:"Rename",path:e.path,name:e.currentItemText,itemNewName:t,data:e.itemData},$,e.path)}function K(e,t,i,n,s,a,o){Y(e,{action:s,path:t,targetPath:n,itemNames:i,CommonFiles:o},Q,t,a,s,n)}function W(e,t,i,n,s){Y(e,{action:n,path:i,itemNames:t},Z,i,s)}function G(e,t,i,n){Y(e,{action:n,path:i,itemNames:t},ee,i,null,n)}function Y(e,i,n,s,a,o,r){var l={url:e.ajaxSettings.url,type:"POST",mode:!0,dataType:"json",contentType:"application/json",data:JSON.stringify(i),onSuccess:null,onFailure:null,beforeSend:null},h={action:t.getValue("action",i),ajaxSettings:l,cancel:!1};e.trigger("beforeSend",h),h.cancel||(e.notify(Bt,{}),new t.Ajax({url:t.getValue("url",h.ajaxSettings),type:t.getValue("type",h.ajaxSettings),mode:t.getValue("mode",h.ajaxSettings),dataType:t.getValue("dataType",h.ajaxSettings),contentType:t.getValue("contentType",h.ajaxSettings),data:t.getValue("data",h.ajaxSettings),beforeSend:t.getValue("beforeSend",h.ajaxSettings),onSuccess:function(l){if("string"==typeof l&&(l=JSON.parse(l)),e.notify(Ut,{action:"success"}),!t.isNullOrUndefined(l.files)){T(l.files);for(var d=0,p=l.files.length;d<p;d++){var c=l.files[d];t.setValue("iconClass",E(c),c)}}if("Read"===t.getValue("action",i)){var u=t.getValue("path",i);L(l,e.expandedId?e.expandedId:e.pathId[e.pathId.length-1]),t.setValue(u,l.files,e.feFiles),t.setValue(u,l.cwd,e.feParent)}n(e,l,s,a,o,r),"function"==typeof t.getValue("onSuccess",h.ajaxSettings)&&t.getValue("onSuccess",h.ajaxSettings)()},onFailure:function(){var i={files:null,error:{code:"404",message:"NetworkError: Faild to send on XMLHTTPRequest: Failed to load "+e.ajaxSettings.url,fileExists:null}};e.notify(Ut,{action:"failure"}),n(e,i,s,a,o,r),"function"==typeof t.getValue("onFailure",h.ajaxSettings)&&t.getValue("onFailure",h.ajaxSettings)()}}).send())}function J(e,i,n){t.isNullOrUndefined(i.files)?te(e,i,"Read"):(e.notify(n,i),e.notify(Ht,{}),e.trigger("onSuccess",{action:"Read",result:i}))}function X(e,i){if(t.isNullOrUndefined(i.files))if("400"===i.error.code){var n=t.select("#newname",e.dialogObj.element),s=A(e,"Validation-NewFolder-Exists").replace("{0}",'"'+n.value+'"');n.parentElement.nextElementSibling.innerHTML=s}else e.dialogObj.hide(),te(e,i,"CreateFolder");else e.dialogObj.hide(),e.createdItem=i.files[0],e.trigger("onSuccess",{action:"CreateFolder",result:i}),H(e,kt,e.path)}function $(e,i,n){if(t.isNullOrUndefined(i.files))if("400"===i.error.code){var s=t.select("#rename",e.dialogObj.element),a=A(e,"Validation-Rename-Exists").replace("{0}",'"'+e.currentItemText+'"');a=a.replace("{1}",'"'+s.value+'"'),s.parentElement.nextElementSibling.innerHTML=a}else e.dialogObj.hide(),te(e,i,"Rename");else{if(e.dialogObj.hide(),e.trigger("onSuccess",{action:"Rename",result:i}),e.renamedItem=i.files[0],0===e.selectedItems.length&&e.navigationpaneModule){var o=e.parentPath.split("/"),r=e.parentPath.replace(o[o.length-2]+"/",e.renameText+"/");e.setProperties({path:r},!0)}H(e,Gt,e.path)}}function Q(e,i,n,s,a){if(i.error&&i.error.fileExists){e.fileLength=0;for(var o=0;o<i.files.length;o++)ae(e,"DuplicateItems",i,null,i.error.fileExists);e.detailsviewModule.pasteOperation=!0,e.largeiconsviewModule.pasteOperation=!0,e.duplicateItems=[]}else i.error||t.isNullOrUndefined(i.files)?te(e,i,a):(e.detailsviewModule.pasteOperation=!0,e.largeiconsviewModule.pasteOperation=!0,e.pasteNodes=e.selectedNodes,H(e,At,e.path),"MoveTo"===a&&0!==s.treeNodes.length?(e.selectedNodes=[],s.moveNode()):"CopyTo"===a&&0!==s.copyNodes.length&&s.copyNode(),"MoveTo"===a&&(e.enablePaste=!1,e.notify(Jt,{})),e.trigger("onSuccess",{action:a,result:i}))}function Z(e,i,n){t.isNullOrUndefined(i.files)?te(e,i,"Remove"):(e.setProperties({path:n},!0),H(e,Lt,e.path),e.trigger("onSuccess",{action:"Remove",result:i}))}function ee(e,i,n,s,a){t.isNullOrUndefined(i.details)?te(e,i,"GetDetails"):(ae(e,a,null,i.details),e.trigger("onSuccess",{action:"GetDetails",result:i}))}function te(e,t,i){ae(e,"Error",t),e.trigger("onError",{action:i,error:t.error})}function ie(e,t,i,n,s,a){Y(e,{action:"Search",path:i,searchString:n,showHiddenItems:s,caseSensitive:a},ne,t)}function ne(e,i,n){t.isNullOrUndefined(i.files)?te(e,i,"Search"):(e.notify(n,i),e.trigger("onSuccess",{action:"Search",result:i}))}function se(e,i){for(var n,s=[],a=e.ajaxSettings.downloadUrl?e.ajaxSettings.downloadUrl:e.ajaxSettings.url,o=0;o<i.length;o++)s.push(i[o].name),n=i[o].filterPath;var r={action:"Download",path:t.isNullOrUndefined(n)?e.path:n,itemNames:s},l=t.createElement("form",{id:e.element.id+"_downloadForm",attrs:{action:a,method:"post",name:"downloadForm",download:""}}),h=t.createElement("input",{id:e.element.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(r),type:"hidden"}});l.appendChild(h),e.element.appendChild(l),document.forms.namedItem("downloadForm").submit(),e.element.removeChild(l)}function ae(e,i,s,a,o){var r=pe(e,i,s,a,o);t.isNullOrUndefined(e.dialogObj)?(e.dialogObj=new n.Dialog({header:r.header,content:r.content,buttons:r.buttons,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,isModal:!0,target:"#"+e.element.id,width:"350px",open:r.open,enableRtl:e.enableRtl,locale:e.locale}),e.dialogObj.appendTo("#"+e.element.id+$e)):ce(e,r)}function oe(e){var i=t.select("#newname",e.dialogObj.element);i.focus(),i.value="";var n=i.value.length;i.setSelectionRange(0,n)}function re(e){var i=t.select("#newname",e.dialogObj.element);i.parentElement.classList.contains("e-control-wrapper")||de(i,A(e,"Content-NewFolder")),i.parentElement.nextElementSibling.innerHTML="",i.oninput=function(){ge(e,i)},i.onkeyup=function(t){13===ve(t)&&ue(e)},oe(e)}function le(e){var i=t.select("#rename",e.dialogObj.element);i.parentElement.classList.contains("e-control-wrapper")||de(i,A(e,"Content-Rename")),i.parentElement.nextElementSibling.innerHTML="",i.oninput=function(){ge(e,i)},i.onkeyup=function(t){13===ve(t)&&fe(e)},he(e,i)}function he(e,t){t.focus(),t.value=e.currentItemText,e.isFile&&e.isFile&&-1!==t.value.indexOf(".")?t.setSelectionRange(0,t.value.lastIndexOf(".")):t.setSelectionRange(0,t.value.length)}function de(e,t){a.Input.createInput({element:e,properties:{placeholder:t}})}function pe(e,i,n,s,a){var o={header:"",content:"",buttons:[],open:null};switch(i=s&&!0===s.multipleFiles?"MultipleFileDetails":i){case"NewFolder":o.header=A(e,"Header-NewFolder"),o.content='<input type="text" value="New folder" id="newname"><div class="e-fe-error"></div>',o.buttons=[{buttonModel:{isPrimary:!0,content:A(e,"Button-Create")},click:function(t){"keydown"!==t.type&&ue(e)}}],o.open=re.bind(this,e);break;case"Delete":e.selectedItems.length>1?(o.content=("<div>"+A(e,"Content-Multiple-Delete")+"</div>").replace("{0}",e.selectedItems.length.toString()),o.header=A(e,"Header-Multiple-Delete")):(o.content="<div>"+A(e,"Content-Delete")+"</div>",o.header=A(e,"Header-Delete")),o.buttons=[{buttonModel:{isPrimary:!0,content:A(e,"Button-Yes")},click:function(t){"keydown"!==t.type&&me(e)}},{buttonModel:{content:A(e,"Button-No")},click:function(){e.dialogObj.hide()}}];break;case"Rename":o.header=A(e,"Header-Rename"),o.content='<input type="text" class="e-input" id="rename"><div class="e-fe-error"></div>',o.buttons=[{buttonModel:{isPrimary:!0,content:A(e,"Button-Save")},click:function(t){"keydown"!==t.type&&fe(e)}}],o.open=le.bind(this,e);break;case"DuplicateItems":e.replaceItems=a,o.header=A(e,"Header-Duplicate"),o.content="<div>"+e.replaceItems[e.fileLength].substring(e.replaceItems[e.fileLength].lastIndexOf("/")+1)+A(e,"Content-Duplicate")+"</div>",o.buttons=[{buttonModel:{isPrimary:!0,content:A(e,"Button-Yes")},click:function(t){if("keydown"!==t.type){var i=e.replaceItems[e.fileLength].substring(e.replaceItems[e.fileLength].lastIndexOf("/")+1);e.duplicateItems.push(i),a[++e.fileLength]?(e.dialogObj.content="<div>"+e.replaceItems[e.fileLength].substring(e.replaceItems[e.fileLength].lastIndexOf("/")+1)+A(e,"Content-Duplicate")+"</div>",e.dialogObj.show()):(e.dialogObj.hide(),K(e,e.targetPath,e.selectedNodes,e.path,e.fileAction,e.navigationpaneModule,e.duplicateItems))}}},{buttonModel:{content:A(e,"Button-No")},click:function(){if(e.fileLength++,a[e.fileLength]){var t=e.replaceItems[e.fileLength].substring(e.replaceItems[e.fileLength].lastIndexOf("/")+1);e.dialogObj.content="<div>"+t+" already exists. Are you sure you want to replace it ?</div>",e.dialogObj.show()}else e.dialogObj.hide(),0!==e.duplicateItems.length&&K(e,e.targetPath,e.duplicateItems,e.path,e.fileAction,e.navigationpaneModule,e.duplicateItems)}}];break;case"GetDetails":var r=new t.Internationalization,l=(r.parseDate(s.modified,{format:"MM/dd/yyy hh:mm:ss"}),r.formatDate(new Date(s.modified),{format:"MMMM dd, yyyy HH:mm:ss"}));o.header=s.name,o.content="<table><tr><td>"+A(e,"Type")+'</td><td class="'+xt+'" title="'+(s.isFile?"File":"Folder")+'">'+(s.isFile?"File":"Folder")+"</td></tr><tr><td>"+A(e,"Size")+'</td><td><span class="'+xt+'" title ="'+s.size+'">'+s.size+"</span></td></tr><tr><td>"+A(e,"Location")+'</td><td class="'+xt+'" title="'+s.location+'">'+s.location+"</td></tr><tr><td>"+A(e,"Modified")+'</td><td class="'+xt+'" >'+l+"</td></tr></table>",o.buttons=[{buttonModel:{isPrimary:!0,content:A(e,"Button-Ok")},click:function(t){"keydown"!==t.type&&e.dialogObj.hide()}}];break;case"MultipleFileDetails":var h=s.location;o.header=s.name,o.content="<table><tr><td>"+A(e,"Type")+':</td><td class="'+xt+'">Multiple Types</td></tr><tr><td>'+A(e,"Size")+":</td><td>"+s.size+'<span class="'+xt+'" title ="'+s.size+'"></span></td></tr><tr><td>'+A(e,"Location")+':</td><td class="'+xt+'" title="'+h+'">'+h+"</td></tr></table>",o.buttons=[{buttonModel:{isPrimary:!0,content:A(e,"Button-Ok")},click:function(t){"keydown"!==t.type&&e.dialogObj.hide()}}];break;case"Error":var d=n;"523"===d.error.code?o.header="Access Denied":o.header=A(e,"Error"),o.content='<div class="'+jt+'">'+d.error.message+"</div>",o.buttons=[{buttonModel:{isPrimary:!0,content:A(e,"Button-Ok")},click:function(t){"keydown"!==t.type&&e.dialogObj.hide()}}]}return o}function ce(e,t){e.dialogObj.header=t.header,e.dialogObj.content=t.content,e.dialogObj.buttons=t.buttons,e.dialogObj.enableRtl=e.enableRtl,e.dialogObj.open=t.open,e.dialogObj.dataBind(),e.dialogObj.show()}function ue(e){var i=t.select("#newname",e.dialogObj.element);be(e,i),""===i.parentElement.nextElementSibling.innerHTML&&z(e,i.value)}function fe(e){var i=t.select("#rename",e.dialogObj.element);if(be(e,i),""===i.parentElement.nextElementSibling.innerHTML){var s=i.value;if(e.renameText=i.value,e.currentItemText===s)return void e.dialogObj.hide();if(0===e.selectedItems.length){e.parentPath=e.path;var a=e.path.split("/"),o=e.path.replace(a[a.length-2]+"/","");e.setProperties({path:o},!0)}e.isFile&&e.currentItemText.substr(e.currentItemText.lastIndexOf("."))!==s.substr(s.lastIndexOf("."))?t.isNullOrUndefined(e.extDialogObj)?(e.extDialogObj=new n.Dialog({header:A(e,"Header-Rename-Confirmation"),content:"<div>"+A(e,"Content-Rename-Confirmation")+"</div>",animationSettings:{effect:"None"},target:"#"+e.element.id,showCloseIcon:!0,closeOnEscape:!0,isModal:!0,width:350,buttons:[{buttonModel:{isPrimary:!0,content:A(e,"Button-Yes")},click:function(){e.extDialogObj.hide(),q(e,e.renameText)}},{buttonModel:{content:A(e,"Button-No")},click:function(){e.extDialogObj.hide(),e.dialogObj.hide()}}]}),e.extDialogObj.appendTo("#"+e.element.id+Ze)):e.extDialogObj.show():q(e,s)}}function me(e){e.dialogObj.hide();var t=b("Delete",null,e);e.deleteHandler(t)}function ge(e,t){/[\/\\|*?"<>:]/.test(t.value)?ye(e,t):""===t.value?t.parentElement.nextElementSibling.innerHTML=A(e,"Validation-Empty"):t.parentElement.nextElementSibling.innerHTML=""}function be(e,t){ge(e,t);var i=t.value.length-1;""===t.value||t.value.lastIndexOf(".")!==i&&t.value.lastIndexOf(" ")!==i||ye(e,t)}function ye(e,t){var i=A(e,"Validation-Invalid").replace("{0}",'"'+t.value+'"');t.parentElement.nextElementSibling.innerHTML=i}function ve(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function Oe(e,i,s){var a=t.createElement("div",{className:"e-image-wrap"}),o=t.createElement("img",{className:"e-image",attrs:{src:s}});a.appendChild(o),t.isNullOrUndefined(e.viewerObj)?(e.viewerObj=new n.Dialog({header:i,content:a,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,isModal:!0,width:"350px",height:"350px",target:"#"+e.element.id,locale:e.locale,enableResize:!0,allowDragging:!0,position:{X:"center",Y:"center"},enableRtl:e.enableRtl,open:we.bind(this,e),resizing:Ie.bind(this,e),resizeStop:Ie.bind(this,e)}),e.viewerObj.appendTo("#"+e.element.id+Qe)):(e.viewerObj.refresh(),e.viewerObj.header=i,e.viewerObj.content=a,e.viewerObj.enableRtl=e.enableRtl,e.viewerObj.dataBind(),e.viewerObj.show())}function we(e){setTimeout(function(){e.viewerObj&&e.viewerObj.element.focus()}),Ie(e)}function Ie(e){var i=t.select(".e-dlg-content",e.viewerObj.element),n=t.select(".e-image-wrap",e.viewerObj.element),s=window.getComputedStyle(i,null),a=s?2*parseFloat(s.paddingRight):36,o=s?2*parseFloat(s.paddingBottom):20;n.style.width=i.offsetWidth-a+"px",n.style.height=i.offsetHeight-o+"px"}var Ce=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Se=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},je=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ce(i,e),Se([t.Property(null)],i.prototype,"downloadUrl",void 0),Se([t.Property(null)],i.prototype,"getImageUrl",void 0),Se([t.Property(null)],i.prototype,"uploadUrl",void 0),Se([t.Property(null)],i.prototype,"url",void 0),i}(t.ChildProperty),Ne=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ee=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},xe=["NewFolder","Upload","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"],De=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ne(i,e),Ee([t.Property(xe)],i.prototype,"items",void 0),Ee([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),Re=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pe=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Me=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Re(i,e),Pe([t.Property(!0)],i.prototype,"allowSearchOnTyping",void 0),Pe([t.Property("contains")],i.prototype,"filterType",void 0),Pe([t.Property(!0)],i.prototype,"ignoreCase",void 0),i}(t.ChildProperty),ke=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Le=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Te=[{field:"name",headerText:"Name",minWidth:120,width:"auto",template:'<span class="e-fe-text" title="${name}">${name}</span>',customAttributes:{class:"e-fe-grid-name"}},{field:"dateModified",headerText:"DateModified",format:{type:"date",format:"MMMM dd, yyyy HH:mm"},minWidth:50,width:"190"},{field:"size",headerText:"Size",minWidth:50,width:"110",template:'<span class="e-fe-size">${size}</span>'}],Ae=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ke(i,e),Le([t.Property(!0)],i.prototype,"columnResizing",void 0),Le([t.Property(Te)],i.prototype,"columns",void 0),i}(t.ChildProperty),_e=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Be=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Ue=["Open","|","Delete","Download","Rename","|","Details"],Fe=["Open","|","Delete","Rename","Download","|","Details"],Ve=["SortBy","View","Refresh","|","NewFolder","Upload","|","Details","|","SelectAll"],He=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return _e(i,e),Be([t.Property(Ue)],i.prototype,"file",void 0),Be([t.Property(Fe)],i.prototype,"folder",void 0),Be([t.Property(Ve)],i.prototype,"layout",void 0),Be([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),ze=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qe=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Ke=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ze(i,e),qe([t.Property("650px")],i.prototype,"maxWidth",void 0),qe([t.Property("240px")],i.prototype,"minWidth",void 0),qe([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),We=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ge=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Ye=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ge([t.Property(!0)],i.prototype,"autoUpload",void 0),Ge([t.Property(0)],i.prototype,"minFileSize",void 0),Ge([t.Property(3e7)],i.prototype,"maxFileSize",void 0),i}(t.ChildProperty),Je="_grid",Xe="_largeicons",$e="_dialog",Qe="_img_dialog",Ze="_extn_dialog",et="e-fe-m-filter",tt="e-large-icons",it="e-list-item",nt="e-list-text",st="e-icons e-fe-tick",at="e-icons e-fe-dot",ot="e-blur",rt="e-active",lt="e-hover",ht="e-check",dt="e-checkbox-wrapper",pt="e-rowcell",ct="e-empty",ut="e-empty-content",ft="e-empty-inner-content",mt="e-fe-image",gt="e-fe-music",bt="e-fe-video",yt="e-large-icon",vt="e-empty-icon e-fe-folder",Ot="e-fe-folder",wt="e-content",It="e-icons e-fe-cut",Ct="e-icons e-fe-grid",St="e-icons e-fe-large",jt="e-fe-errorcontent",Nt="e-rtl",Et="e-display-none",xt="e-fe-value",Dt="isFile",Rt="model-changed",Pt="initial-end",Mt="finalize-end",kt="create-end",Lt="delete-end",Tt="refresh-end",At="path-changed",_t="destroy",Bt="before-request",Ut="after-request",Ft="open-init",Vt="open-end",Ht="selection-changed",zt="clear-path-init",qt="layout-change",Kt="sort-by-change",Wt="rename-init",Gt="rename-end",Yt="show-paste",Jt="hide-paste",Xt="sort-column",$t=function(){function e(e){this.pasteOperation=!1,this.uploadOperation=!1,this.count=0,this.isRendered=!0,this.tapCount=0,this.isSetModel=!1,this.parent=e,this.element=t.select("#"+this.parent.element.id+Xe,this.parent.element),t.addClass([this.element],tt),this.addEventListener(),this.keyConfigs={end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace"}}return e.prototype.render=function(e){if(this.element.setAttribute("tabindex","0"),this.parent.visitedItem=null,this.startItem=null,"LargeIcons"===this.parent.view){this.resetMultiSelect(),this.listObj&&(this.unWireEvents(),this.removeEventListener()),this.parent.notify("hide-layout",{});var i=t.select("#"+this.parent.element.id+Xe,this.parent.element),n=t.select("ul",i);if(n&&t.remove(n),this.listObj={ariaAttributes:{itemRole:"",listRole:"",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},showIcon:!0,fields:{text:"name",iconCss:"icon",imageUrl:"imageUrl"},sortOrder:this.parent.sortOrder,itemCreated:this.onItemCreated.bind(this)},this.items=[],this.items=this.renderList(e),this.items=D(this.parent,this.items),this.listElements=o.ListBase.createListFromJson(t.createElement,this.items,this.listObj),this.itemList=Array.prototype.slice.call(t.selectAll("."+it,this.listElements)),this.element.appendChild(this.listElements),0===this.itemList.length){var s=this.element.querySelector(".e-list-parent");this.element.removeChild(s),M(this.parent,t.getValue("name",e),this.element)}else 0!==this.itemList.length&&this.element.querySelector("."+ct)&&this.element.removeChild(this.element.querySelector("."+ct));!0===this.pasteOperation&&(this.selectItems(e.files,this.parent.selectedNodes),this.parent.setProperties({selectedItems:[]},!0),this.pasteOperation=!1),!0===this.uploadOperation&&(this.selectItems(e.files,this.parent.uploadItem),this.parent.setProperties({selectedItems:[]},!0),++this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[])),0!==this.element.querySelectorAll("."+rt).length&&(this.parent.activeModule="largeiconsview"),i.classList.remove(Et),this.adjustHeight(),this.element.style.maxHeight="100%",this.getItemCount(),this.addEventListener(),this.wireEvents(),this.isRendered=!0,this.parent.selectedItems.length&&this.checkItem()}},e.prototype.getModuleName=function(){return"largeiconsview"},e.prototype.adjustHeight=function(){var e=t.select("#"+this.parent.element.id+"_content",this.parent.element),i=t.select("#"+this.parent.element.id+"_breadcrumbbar",this.parent.element);this.element.style.height=e.offsetHeight-i.offsetHeight+"px"},e.prototype.onItemCreated=function(e){if(!this.parent.showFileExtension&&t.getValue("isFile",e.curData)){var i=e.item.querySelector("."+nt),n=t.getValue("name",e.curData),s=t.getValue("type",e.curData);i.innerHTML=n.substr(0,n.length-s.length)}this.renderCheckbox(e);var a={element:e.item,fileDetails:e.curData,module:"LargeIconsView"};this.parent.trigger("beforeFileLoad",a)},e.prototype.renderCheckbox=function(e){if(this.parent.allowMultiSelection){var i;(i=r.createCheckBox(t.createElement,!1,{checked:!1,cssClass:"e-small"})).setAttribute("role","checkbox"),i.setAttribute("aria-checked","false"),e.item.firstElementChild.insertBefore(i,e.item.firstElementChild.childNodes[0])}},e.prototype.onLayoutChange=function(e){if("LargeIcons"===this.parent.view){if(this.destroy(),this.render(e),this.parent.cutNodes&&0!==this.parent.cutNodes.length)for(var t=this.getIndexes(e.files,this.parent.selectedNodes),i=0;i<t.length;)y(this.itemList[t[i]]),i++;var n=this.element.querySelectorAll("."+rt);this.parent.activeElements=0!==n.length?n:this.parent.activeElements,0!==n.length&&this.element.focus(),this.checkItem()}else this.element.setAttribute("tabindex","-1")},e.prototype.checkItem=function(){var e=this.element.querySelectorAll("."+rt);if(e)for(var t=0;t<e.length;)this.checkState(e[t],!0),t++},e.prototype.renderList=function(e){for(var i=0,n=JSON.parse(JSON.stringify(e.files));i<n.length;){var s=E(n[i]),a=this.parent.pasteNodes,o=this.parent.selectedItems&&-1!==this.parent.selectedItems.indexOf(t.getValue("name",e.files[i]))||a&&0!==a.length&&-1!==a.indexOf(t.getValue("name",e.files[i]))?yt+" e-active":yt;if(s===mt&&this.parent.showThumbnail){var r=x(this.parent,n[i]);t.setValue("imageUrl",r,n[i])}else t.setValue("icon",s,n[i]);t.setValue("htmlAttributes",{class:o,title:t.getValue("name",e.files[i])},n[i]),i++}return n},e.prototype.onFinalizeEnd=function(e){this.render(e),this.parent.notify("search-change",e)},e.prototype.onCreateEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.clearSelect(),this.selectItems(e.files,[t.getValue("name",this.parent.createdItem)]),this.parent.createdItem=null,this.parent.largeiconsviewModule.element.focus(),this.parent.persistData=!1)},e.prototype.onDeleteEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.parent.setProperties({selectedItems:[]},!0),this.clearSelect())},e.prototype.onRefreshEnd=function(e){"LargeIcons"===this.parent.view&&this.onLayoutChange(e)},e.prototype.onRenameInit=function(){"LargeIcons"===this.parent.view&&1===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onRenameEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.clearSelect(),this.parent.setProperties({selectedItems:[]},!0),this.selectItems(e.files,[t.getValue("name",this.parent.renamedItem)]),this.parent.renamedItem=null)},e.prototype.onPathChanged=function(e){this.parent.breadcrumbbarModule.searchObj.value&&""===this.parent.breadcrumbbarModule.searchObj.value&&(this.parent.searchedItems=[]),"LargeIcons"===this.parent.view&&(v(this.parent),this.parent.persistData||(this.parent.selectedItems=[]),this.parent.persistData=!1,this.parent.pasteNodes=[],this.parent.cutNodes=[],this.onLayoutChange(e),this.parent.notify("search-change",e))},e.prototype.onOpenInit=function(e){"largeiconsview"===this.parent.activeModule&&this.doOpenAction(e.target)},e.prototype.onHideLayout=function(e){"LargeIcons"!==this.parent.view&&this.element&&this.element.classList.add(Et)},e.prototype.onSelectAllInit=function(){if("LargeIcons"===this.parent.view){this.startItem=this.getFirstItem();var e=this.getLastItem(),t={ctrlKey:!0,shiftKey:!0};this.doSelection(e,t)}},e.prototype.onClearAllInit=function(){"LargeIcons"===this.parent.view&&this.clearSelection()},e.prototype.onBeforeRequest=function(){this.isRendered=!1},e.prototype.onAfterRequest=function(e){this.isRendered=!0},e.prototype.onSearch=function(e){this.parent.searchedItems=e.files,this.onLayoutChange(e)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Mt,this.onFinalizeEnd),this.parent.off(kt,this.onCreateEnd),this.parent.off(Lt,this.onDeleteEnd),this.parent.off(Tt,this.onRefreshEnd),this.parent.off(At,this.onPathChanged),this.parent.off(qt,this.onLayoutChange),this.parent.off("search",this.onSearch),this.parent.off(Ft,this.onOpenInit),this.parent.off(Vt,this.onLayoutChange),this.parent.off(Rt,this.onPropertyChanged),this.parent.off(Wt,this.onRenameInit),this.parent.off(Gt,this.onRenameEnd),this.parent.off("hide-layout",this.onHideLayout),this.parent.off("select-all-init",this.onSelectAllInit),this.parent.off("clear-all-init",this.onClearAllInit),this.parent.off(Bt,this.onBeforeRequest),this.parent.off(Ut,this.onAfterRequest),this.parent.off("splitter-resize",this.resizeHandler),this.parent.off("resize-end",this.resizeHandler))},e.prototype.addEventListener=function(){this.parent.on(Mt,this.onFinalizeEnd,this),this.parent.on(kt,this.onCreateEnd,this),this.parent.on(Lt,this.onDeleteEnd,this),this.parent.on(Tt,this.onRefreshEnd,this),this.parent.on(At,this.onPathChanged,this),this.parent.on(qt,this.onLayoutChange,this),this.parent.on("search",this.onSearch,this),this.parent.on(Ft,this.onOpenInit,this),this.parent.on(Wt,this.onRenameInit,this),this.parent.on(Gt,this.onRenameEnd,this),this.parent.on(Vt,this.onLayoutChange,this),this.parent.on(Rt,this.onPropertyChanged,this),this.parent.on("hide-layout",this.onHideLayout,this),this.parent.on("select-all-init",this.onSelectAllInit,this),this.parent.on("clear-all-init",this.onClearAllInit,this),this.parent.on(Bt,this.onBeforeRequest,this),this.parent.on(Ut,this.onAfterRequest,this),this.parent.on("splitter-resize",this.resizeHandler,this),this.parent.on("resize-end",this.resizeHandler,this)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++)switch(n[i]){case"height":this.adjustHeight();break;case"selectedItems":if(this.isSetModel=!0,0!==this.parent.selectedItems.length){var s=t.getValue(this.parent.path,this.parent.feFiles);this.selectItems(s,this.parent.selectedItems)}else for(;this.element.querySelectorAll("."+rt).length>0;)this.removeActive(this.element.querySelectorAll("."+rt)[0]);this.isSetModel=!1;break;case"showThumbnail":w(this.parent);break;case"showFileExtension":case"showHiddenItems":H(this.parent,At,this.parent.path);break;case"allowMultiSelection":w(this.parent),this.parent.selectedItems.length>1&&!this.parent.allowMultiSelection&&(this.parent.selectedItems=[]);break;case"view":H(this.parent,qt,this.parent.path)}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.listObj&&this.unWireEvents())},e.prototype.wireEvents=function(){this.wireClickEvent(!0),this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),this.keyboardDownModule=new t.KeyboardEvents(this.element,{keyAction:this.keydownActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),t.EventHandler.add(this.element,"mouseover",this.onMouseOver,this)},e.prototype.unWireEvents=function(){this.wireClickEvent(!1),t.EventHandler.remove(this.element,"mouseover",this.onMouseOver),this.keyboardModule.destroy(),this.keyboardDownModule.destroy()},e.prototype.onMouseOver=function(e){var i=t.closest(e.target,".e-list-item");v(this.parent,"hover"),null!==i&&i.classList.add(lt)},e.prototype.wireClickEvent=function(e){if(e){var i=this;this.clickObj=new t.Touch(this.element,{tap:function(e){e.originalEvent.preventDefault(),i.parent.isDevice?(i.tapCount=e.tapCount,i.tapEvent=e,setTimeout(function(){i.tapCount>0&&i.doTapAction(i.tapEvent),i.tapCount=0},350)):2===e.tapCount&&3!==e.originalEvent.which?i.dblClickHandler(e):i.clickHandler(e)},tapHold:function(e){i.parent.isDevice&&(i.multiSelect=!!i.parent.allowMultiSelection,i.parent.allowMultiSelection&&t.addClass([i.parent.element],"e-fe-m-select"),i.clickHandler(e))}})}else this.clickObj&&this.clickObj.destroy()},e.prototype.doTapAction=function(e){var i=e.originalEvent.target,n=t.closest(i,"."+it);this.multiSelect||i.classList.contains("e-list-parent")||t.isNullOrUndefined(n)?this.clickHandler(e):(this.parent.isFile=!1,this.updateType(n),this.parent.isFile?2===e.tapCount?(this.clickHandler(e),this.dblClickHandler(e)):this.clickHandler(e):this.dblClickHandler(e))},e.prototype.clickHandler=function(e){var t=e.originalEvent.target;v(this.parent,"hover"),this.doSelection(t,e.originalEvent),this.parent.activeModule="largeiconsview"},e.prototype.doSelection=function(e,i){var n=t.closest(e,"."+it),s=(this.getFocusedItem(),e.classList);this.parent.isFile=!1;var a="select";if(3===i.which&&!t.isNullOrUndefined(n)&&n.classList.contains(rt))return void this.updateType(n);if(t.isNullOrUndefined(n))this.clearSelection();else{if(this.parent.allowMultiSelection&&(this.multiSelect||!i||i.ctrlKey)||s.contains("e-frame")||(this.updateType(n),this.clearSelect()),this.parent.allowMultiSelection&&i.shiftKey){i&&i.ctrlKey||this.clearSelect(),this.startItem||(this.startItem=n);var o=this.itemList.indexOf(this.startItem),r=this.itemList.indexOf(n);if(o>r)for(l=o;l>=r;l--)this.addActive(this.itemList[l]);else for(var l=o;l<=r;l++)this.addActive(this.itemList[l]);this.addFocus(this.itemList[r])}else this.startItem=n,this.parent.allowMultiSelection&&n.classList.contains(rt)?(this.removeActive(n),a="unselect"):this.addActive(n),this.addFocus(n);0===this.parent.selectedItems.length&&this.resetMultiSelect(),this.parent.notify(Ht,{}),this.triggerSelect(a,n)}this.parent.activeElements=this.element.querySelectorAll(".e-active")},e.prototype.dblClickHandler=function(e){this.parent.activeModule="largeiconsview";var t=e.originalEvent.target;this.doOpenAction(t)},e.prototype.clearSelection=function(){this.clearSelect(),this.resetMultiSelect(),this.parent.notify(Ht,{})},e.prototype.resetMultiSelect=function(){this.multiSelect=!1,t.removeClass([this.parent.element],"e-fe-m-select")},e.prototype.doOpenAction=function(e){if(!t.isNullOrUndefined(e)){var i=t.closest(e,"."+it);if(this.parent.isFile=!1,!t.isNullOrUndefined(i)){this.updateType(i);var n=this.getItemObject(i),s={cancel:!1,fileDetails:n};if(this.parent.trigger("beforeFileOpen",s),s.cancel)return;var a=t.select("."+nt,i).textContent;if(this.parent.isFile){if(E(n)===mt){var o=x(this.parent,n);Oe(this.parent,t.getValue("name",n),o)}}else{if(""===this.parent.breadcrumbbarModule.searchObj.element.value){var r=this.parent.path+a+"/";this.parent.setProperties({path:r},!0),this.parent.pathId.push(t.getValue("nodeId",n)),this.parent.itemData=[n],I(this.parent)}else V(this.parent,n);this.parent.setProperties({selectedItems:[]},!0)}}}},e.prototype.updateType=function(e){var i=t.select(".e-fe-folder",e);this.parent.isFile=!!t.isNullOrUndefined(i)},e.prototype.keydownActionHandler=function(e){if(this.isRendered)switch(e.action){case"end":case"home":case"moveDown":case"moveLeft":case"moveRight":case"moveUp":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"ctrlRight":case"shiftRight":case"csRight":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":e.preventDefault()}},e.prototype.keyActionHandler=function(e){if(this.isRendered){var i=this.getFocusedItem(),n=this.getFirstItem(),s=this.getLastItem();switch(e.action){case"end":this.navigateItem(s);break;case"home":this.navigateItem(n);break;case"tab":t.isNullOrUndefined(i)?t.isNullOrUndefined(n)||this.addFocus(n):this.addFocus(i);break;case"moveDown":this.navigateDown(i,!0);break;case"moveLeft":this.navigateRight(i,!1);break;case"moveRight":this.navigateRight(i,!0);break;case"moveUp":this.navigateDown(i,!1);break;case"ctrlEnd":case"shiftEnd":case"csEnd":this.csEndKey(s,e);break;case"ctrlHome":case"shiftHome":case"csHome":this.csHomeKey(n,e);break;case"ctrlDown":case"shiftDown":case"csDown":this.csDownKey(i,e);break;case"ctrlLeft":case"shiftLeft":case"csLeft":this.csLeftKey(i,e);break;case"ctrlRight":case"shiftRight":case"csRight":this.csRightKey(i,e);break;case"ctrlUp":case"shiftUp":case"csUp":this.csUpKey(i,e);break;case"space":this.spaceKey(i);break;case"ctrlSpace":case"shiftSpace":case"csSpace":t.isNullOrUndefined(i)||this.doSelection(i,e);break;case"ctrlA":this.ctrlAKey(n,s);break;case"enter":this.doOpenAction(this.parent.visitedItem?this.parent.visitedItem:this.getVisitedItem());break;case"altEnter":this.parent.getDetails();break;case"esc":this.escapeKey();break;case"del":case"shiftdel":this.parent.selectedItems&&this.parent.selectedItems.length>0&&ae(this.parent,"Delete");break;case"ctrlC":this.copy();break;case"ctrlV":this.parent.pasteHandler();break;case"ctrlX":this.cut();break;case"f2":1===this.parent.selectedItems.length&&(this.updateRenameData(),ae(this.parent,"Rename"))}}},e.prototype.updateRenameData=function(){var e=t.select("."+it+"."+rt,this.element),i=this.getItemObject(e);this.parent.itemData=[i],this.parent.currentItemText=t.getValue("name",i),this.parent.isFile=t.getValue("isFile",i)},e.prototype.getVisitedItem=function(){var e=t.getValue(this.parent.path,this.parent.feFiles),i=this.parent.selectedItems[this.parent.selectedItems.length-1],n=this.getIndexes(e,[i]);return this.itemList[n[0]]},e.prototype.getFocusedItem=function(){return t.select("."+it+".e-focus",this.element)},e.prototype.getActiveItem=function(){return t.select("."+it+"."+rt,this.element)},e.prototype.getFirstItem=function(){return this.itemList[0]},e.prototype.getLastItem=function(){return this.itemList[this.itemList.length-1]},e.prototype.navigateItem=function(e){this.setFocus(e)},e.prototype.navigateDown=function(e,t){var i=this.getNextItem(e,t,this.perRow);this.setFocus(i)},e.prototype.navigateRight=function(e,t){var i=this.getNextItem(e,t);this.setFocus(i)},e.prototype.getNextItem=function(e,i,n){if(t.isNullOrUndefined(e))return this.getFocusedItem()||this.getActiveItem()||this.getFirstItem();var s,a=this.itemList.indexOf(e);do{if(a=i?n?a+n:a+1:n?a-n:a-1,s=this.itemList[a],t.isNullOrUndefined(s))return e}while(!t.isVisible(s));return s},e.prototype.setFocus=function(e){t.isNullOrUndefined(e)||(this.startItem=e,this.clearSelect(),this.addActive(e),this.addFocus(e),this.parent.notify(Ht,{}),this.triggerSelect("select",e))},e.prototype.cut=function(){N(this.parent),this.parent.fileOperation(this.parent.nodeNames)},e.prototype.copy=function(){j(this.parent),this.parent.fileOperation(this.parent.nodeNames)},e.prototype.escapeKey=function(){v(this.parent),this.parent.selectedNodes=[],this.parent.navigationpaneModule.treeNodes=[]},e.prototype.spaceKey=function(e){t.isNullOrUndefined(e)||e.classList.contains(rt)||(this.addActive(e),this.parent.notify(Ht,{}),this.triggerSelect("select",e))},e.prototype.ctrlAKey=function(e,i){if(this.parent.allowMultiSelection&&!t.isNullOrUndefined(e)){this.startItem=e;var n={ctrlKey:!0,shiftKey:!0};this.doSelection(i,n)}},e.prototype.csEndKey=function(e,i){this.parent.allowMultiSelection?t.isNullOrUndefined(e)||("ctrlEnd"===i.action?this.addFocus(e):this.doSelection(e,i)):this.navigateItem(e)},e.prototype.csHomeKey=function(e,i){this.parent.allowMultiSelection?t.isNullOrUndefined(e)||("ctrlHome"===i.action?this.addFocus(e):this.doSelection(e,i)):this.navigateItem(e)},e.prototype.csDownKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!0,this.perRow);t.isNullOrUndefined(n)||("ctrlDown"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateDown(e,!0)},e.prototype.csLeftKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!1);t.isNullOrUndefined(n)||("ctrlLeft"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateRight(e,!1)},e.prototype.csRightKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!0);t.isNullOrUndefined(n)||("ctrlRight"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateRight(e,!0)},e.prototype.csUpKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!1,this.perRow);t.isNullOrUndefined(n)||("ctrlUp"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateDown(e,!1)},e.prototype.addActive=function(e){t.isNullOrUndefined(e)||(e.classList.contains(rt)||(this.isSetModel||this.parent.selectedItems.push(e.textContent),t.addClass([e],[rt]),this.checkState(e,!0)),this.parent.visitedItem=e)},e.prototype.removeActive=function(e){if(!t.isNullOrUndefined(e)){t.removeClass([e],[rt]),this.checkState(e,!1);var i=this.parent.selectedItems.indexOf(e.textContent);i>-1&&this.parent.selectedItems.splice(i,1),this.parent.visitedItem=null}},e.prototype.addFocus=function(e){var i=this.getFocusedItem();i&&t.removeClass([i],["e-focus"]),t.addClass([e],["e-focus"])},e.prototype.checkState=function(e,i){if(this.parent.allowMultiSelection){var n=t.select(".e-frame",e);i?n.classList.contains(ht)||(t.addClass([n],ht),t.closest(n,"."+dt).setAttribute("aria-checked","true")):n.classList.contains(ht)&&(t.removeClass([n],ht),t.closest(n,"."+dt).setAttribute("aria-checked","false"))}},e.prototype.clearSelect=function(){for(var e=Array.prototype.slice.call(t.selectAll("."+rt,this.listElements)),i=0,n=e.length;i<n;i++)this.removeActive(e[i])},e.prototype.resizeHandler=function(){this.getItemCount()},e.prototype.getItemCount=function(){var e=1;if(this.itemList)for(var t=0,i=this.itemList.length-1;t<i&&this.itemList[t].getBoundingClientRect().top===this.itemList[t+1].getBoundingClientRect().top;t++)e++;this.perRow=e},e.prototype.triggerSelect=function(e,t){var i=this.getItemObject(t);this.parent.visitedData=i;var n={action:e,fileDetails:i};this.parent.trigger("fileSelect",n)},e.prototype.selectItems=function(e,t){for(var i=this.getIndexes(e,t),n=0,s=i.length;n<s;n++){var a={ctrlKey:!0,shiftKey:!1};this.doSelection(this.itemList[i[n]],a)}},e.prototype.getIndexes=function(e,i){for(var n=[],s=0,a=this.items.length;s<a;s++)-1!==i.indexOf(t.getValue("name",this.items[s]))&&n.push(s);return n},e.prototype.getItemObject=function(e){var t=this.itemList.indexOf(e);return this.items[t]},e}(),Qt=function(){function e(e){this.addressPath="",this.addressBarLink="",this.parent=e,this.treeView=this.parent.navigationpaneModule,this.keyConfigs={enter:"enter"},this.render()}return e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++)switch(n[i]){case"searchSettings":t.isNullOrUndefined(e.newProp.searchSettings.allowSearchOnTyping)||this.searchEventBind(e.newProp.searchSettings.allowSearchOnTyping)}},e.prototype.render=function(){this.addEventListener()},e.prototype.onPathChange=function(){var e=t.getValue("name",t.getValue("/",this.parent.feParent));this.addressBarLink?this.addressPath=this.addressBarLink:this.addressPath=e+this.parent.path;var i=this.addressPath,n=i.substring(i.indexOf("/"),i.length);this.parent.setProperties({path:n},!0);var s=[];s=i.split("/");var a=null;(a=this.parent.createElement("ul")).setAttribute("class","e-addressbar-ul");var o=null,r=s.length-1;if(s.length>1){for(var l="",h=0;h<r;h++){var d=null;o=this.parent.createElement("li");for(var p=0;p<=h;p++)l=l+s[p]+"/";if(o.setAttribute("data-utext",l),o.classList.add("e-address-list-item"),0!==h){var c=t.createElement("span",{className:"e-icons"});o.appendChild(c)}r-h!=1?(d=t.createElement("a",{className:nt}),o.setAttribute("tabindex","0")):d=t.createElement("span",{className:nt}),l="",d.innerText=s[h],o.appendChild(d),a.appendChild(o)}var u=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul");t.isNullOrUndefined(u)||(t.isNullOrUndefined(this.subMenuObj)||this.subMenuObj.destroy(),t.remove(u));var f=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");f?this.parent.breadCrumbBarNavigation.appendChild(a):this.parent.breadCrumbBarNavigation.insertBefore(a,f),this.updateBreadCrumbBar(a)}this.addressBarLink=""},e.prototype.updateBreadCrumbBar=function(e){for(var i=e.querySelectorAll("li"),n=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul"),s=window.getComputedStyle(n,null),o=parseFloat(s.getPropertyValue("padding-right")),r=parseFloat(s.getPropertyValue("padding-left")),h=n.offsetWidth-o-r,d=this.parent.createElement("ul",{className:"e-addressbar-ul"}),p=0,c=[],u=0;u<i.length;u++){var f=i[u].clientWidth;c.push(f),p+=f}t.isNullOrUndefined(n)||t.remove(n);var m=this.parent.createElement("div");m.setAttribute("class","e-search-wrap");var g=this.parent.element.id+"_search",b=t.createElement("input",{id:g,attrs:{autocomplete:"off"}});m.appendChild(b);var y=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap .e-input");if(t.isNullOrUndefined(y)){this.parent.breadCrumbBarNavigation.appendChild(m);var v=t.createElement("span",{className:"e-icons e-fe-search"});t.EventHandler.add(v,"click",this.onShowInput,this),b.parentElement.insertBefore(v,b),this.searchObj=new a.TextBox({value:"",showClearButton:!0,placeholder:A(this.parent,"Search"),focus:this.onFocus.bind(this),blur:this.onBlur.bind(this)}),this.searchObj.appendTo("#"+this.parent.element.id+"_search"),this.searchEventBind(this.parent.searchSettings.allowSearchOnTyping);var O=this.searchObj.element.nextElementSibling;t.EventHandler.add(O,"mousedown",this.searchChangeHandler.bind(this),this),t.EventHandler.add(this.searchObj.element,"keyup",this.onKeyUp.bind(this),this)}var w=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");if(h-=w.offsetWidth,p>h){for(u=i.length;u--;){var I=h-c[u];if(!(I>40)){for(var C=[],S=0;S<=u;S++){var j=i[S];C.push({text:j.innerText,utext:j.getAttribute("data-utext")})}var N=this.parent.createElement("li",{className:"e-breadcrumb-menu"}),E={className:"e-breadcrumb-submenu"},x=this.parent.createElement("button",E);N.appendChild(x),d.insertBefore(N,d.querySelector("li")),this.subMenuObj=new l.DropDownButton({items:C,cssClass:"e-caret-hide e-submenu",iconCss:"e-icons e-fe-breadcrumb",iconPosition:"Top",beforeItemRender:this.addSubMenuAttributes.bind(this),select:this.subMenuSelectOperations.bind(this)}),this.subMenuObj.appendTo(x);break}d.insertBefore(i[u],d.querySelector("li")),h=I}this.parent.breadCrumbBarNavigation.insertBefore(d,w)}else this.parent.breadCrumbBarNavigation.insertBefore(e,w)},e.prototype.onFocus=function(){t.closest(this.searchObj.element,".e-search-wrap").classList.add("e-focus")},e.prototype.onKeyUp=function(){this.parent.notify("path-column",{args:this.parent})},e.prototype.onBlur=function(){t.closest(this.searchObj.element,".e-search-wrap").classList.remove("e-focus")},e.prototype.subMenuSelectOperations=function(e){var t={target:e.element};this.addressPathClickHandler(t)},e.prototype.addSubMenuAttributes=function(e){e.element.setAttribute("data-utext",t.getValue("utext",e.item));var i=this.parent.createElement("a",{className:"e-list-text"});e.element.appendChild(i)},e.prototype.searchEventBind=function(e){e?(this.searchObj.input=this.searchChangeHandler.bind(this),this.searchObj.change=null):(this.searchObj.change=this.searchChangeHandler.bind(this),this.searchObj.input=null)},e.prototype.searchChangeHandler=function(e){if(!t.isNullOrUndefined(e.value)){var i=void 0;if(0===e.value.length&&this.parent.notify("path-column",{args:this.parent}),i="startWith"===this.parent.searchSettings.filterType?"*"+e.value:"endsWith"===this.parent.searchSettings.filterType?e.value+"*":"*"+e.value+"*",this.searchObj.element.value.length>0){var n=this.parent.searchSettings.ignoreCase,s=this.parent.showHiddenItems;ie(this.parent,"search",this.parent.path,i,s,!n)}else H(this.parent,"search",this.parent.path)}},e.prototype.addressPathClickHandler=function(e){var i=e.target;if("LI"===i.nodeName||"A"===i.nodeName){var n="LI"===i.nodeName?i.children[0]:i;if(!t.isNullOrUndefined(n)){var s=this.updatePath(n);this.liClick(s);var a=this.parent.pathId[this.parent.pathId.length-1];this.parent.notify("update-tree-selection",{module:"treeview",selectedNode:a})}}},e.prototype.onShowInput=function(){this.parent.isMobile&&(this.parent.element.classList.contains(et)?t.removeClass([this.parent.element],et):(t.addClass([this.parent.element],et),this.searchObj.element.focus()))},e.prototype.updatePath=function(e){var i=t.closest(e,"li").getAttribute("data-utext");this.addressBarLink=i;var n=this.addressBarLink.split("/"),s=this.parent.pathId;this.parent.pathId=[];for(var a=0,o=n.length-1;a<o;a++)this.parent.pathId.push(s[a]);return this.addressBarLink.substr(this.addressBarLink.indexOf("/"),this.addressBarLink.length)},e.prototype.onUpdatePath=function(){this.onPathChange(),this.removeSearchValue()},e.prototype.onCreateEnd=function(e){this.addressPath.substring(this.addressPath.indexOf("/"),this.addressPath.length)!==this.parent.path&&this.onPathChange()},e.prototype.onDeleteEnd=function(){this.addressPath.substring(this.addressPath.indexOf("/"),this.addressPath.length)!==this.parent.path&&this.onUpdatePath()},e.prototype.removeSearchValue=function(){""===this.searchObj.value&&""===this.searchObj.element.value||(this.searchObj.value="",this.searchObj.element.value="",this.searchObj.dataBind())},e.prototype.onResize=function(){this.onPathChange()},e.prototype.liClick=function(e){H(this.parent,At,e)},e.prototype.addEventListener=function(){this.keyboardModule=new t.KeyboardEvents(this.parent.breadCrumbBarNavigation,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.parent.on(Rt,this.onPropertyChanged,this),t.EventHandler.add(this.parent.breadCrumbBarNavigation,"click",this.addressPathClickHandler,this),this.parent.on(_t,this.destroy,this),this.parent.on(At,this.onUpdatePath,this),this.parent.on(Mt,this.onUpdatePath,this),this.parent.on(Tt,this.onUpdatePath,this),this.parent.on(Vt,this.onUpdatePath,this),this.parent.on(kt,this.onCreateEnd,this),this.parent.on(Gt,this.onUpdatePath,this),this.parent.on(Lt,this.onDeleteEnd,this),this.parent.on("splitter-resize",this.onResize,this),this.parent.on("resize-end",this.onResize,this),this.parent.on("search-change",this.onSearchTextChange,this)},e.prototype.keyActionHandler=function(e){switch(e.action){case"enter":e.preventDefault(),this.addressPathClickHandler(e)}},e.prototype.removeEventListener=function(){this.keyboardModule.destroy(),this.parent.off(At,this.onUpdatePath),this.parent.off(Mt,this.onUpdatePath),this.parent.off(Tt,this.onUpdatePath),this.parent.off(Vt,this.onUpdatePath),this.parent.off(kt,this.onCreateEnd),this.parent.off(Gt,this.onUpdatePath),this.parent.off(Lt,this.onDeleteEnd),this.parent.off("splitter-resize",this.onResize),this.parent.off("resize-end",this.onResize),this.parent.off("search-change",this.onSearchTextChange)},e.prototype.getModuleName=function(){return"breadcrumbbar"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),t.isNullOrUndefined(this.subMenuObj)||this.subMenuObj.destroy(),t.isNullOrUndefined(this.searchObj)||this.searchObj.destroy())},e.prototype.onSearchTextChange=function(e){this.searchObj.element.placeholder=A(this.parent,"Search")+" "+e.cwd.name},e}(),Zt=function(){function e(e){this.parent=e,this.render()}return e.prototype.render=function(){this.keyConfigs={downarrow:"downarrow",uparrow:"uparrown"},this.contextMenu=new h.ContextMenu({enableRtl:this.parent.enableRtl,locale:this.parent.locale,target:"#"+this.parent.element.id,beforeItemRender:this.onBeforeItemRender.bind(this),select:this.onSelect.bind(this),beforeOpen:this.onBeforeOpen.bind(this),cssClass:_(this.parent,"e-fe-popup")}),this.contextMenu.appendTo("#"+this.parent.element.id+"_contextmenu"),this.addEventListener()},e.prototype.onBeforeItemRender=function(e){if(e.item.id===this.getMenuId("largeiconsview")){i=t.createElement("span");(n=e.element).insertBefore(i,"LargeIcons"===this.parent.view?n.childNodes[1]:n.childNodes[0]),i.setAttribute("class",St+" e-menu-icon")}if(e.item.id===this.getMenuId("detailsview")){var i=t.createElement("span"),n=e.element;n.insertBefore(i,"Details"===this.parent.view?n.childNodes[1]:n.childNodes[0]),i.setAttribute("class",Ct+" e-menu-icon")}},e.prototype.onBeforeOpen=function(e){var i,n,s=!1,a=!1,o=e.event.target;o.classList.contains("e-spinner-pane")&&(o=this.parent.navigationpaneModule.activeNode.getElementsByClassName("e-fullrow")[0]),o.classList.contains("e-fullrow")&&(this.parent.selectedItems.length=0),this.targetElement="Details"===this.parent.view?t.closest(o,"tr"):o;var r=this.getTargetView(o);if(o.classList.contains("e-treeview")||t.closest(o,"th")||t.closest(o,"#"+this.parent.element.id+"_breadcrumbbar"))e.cancel=!0;else if("LargeIcons"!==this.parent.view&&this.targetElement&&this.targetElement.classList.contains("e-emptyrow"))this.setLayoutItem(o);else if(t.closest(o,"."+ct))this.setLayoutItem(o);else if(!o.classList.contains("e-menu-item")&&!o.classList.contains("e-menu-icon")&&!o.classList.contains("e-caret")){if("LargeIcons"!==this.parent.view||t.isNullOrUndefined(t.closest(o,"li"))||t.closest(o,"#"+this.parent.element.id+"_tree"))t.isNullOrUndefined(t.closest(o,"tr"))?t.closest(o,"#"+this.parent.element.id+"_tree")&&(i=t.closest(o,"li").getAttribute("data-uid"),a=!0):(i=this.targetElement.getAttribute("data-uid"),n=this.parent.detailsviewModule.gridObj.getRowObjectFromUID(i).data,t.isNullOrUndefined(this.targetElement.getAttribute("aria-selected"))&&this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute("aria-rowindex"),10)]),s=!0);else{var l={ctrlKey:!0,shiftKey:!0};n=this.parent.visitedData,t.closest(o,"li").classList.contains("e-active")||this.parent.largeiconsviewModule.doSelection(o,l),s=!0}s?!0===t.getValue("isFile",n)?this.setFileItem(o):this.setFolderItem(!1):a?(this.setFolderItem(!0),i===this.parent.pathId[0]&&this.contextMenu.enableItems([this.getMenuId("Delete"),this.getMenuId("Rename")],!1,!0)):"TreeView"===r||"GridView"===r||"LargeIcon"===r?this.setLayoutItem(o):e.cancel=!0}if(!e.cancel){this.contextMenu.dataBind();var h={fileDetails:C(this.parent),element:e.element,target:o,items:this.contextMenu.items,menuModule:this.contextMenu,cancel:!1};this.parent.trigger("menuOpen",h),e.cancel=h.cancel,e.cancel}},e.prototype.getTargetView=function(e){return e.classList.contains("e-treeview")?"TreeView":e.classList.contains(wt)?"GridView":e.classList.contains("e-list-parent")?"LargeIcon":e.classList.contains(tt)?"LargeIcon":""},e.prototype.setFolderItem=function(e){this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.folder),this.contextMenu.dataBind(),e?this.contextMenu.enableItems([this.getMenuId("Open")],!1,!0):1!==this.parent.selectedItems.length&&this.contextMenu.enableItems([this.getMenuId("Rename")],!1,!0)},e.prototype.setFileItem=function(e){this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.file),this.contextMenu.dataBind(),1!==this.parent.selectedItems.length&&this.contextMenu.enableItems([this.getMenuId("Rename")],!1,!0)},e.prototype.setLayoutItem=function(e){this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.layout),this.contextMenu.dataBind(),("LargeIcons"===this.parent.view&&0!==t.closest(e,"#"+this.parent.element.id+Xe).getElementsByClassName(ct).length||"Details"===this.parent.view&&0!==t.closest(e,"#"+this.parent.element.id+Je).getElementsByClassName(ct).length)&&(this.contextMenu.enableItems([this.getMenuId("SelectAll")],!1,!0),this.contextMenu.dataBind())},e.prototype.onSelect=function(e){if(!t.isNullOrUndefined(e.item)&&e.item.id){var i,n=e.item.id.substr((this.parent.element.id+"_cm_").length);"refresh"===n||"newfolder"===n?(i=S(this.parent),this.parent.itemData=[i]):i=C(this.parent);var s={cancel:!1,element:e.element,fileDetails:i,item:e.item};if(this.parent.trigger("menuClick",s),!s.cancel){if(this.parent.selectedItems.length>0&&("paste"===n||"upload"===n)){var a=void 0,o=void 0;if("Details"===this.parent.view){var r=this.targetElement.getAttribute("data-uid");o=this.parent.detailsviewModule.gridObj.getRowObjectFromUID(r).data}else{d=this.targetElement.parentElement;o=R(this.parent,d)}o.isFile?a="":(a=o.name+"/",this.parent.navigationpaneModule.treeObj.selectedNodes=[o.id]);var l=this.parent.path+a;this.parent.setProperties({path:l},!0)}var h=this.parent.selectedItems;switch(n){case"cut":N(this.parent),this.parent.nodeNames&&this.parent.fileOperation(this.parent.nodeNames);break;case"copy":j(this.parent),this.parent.nodeNames&&this.parent.fileOperation(this.parent.nodeNames),"navigationpane"===this.parent.activeModule&&(this.parent.navigationpaneModule.copyNodes=this.parent.nodeNames);break;case"paste":this.parent.pasteHandler(),v(this.parent);break;case"delete":ae(this.parent,"Delete");break;case"download":if("detailsview"===this.parent.activeModule)h=this.parent.detailsviewModule.gridObj.getSelectedRecords();else if("largeiconsview"===this.parent.activeModule)for(var d=this.parent.activeElements,p=0;p<d.length;p++)h[p]=R(this.parent,d[p]);else"navigationpane"===this.parent.activeModule&&0===this.parent.selectedItems.length&&(this.parent.notify("download-init",{}),h=this.parent.itemData);h.length>0&&se(this.parent,h);break;case"rename":this.parent.notify(Wt,{}),ae(this.parent,"Rename");break;case"selectall":this.parent.notify("select-all-init",{});break;case"refresh":w(this.parent);break;case"open":this.parent.visitedItem&&this.parent.notify(Ft,{target:this.parent.visitedItem});break;case"details":this.parent.getDetails();break;case"newfolder":ae(this.parent,"NewFolder");break;case"upload":document.getElementById(this.parent.element.id+"_upload").click();break;case"name":case"size":case"date":case"ascending":case"descending":B(this.parent,e);break;case"largeiconsview":this.changeLayout("LargeIcons");break;case"detailsview":this.changeLayout("Details")}}}},e.prototype.changeLayout=function(e){this.parent.view!==e&&(this.parent.setProperties({view:e},!0),H(this.parent,qt,this.parent.path))},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++)switch(i[t]){case"cssClass":this.contextMenu.cssClass=_(this.parent,"e-fe-popup");break;case"enableRtl":this.contextMenu.enableRtl=e.newProp.enableRtl}},e.prototype.addEventListener=function(){this.parent.on(_t,this.destroy,this),this.parent.on(Rt,this.onPropertyChanged,this),this.keyboardModule=new t.KeyboardEvents(this.contextMenu.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.removeEventListener=function(){this.parent.off(_t,this.destroy),this.parent.off(Rt,this.onPropertyChanged),this.keyboardModule.destroy()},e.prototype.keyActionHandler=function(e){switch(e.action){case"uparrow":case"downarrow":e.preventDefault()}},e.prototype.getModuleName=function(){return"contextmenu"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.contextMenu.destroy(),document.getElementById(this.parent.element.id+"_contextmenu")&&t.remove(document.getElementById(this.parent.element.id+"_contextmenu")))},e.prototype.getItemData=function(e){for(var t=[],i=0;i<e.length;i++){var n=void 0,s=this.getMenuId(e[i]),a=A(this.parent,e[i]);switch(e[i]){case"|":n={separator:!0};break;case"Open":n={id:s,text:a,iconCss:"e-icons e-fe-open"};break;case"Upload":n={id:s,text:a,iconCss:"e-icons e-fe-upload"};break;case"Cut":n={id:s,text:a,iconCss:It};break;case"Copy":n={id:s,text:a,iconCss:"e-icons e-fe-copy"};break;case"Paste":n={id:s,text:a,iconCss:"e-icons e-fe-paste"};break;case"Delete":n={id:s,text:a,iconCss:"e-icons e-fe-delete"};break;case"Rename":n={id:s,text:a,iconCss:"e-icons e-fe-rename"};break;case"NewFolder":n={id:s,text:a,iconCss:"e-icons e-fe-newfolder"};break;case"Details":n={id:s,text:a,iconCss:"e-icons e-fe-details"};break;case"SortBy":n={id:s,text:a,iconCss:"e-icons e-fe-sort",items:[{id:this.getMenuId("Name"),text:A(this.parent,"Name"),iconCss:"name"===this.parent.sortBy?at:null},{id:this.getMenuId("Size"),text:A(this.parent,"Size"),iconCss:"size"===this.parent.sortBy?at:null},{id:this.getMenuId("Date"),text:A(this.parent,"DateModified"),iconCss:"dateModified"===this.parent.sortBy?at:null},{separator:!0},{id:this.getMenuId("Ascending"),text:A(this.parent,"Ascending"),iconCss:"Ascending"===this.parent.sortOrder?st:null},{id:this.getMenuId("Descending"),text:A(this.parent,"Descending"),iconCss:"Descending"===this.parent.sortOrder?st:null}]};break;case"View":n={id:s,text:a,iconCss:"Details"===this.parent.view?Ct:St,items:[{id:this.getMenuId("largeiconsview"),text:A(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?null:st},{id:this.getMenuId("detailsview"),text:A(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?st:null}]};break;case"Refresh":n={id:s,text:a,iconCss:"e-icons e-fe-refresh"};break;case"SelectAll":n={id:s,text:a,iconCss:"e-icons e-fe-select"};break;case"Download":n={id:s,text:a,iconCss:"e-icons e-fe-download"};break;default:n={id:s,text:a}}t.push(n)}return t},e.prototype.getMenuId=function(e){return this.parent.element.id+"_cm_"+e.toLowerCase()},e}(),ei={NewFolder:"New folder",Upload:"Upload",Delete:"Delete",Rename:"Rename",Download:"Download",Cut:"Cut",Copy:"Copy",Paste:"Paste",SortBy:"Sort by",Refresh:"Refresh","Item-Selection":"item selected","Items-Selection":"items selected",View:"View",Details:"Details",SelectAll:"Select all",Open:"Open","Tooltip-NewFolder":"New folder","Tooltip-Upload":"Upload","Tooltip-Delete":"Delete","Tooltip-Rename":"Rename","Tooltip-Download":"Download","Tooltip-Cut":"Cut","Tooltip-Copy":"Copy","Tooltip-Paste":"Paste","Tooltip-SortBy":"Sort by","Tooltip-Refresh":"Refresh","Tooltip-Selection":"Clear selection","Tooltip-View":"View","Tooltip-Details":"Details","Tooltip-SelectAll":"Select all",Name:"Name",Size:"Size",DateModified:"Modified",DateCreated:"Date created",Modified:"Modified",Created:"Created",Location:"Location",Type:"Type",Ascending:"Ascending",Descending:"Descending","View-LargeIcons":"Large icons","View-Details":"Details",Search:"Search","Button-Ok":"OK","Button-Cancel":"Cancel","Button-Yes":"Yes","Button-No":"No","Button-Create":"Create","Button-Save":"Save","Header-NewFolder":"Folder","Content-NewFolder":"Enter your folder name","Header-Rename":"Rename","Content-Rename":"Enter your new name","Header-Rename-Confirmation":"Rename Confirmation","Content-Rename-Confirmation":"If you change a file name extension, the file might become unstable. Are you sure you want to change it?","Header-Delete":"Delete File","Content-Delete":"Are you sure you want to delete this file?","Header-Multiple-Delete":"Delete Multiple Files","Content-Multiple-Delete":"Are you sure you want to delete these {0} files?","Header-Duplicate":"File exists","Content-Duplicate":" already exists. Are you sure you want to replace it?","Header-Upload":"Upload Files",Error:"Error","Validation-Empty":"The file or folder name cannot be empty.","Validation-Invalid":'The file or folder name {0} contains invalid characters. Please use a different name. Valid file or folder names cannot end with a dot or space, and cannot contain any of the following characters: \\/:*?"<>|',"Validation-NewFolder-Exists":"A file or folder with the name {0} already exists.","Validation-Rename-Exists":"Cannot rename {0} to {1}: destination already exists.","Folder-Empty":"This folder is empty","File-Upload":"Drag files here to upload","Search-Empty":"No results found","Search-Key":"Try with different keywords"},ti=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ii=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},ni=function(e){function s(t,i){var n=e.call(this,t,i)||this;return n.selectedNodes=[],n.duplicateItems=[],n.previousPath=[],n.nextPath=[],n.uploadItem=[],n.deleteRecords=[],n.isFile=!1,n.sortOrder="Ascending",n.sortBy="name",n.enablePaste=!1,n.persistData=!1,n.isOpened=!1,n.searchedItems=[],o.Inject(Qt,$t,Zt),n}ti(s,e),o=s,s.prototype.getModuleName=function(){return"filemanager"},s.prototype.preRender=function(){this.ensurePath(),this.feParent=[],this.feFiles=[],t.setStyleAttribute(this.element,{width:t.formatUnit(this.width),height:t.formatUnit(this.height)}),this.isDevice=t.Browser.isDevice,this.isMobile=this.checkMobile(),this.isMobile&&this.setProperties({navigationPaneSettings:{visible:!1}},!0);var e=t.closest(this.element,".e-bigger");this.isBigger=!!e,n.createSpinner({target:this.element},t.createElement),this.addWrapper(),this.keyConfigs={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2"},this.localeObj=new t.L10n(this.getModuleName(),ei,this.locale)},s.prototype.getPersistData=function(){var e=["view","path","selectedItems"];return this.addOnPersist(e)},s.prototype.requiredModules=function(){var e=[];return e.push({member:"breadcrumbbar",args:[this]}),e.push({member:"largeiconsview",args:[this]}),this.toolbarSettings.visible&&e.push({member:"toolbar",args:[this]}),this.navigationPaneSettings.visible&&e.push({member:"navigationpane",args:[this]}),this.view&&e.push({member:"detailsview",args:[this]}),this.contextMenuSettings.visible&&!this.isDevice&&e.push({member:"contextmenu",args:[this]}),e},s.prototype.render=function(){this.initialize(),this.selectedItems=t.isNullOrUndefined(this.selectedItems)?[]:this.selectedItems,this.fileView=this.view,this.setRtl(this.enableRtl),this.addEventListeners(),H(this,this.path!==this.originalPath?Pt:Mt,this.path),this.adjustHeight(),t.isNullOrUndefined(this.navigationpaneModule)&&(this.splitterObj.collapse(0),t.select(".e-split-bar",this.element).classList.add(Et)),this.wireEvents()},s.prototype.ensurePath=function(){var e=this.path;t.isNullOrUndefined(e)&&(e="/"),0!==e.indexOf("/")&&(e="/"+e),e.lastIndexOf("/")!==e.length-1&&(e+="/"),this.originalPath=e,this.setProperties({path:"/"},!0),this.pathId=["fe_tree"],this.itemData=[]},s.prototype.initialize=function(){this.isMobile&&t.addClass([this.element],"e-fe-mobile"),this.allowMultiSelection&&t.addClass([this.element],"e-fe-cb-select"),this.addCssClass(null,this.cssClass),this.renderFileUpload()},s.prototype.addWrapper=function(){var e=this.createElement("div",{id:this.element.id+"_toolbar"});this.element.appendChild(e);var t=this.createElement("div",{id:this.element.id+"_layout",className:"e-layout"});this.element.appendChild(t);var n=this.createElement("div",{id:this.element.id+"_tree"});t.appendChild(n);var s=this.createElement("div",{id:this.element.id+"_content",className:"e-layout-content"});this.breadCrumbBarNavigation=this.createElement("div",{id:this.element.id+"_breadcrumbbar",className:"e-address"}),s.appendChild(this.breadCrumbBarNavigation);var a=this.createElement("div",{id:this.element.id+Je});s.appendChild(a);var o=this.createElement("div",{id:this.element.id+Xe,className:tt});s.appendChild(o);var r=this.createElement("span",{className:"e-fe-overlay"});s.appendChild(r),t.appendChild(s),this.splitterObj=new i.Splitter({paneSettings:[{size:"25%",min:this.navigationPaneSettings.minWidth.toString(),max:this.navigationPaneSettings.maxWidth.toString()},{size:"75%",min:"270px"}],width:"100%",resizing:this.splitterResize.bind(this)}),this.splitterObj.appendTo(t);var l=this.createElement("div",{id:this.element.id+$e});this.element.appendChild(l);var h=this.createElement("ul",{id:this.element.id+"_contextmenu"});this.element.appendChild(h);var d=this.createElement("div",{id:this.element.id+Qe});this.element.appendChild(d);var p=this.createElement("div",{id:this.element.id+Ze});this.element.appendChild(p);var c=this.createElement("div",{id:this.element.id+"_upload_dialog"});this.element.appendChild(c)},s.prototype.adjustHeight=function(){var e=t.select("#"+this.element.id+"_toolbar",this.element),i=this.toolbarModule?e.offsetHeight:0;this.splitterObj.height=(this.element.clientHeight-i).toString(),this.splitterObj.dataBind()},s.prototype.splitterResize=function(){this.notify("splitter-resize",{})},s.prototype.splitterAdjust=function(){var e=t.select(".e-split-bar",this.element);this.navigationPaneSettings.visible?(this.splitterObj.expand(0),e.classList.remove(Et)):(this.splitterObj.collapse(0),e.classList.add(Et))},s.prototype.addCssClass=function(e,i){t.isNullOrUndefined(e)||""===e||t.removeClass([this.element],e.split(" ")),t.isNullOrUndefined(i)||""===i||t.addClass([this.element],i.split(" "))},s.prototype.showSpinner=function(){n.showSpinner(this.element)},s.prototype.hideSpinner=function(){n.hideSpinner(this.element)},s.prototype.onContextMenu=function(e){e.preventDefault()},s.prototype.checkMobile=function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(t.Browser.userAgent.toLowerCase())&&/mobile/i.test(t.Browser.userAgent.toLowerCase())},s.prototype.renderFileUpload=function(){var e=this.element.id+"_upload",t=this.createElement("input",{id:e,attrs:{name:"uploadFiles",type:"file"}});this.element.appendChild(t),this.uploadDialogObj=new n.Dialog({header:A(this,"Header-Upload"),content:t,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!1,isModal:!0,width:"350px",target:"#"+this.element.id,locale:this.locale,allowDragging:!0,position:{X:"center",Y:"center"},enableRtl:this.enableRtl,open:this.onOpen.bind(this),close:this.onClose.bind(this)}),this.uploadDialogObj.appendTo("#"+this.element.id+"_upload_dialog"),this.renderUploadBox()},s.prototype.renderUploadBox=function(){var e=this.ajaxSettings.uploadUrl?this.ajaxSettings.uploadUrl:this.ajaxSettings.url;this.uploadObj=new a.Uploader({dropArea:t.select("#"+this.element.id+"_content",this.element),asyncSettings:{saveUrl:e,removeUrl:e},locale:this.locale,enableRtl:this.enableRtl,uploading:this.onUploading.bind(this),removing:this.onRemoving.bind(this),clearing:this.onClearing.bind(this),selected:this.onSelected.bind(this),success:this.onUploadSuccess.bind(this),failure:this.onUploadFailure.bind(this),autoUpload:this.uploadSettings.autoUpload,minFileSize:this.uploadSettings.minFileSize,maxFileSize:this.uploadSettings.maxFileSize}),this.uploadObj.appendTo("#"+this.element.id+"_upload")},s.prototype.updateUploader=function(){this.uploadObj.autoUpload=this.uploadSettings.autoUpload,this.uploadObj.minFileSize=this.uploadSettings.minFileSize,this.uploadObj.maxFileSize=this.uploadSettings.maxFileSize,this.uploadObj.dataBind()},s.prototype.onOpen=function(){this.isOpened=!0,this.uploadDialogObj.element.focus()},s.prototype.onClose=function(){this.isOpened=!1,this.uploadObj.clearAll()},s.prototype.onUploading=function(e){e.customFormData=[{path:this.path},{action:"Save"}]},s.prototype.onRemoving=function(e){e.customFormData=[{path:this.path},{action:"Remove"}],1===this.uploadObj.getFilesData().length&&this.uploadDialogObj.hide()},s.prototype.onClearing=function(){this.isOpened&&this.uploadDialogObj.hide()},s.prototype.onSelected=function(){this.uploadDialogObj.show()},s.prototype.onUploadSuccess=function(e){this.trigger("onSuccess",{action:"Upload",result:e}),H(this,At,this.path)},s.prototype.onUploadFailure=function(e){this.trigger("onError",{action:"Upload",error:e})},s.prototype.onInitialEnd=function(){F(this,this.path)},s.prototype.addEventListeners=function(){this.on(Bt,this.showSpinner,this),this.on(Ut,this.hideSpinner,this),this.on(Pt,this.onInitialEnd,this),t.EventHandler.add(this.element,"contextmenu",this.onContextMenu,this)},s.prototype.removeEventListeners=function(){this.isDestroyed||(this.off(Bt,this.showSpinner),this.off(Ut,this.hideSpinner),this.off(Pt,this.onInitialEnd),t.EventHandler.remove(this.element,"contextmenu",this.onContextMenu))},s.prototype.resizeHandler=function(){this.notify("resize-end",{})},s.prototype.keyActionHandler=function(e){switch(e.action){case"altN":e.preventDefault(),this.itemData=[S(this)],ae(this,"NewFolder");break;case"f5":e.preventDefault(),w(this);break;case"ctrlShift1":e.preventDefault(),this.fileView="Details",this.setProperties({view:"Details"},!0),H(this,qt,"/");break;case"ctrlShift2":e.preventDefault(),this.fileView="LargeIcons",this.setProperties({view:"LargeIcons"},!0),H(this,qt,"/")}},s.prototype.wireEvents=function(){window.addEventListener("resize",this.resizeHandler.bind(this)),this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},s.prototype.unWireEvents=function(){this.keyboardModule.destroy()},s.prototype.setPath=function(){this.ensurePath(),this.notify(zt,{selectedNode:this.pathId[0]}),H(this,this.path!==this.originalPath?Pt:Mt,this.path)},s.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"ajaxSettings":this.ajaxSettingSetModel(e);break;case"allowMultiSelection":this.allowMultiSelection?t.addClass([this.element],"e-fe-cb-select"):t.removeClass([this.element],"e-fe-cb-select"),1===this.selectedItems.length?this.singleSelection=this.selectedItems[0]:this.singleSelection=null,this.notify(Rt,{module:"common",newProp:e,oldProp:i});break;case"cssClass":this.addCssClass(i.cssClass,e.cssClass),this.notify(Rt,{module:"common",newProp:e,oldProp:i});break;case"detailsViewSettings":this.notify(Rt,{module:"detailsview",newProp:e,oldProp:i});break;case"enableRtl":this.setRtl(e.enableRtl),this.notify(Rt,{module:"common",newProp:e,oldProp:i});break;case"height":var a=t.isNullOrUndefined(e.height)?e.height:t.formatUnit(e.height);t.setStyleAttribute(this.element,{height:a}),this.adjustHeight(),this.notify(Rt,{module:"common",newProp:e,oldProp:i});break;case"locale":t.isNullOrUndefined(e.enableRtl)||this.setProperties({enableRtl:e.enableRtl},!0),this.localeSetModelOption(e);break;case"navigationPaneSettings":this.splitterAdjust(),this.notify(Rt,{module:"navigationpane",newProp:e,oldProp:i});break;case"path":this.setPath();break;case"searchSettings":t.isNullOrUndefined(e.searchSettings.allowSearchOnTyping)||this.setProperties({searchSettings:{allowSearchOnTyping:e.searchSettings.allowSearchOnTyping}},!0),t.isNullOrUndefined(e.searchSettings.ignoreCase)&&this.setProperties({searchSettings:{ignoreCase:e.searchSettings.ignoreCase}},!0),t.isNullOrUndefined(e.searchSettings.filterType)&&this.setProperties({searchSettings:{filterType:e.searchSettings.filterType}},!0),this.notify(Rt,{module:"breadcrumbbar",newProp:e,oldProp:i});break;case"selectedItems":"Details"===this.view?this.notify(Rt,{module:"detailsview",newProp:e,oldProp:i}):"LargeIcons"===this.view&&this.notify(Rt,{module:"largeiconsview",newProp:e,oldProp:i});break;case"showFileExtension":case"showHiddenItems":this.notify(Rt,{module:"common",newProp:e,oldProp:i});break;case"showThumbnail":this.notify(Rt,{module:"largeiconsview",newProp:e,oldProp:i});break;case"toolbarSettings":this.adjustHeight(),this.notify(Rt,{module:"toolbar",newProp:e,oldProp:i});break;case"uploadSettings":this.updateUploader();break;case"view":"Details"===e.view?this.notify(Rt,{module:"detailsview",newProp:e,oldProp:i}):"LargeIcons"===e.view&&this.notify(Rt,{module:"largeiconsview",newProp:e,oldProp:i});break;case"width":var o=t.isNullOrUndefined(e.width)?e.width:t.formatUnit(e.width);t.setStyleAttribute(this.element,{width:o}),this.notify(Rt,{module:"toolbar",newProp:e,oldProp:i})}},s.prototype.ajaxSettingSetModel=function(i){t.isNullOrUndefined(i.ajaxSettings.url)||this.setProperties({ajaxSettings:{url:i.ajaxSettings.url}},!0),t.isNullOrUndefined(i.ajaxSettings.uploadUrl)||this.setProperties({ajaxSettings:{uploadUrl:i.ajaxSettings.uploadUrl}},!0),t.isNullOrUndefined(i.ajaxSettings.downloadUrl)||this.setProperties({ajaxSettings:{downloadUrl:i.ajaxSettings.downloadUrl}},!0),t.isNullOrUndefined(i.ajaxSettings.getImageUrl)||this.setProperties({ajaxSettings:{getImageUrl:i.ajaxSettings.getImageUrl}},!0),this.setProperties({path:"/"},!0),this.setProperties({selectedItems:[]},!0),e.prototype.refresh.call(this)},s.prototype.localeSetModelOption=function(t){this.uploadObj.locale=t.locale,e.prototype.refresh.call(this)},s.prototype.destroy=function(){this.isDestroyed||(this.refreshing||this.notify(_t,{}),this.uploadObj.destroy(),this.uploadObj=null,this.uploadDialogObj.destroy(),this.uploadDialogObj=null,this.splitterObj.destroy(),this.splitterObj=null,this.dialogObj&&(this.dialogObj.destroy(),this.dialogObj=null),this.viewerObj&&(this.viewerObj.destroy(),this.viewerObj=null),this.extDialogObj&&(this.extDialogObj.destroy(),this.extDialogObj=null),this.element.removeAttribute("style"),this.element.removeAttribute("tabindex"),this.removeEventListeners(),this.unWireEvents(),this.addCssClass(this.cssClass,null),t.removeClass([this.element],[Nt,"e-fe-mobile","e-fe-cb-select"]),this.element.innerHTML="",e.prototype.destroy.call(this))},s.prototype.disableToolbarItems=function(e){t.isNullOrUndefined(e)||this.toolbarModule.enableItems(e,!1)},s.prototype.enableToolbarItems=function(e){t.isNullOrUndefined(e)||this.toolbarModule.enableItems(e,!0)},s.prototype.refreshFiles=function(){w(this)},s.prototype.fileOperation=function(e,t){for(var i=0,n=e;i<e.length;)"Remove"!==t?this.selectedNodes.push(n[i].name):this.selectedNodes=this.selectedNodes,"Remove"===t?this.deleteRecords.push(n[i].name):this.deleteRecords=this.deleteRecords,i++},s.prototype.getDetails=function(){v(this),this.targetPath=this.path,this.activeElements&&0===this.activeElements.length&&(this.activeElements=this.element.querySelectorAll("."+rt));var e=b("FileInfo",null,this);e=0!==e.length?e:b("FileInfo",!1,this),this.selectedNodes=[],this.fileOperation(e),0!==this.selectedNodes.length&&""!==this.targetPath||(this.selectedNodes[0]=""),G(this,this.selectedNodes,this.targetPath,"GetDetails")},s.prototype.pasteHandler=function(){0!==this.selectedNodes.length&&("MoveTo"===this.fileAction&&this.targetPath!==this.path||"CopyTo"===this.fileAction?K(this,this.targetPath,this.selectedNodes,this.path,this.fileAction,this.navigationpaneModule,[]):v(this))},s.prototype.deleteHandler=function(e){this.deleteRecords=[],this.fileOperation(e,"Remove"),W(this,this.deleteRecords,this.targetPath,"Remove",this.navigationpaneModule),this.deleteRecords=[]},s.prototype.setRtl=function(e){e?this.addCssClass(null,Nt):this.addCssClass(Nt,null),this.uploadObj&&(this.uploadDialogObj.enableRtl=e,this.uploadObj.enableRtl=e)};var o;return ii([t.Complex({},je)],s.prototype,"ajaxSettings",void 0),ii([t.Property(!0)],s.prototype,"allowMultiSelection",void 0),ii([t.Complex({},He)],s.prototype,"contextMenuSettings",void 0),ii([t.Property("")],s.prototype,"cssClass",void 0),ii([t.Complex({},Ae)],s.prototype,"detailsViewSettings",void 0),ii([t.Property(!1)],s.prototype,"enablePersistence",void 0),ii([t.Property(!1)],s.prototype,"enableRtl",void 0),ii([t.Property("400px")],s.prototype,"height",void 0),ii([t.Property("LargeIcons")],s.prototype,"view",void 0),ii([t.Complex({},Ke)],s.prototype,"navigationPaneSettings",void 0),ii([t.Property("/")],s.prototype,"path",void 0),ii([t.Complex({},Me)],s.prototype,"searchSettings",void 0),ii([t.Property()],s.prototype,"selectedItems",void 0),ii([t.Property(!0)],s.prototype,"showFileExtension",void 0),ii([t.Property(!1)],s.prototype,"showHiddenItems",void 0),ii([t.Property(!0)],s.prototype,"showThumbnail",void 0),ii([t.Complex({},De)],s.prototype,"toolbarSettings",void 0),ii([t.Complex({},Ye)],s.prototype,"uploadSettings",void 0),ii([t.Property("100%")],s.prototype,"width",void 0),ii([t.Event()],s.prototype,"beforeFileLoad",void 0),ii([t.Event()],s.prototype,"beforeFileOpen",void 0),ii([t.Event()],s.prototype,"beforeSend",void 0),ii([t.Event()],s.prototype,"created",void 0),ii([t.Event()],s.prototype,"destroyed",void 0),ii([t.Event()],s.prototype,"fileSelect",void 0),ii([t.Event()],s.prototype,"menuClick",void 0),ii([t.Event()],s.prototype,"menuOpen",void 0),ii([t.Event()],s.prototype,"onError",void 0),ii([t.Event()],s.prototype,"onSuccess",void 0),ii([t.Event()],s.prototype,"toolbarClick",void 0),s=o=ii([t.NotifyPropertyChanges],s)}(t.Component),si=function(){function e(e){this.default=["Delete","Rename","Download","Cut","Copy","Paste"],this.single=["Delete","Rename","Download","Cut","Copy"],this.multiple=["Delete","Download","Cut","Copy","Refresh"],this.selection=["NewFolder","Upload","SortBy","Refresh"],this.parent=e,this.render(),this.addEventListener()}return e.prototype.render=function(){this.items=this.toolbarItemData(this.getItems(this.parent.toolbarSettings.items)),this.toolbarObj=new h.Toolbar({items:this.items,created:this.toolbarCreateHandler.bind(this),overflowMode:"Popup",clicked:this.onClicked.bind(this),enableRtl:this.parent.enableRtl}),this.toolbarObj.appendTo("#"+this.parent.element.id+"_toolbar")},e.prototype.getItems=function(e){var t=e.slice();return this.parent.isDevice&&this.parent.allowMultiSelection&&t.push("SelectAll"),t},e.prototype.onClicked=function(e){if(!t.isNullOrUndefined(e.item)&&e.item.id){var i,n=e.item.id.substr((this.parent.element.id+"_tb_").length);"refresh"===n||"newfolder"===n?(i=S(this.parent),this.parent.itemData=[i]):i=C(this.parent);var s={cancel:!1,fileDetails:i,item:e.item};if(this.parent.trigger("toolbarClick",s),!s.cancel)switch(n){case"sortby":var a=t.closest(e.originalEvent.target,".e-toolbar-item");a&&a.classList.contains("e-toolbar-popup")&&(e.cancel=!0);break;case"newfolder":ae(this.parent,"NewFolder");break;case"cut":N(this.parent),this.parent.nodeNames&&this.parent.fileOperation(this.parent.nodeNames);break;case"copy":j(this.parent),this.parent.nodeNames&&this.parent.fileOperation(this.parent.nodeNames),"navigationPane"===this.parent.activeModule&&(this.parent.navigationpaneModule.copyNodes=this.parent.nodeNames);break;case"delete":ae(this.parent,"Delete");break;case"details":this.parent.getDetails();break;case"paste":this.parent.pasteHandler();break;case"refresh":w(this.parent);break;case"download":if(!(this.parent.selectedItems.length>0))return;if("LargeIcons"===this.parent.view){for(var o=[],r=t.selectAll(".e-active",this.parent.largeiconsviewModule.listElements),l=0;l<r.length;l++)o[l]=R(this.parent,r[l]);se(this.parent,o)}else se(this.parent,this.parent.detailsviewModule.gridObj.getSelectedRecords());break;case"rename":this.parent.notify(Wt,{}),ae(this.parent,"Rename");break;case"upload":t.select("#"+this.parent.element.id+"_upload",this.parent.element).click();break;case"selectall":this.parent.notify("select-all-init",{});break;case"selection":this.parent.notify("clear-all-init",{})}}},e.prototype.toolbarCreateHandler=function(){if(!t.isNullOrUndefined(t.select("#"+this.getId("SortBy"),this.parent.element))){var e=[{id:this.getPupupId("name"),text:A(this.parent,"Name"),iconCss:at},{id:this.getPupupId("size"),text:A(this.parent,"Size")},{id:this.getPupupId("date"),text:A(this.parent,"DateModified")},{separator:!0},{id:this.getPupupId("ascending"),text:A(this.parent,"Ascending"),iconCss:st},{id:this.getPupupId("descending"),text:A(this.parent,"Descending")}];this.buttonObj=new l.DropDownButton({items:e,cssClass:_(this.parent,"e-fe-popup"),select:B.bind(this,this.parent),enableRtl:this.parent.enableRtl,iconCss:"e-icons e-fe-sort"}),this.buttonObj.appendTo("#"+this.getId("SortBy"))}if(!t.isNullOrUndefined(t.select("#"+this.parent.element.id+"_view",this.parent.element))){var i=[{id:this.getPupupId("large"),text:'<span class="e-icons e-fe-large e-menu-icon"></span>'+A(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?"":st},{id:this.getPupupId("details"),text:'<span class="e-icons e-fe-grid e-menu-icon"></span>'+A(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?st:""}];this.layoutBtnObj=new l.DropDownButton({iconCss:"Details"===this.parent.view?Ct:St,cssClass:_(this.parent,"e-caret-hide e-fe-popup"),items:i,select:this.layoutChange.bind(this),enableRtl:this.parent.enableRtl}),this.layoutBtnObj.appendTo("#"+this.parent.element.id+"_view")}this.hideItems(this.default,!0),this.hideStatus()},e.prototype.updateSortByButton=function(){for(var e=this.buttonObj.items,t=0;t<e.length;t++)e[t].id===this.getPupupId("name")?e[t].iconCss="name"===this.parent.sortBy?at:"":e[t].id===this.getPupupId("size")?e[t].iconCss="size"===this.parent.sortBy?at:"":e[t].id===this.getPupupId("date")?e[t].iconCss="dateModified"===this.parent.sortBy?at:"":e[t].id===this.getPupupId("ascending")?e[t].iconCss="Ascending"===this.parent.sortOrder?st:"":e[t].id===this.getPupupId("descending")&&(e[t].iconCss="Descending"===this.parent.sortOrder?st:"")},e.prototype.getPupupId=function(e){return this.parent.element.id+"_ddl_"+e.toLowerCase()},e.prototype.layoutChange=function(e){"Details"===this.parent.view?e.item.id===this.getPupupId("large")&&this.updateLayout("LargeIcons"):e.item.id===this.getPupupId("details")&&this.updateLayout("Details")},e.prototype.updateLayout=function(e){this.parent.setProperties({view:e},!0);var t;this.parent.breadcrumbbarModule.searchObj.value&&""===this.parent.breadcrumbbarModule.searchObj.value&&this.parent.notify("path-column",{args:this.parent}),t="startWith"===this.parent.searchSettings.filterType?"*"+this.parent.breadcrumbbarModule.searchObj.value:"endsWith"===this.parent.searchSettings.filterType?this.parent.breadcrumbbarModule.searchObj.value+"*":"*"+this.parent.breadcrumbbarModule.searchObj.value+"*",0===this.parent.breadcrumbbarModule.searchObj.value.length?H(this.parent,qt,this.parent.path):ie(this.parent,qt,this.parent.path,t,!1,!1)},e.prototype.toolbarItemData=function(e){var t=[],i="Both";this.parent.isMobile&&(i="Overflow");for(var n=0;n<e.length;n++){var s=void 0,a=this.getId(e[n]),o=A(this.parent,e[n]),r=A(this.parent,"Tooltip-"+e[n]);switch(e[n]){case"|":s={type:"Separator"};break;case"Upload":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-upload",showTextOn:i};break;case"SortBy":s={id:a,tooltipText:r,template:'<button id="'+a+'" class="e-tbar-btn e-tbtn-txt" tabindex="-1">'+('<span class="e-tbar-btn-text e-tbar-ddb-text">'+o+"</span>")+"</button>"};break;case"Refresh":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-refresh",showTextOn:i};break;case"Selection":s={id:a,tooltipText:r,overflow:"Show",align:"Right",template:'<span class="e-status">2 '+o+'</span><span class="e-icons e-fe-clear"></span>'};break;case"View":var l=this.parent.element.id+"_view";s={id:a,tooltipText:r,prefixIcon:"Details"===this.parent.view?Ct:St,overflow:"Show",align:"Right",template:'<button id="'+l+'" class="e-tbar-btn e-tbtn-txt" tabindex="-1"></button>'};break;case"Details":s={id:a,tooltipText:r,prefixIcon:"e-icons e-fe-details",overflow:"Show",align:"Right"};break;case"NewFolder":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-newfolder",showTextOn:i};break;case"Cut":s={id:a,text:o,tooltipText:r,prefixIcon:It,showTextOn:i};break;case"Copy":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-copy",showTextOn:i};break;case"Paste":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-paste",showTextOn:i};break;case"Delete":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-delete",showTextOn:i};break;case"Rename":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-rename",showTextOn:i};break;case"Download":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-download",showTextOn:i};break;case"SelectAll":s={id:a,text:o,tooltipText:r,prefixIcon:"e-icons e-fe-select",showTextOn:i};break;default:s={id:a,text:o,tooltipText:r}}t.push(s)}return t},e.prototype.getId=function(e){return this.parent.element.id+"_tb_"+e.toLowerCase()},e.prototype.addEventListener=function(){this.parent.on(Rt,this.onPropertyChanged,this),this.parent.on(Ht,this.onSelectionChanged,this),this.parent.on(qt,this.onLayoutChange,this),this.parent.on(Yt,this.showPaste,this),this.parent.on(Jt,this.hidePaste,this),this.parent.on(_t,this.destroy,this),this.parent.on(Kt,this.updateSortByButton,this)},e.prototype.reRenderToolbar=function(e){void 0!==e.newProp.toolbarSettings.items&&(this.items=this.toolbarItemData(this.getItems(e.newProp.toolbarSettings.items)),this.toolbarObj.items=this.items,this.toolbarObj.dataBind())},e.prototype.onSelectionChanged=function(e){this.hideStatus(),this.hideItems(this.single,!0),this.hideItems(this.selection,!1),1===this.parent.selectedItems.length?(this.hideItems(this.single,!1),this.hideItems(this.selection,!0)):this.parent.selectedItems.length>1&&(this.hideItems(this.multiple,!1),this.hideItems(this.selection,!0));var i=t.select(".e-status",this.toolbarObj.element);this.parent.selectedItems.length>0&&i&&(1===this.parent.selectedItems.length?i.textContent=this.parent.selectedItems.length+" "+A(this.parent,"Item-Selection"):i.textContent=this.parent.selectedItems.length+" "+A(this.parent,"Items-Selection"),this.toolbarObj.hideItem(i.parentElement,!1))},e.prototype.hideItems=function(e,i){for(var n=0;n<e.length;n++){var s=t.select("#"+this.getId(e[n]),this.parent.element);s&&this.toolbarObj.hideItem(s.parentElement,i)}},e.prototype.hideStatus=function(){var e=t.select(".e-status",this.toolbarObj.element);e&&this.toolbarObj.hideItem(e.parentElement,!0)},e.prototype.showPaste=function(){this.hideItems(["Paste"],!1)},e.prototype.hidePaste=function(){this.hideItems(["Paste"],!0)},e.prototype.onLayoutChange=function(e){if(this.layoutBtnObj){this.layoutBtnObj.iconCss="Details"===this.parent.view?Ct:St;for(var t=this.layoutBtnObj.items,i=0;i<t.length;i++)t[i].id===this.getPupupId("large")?t[i].iconCss="LargeIcons"===this.parent.view?st:"":t[i].id===this.getPupupId("details")&&(t[i].iconCss="Details"===this.parent.view?st:"")}},e.prototype.removeEventListener=function(){this.parent.off(Rt,this.onPropertyChanged),this.parent.off(Ht,this.onSelectionChanged),this.parent.off(qt,this.onLayoutChange),this.parent.off(Yt,this.showPaste),this.parent.off(Jt,this.hidePaste),this.parent.off(_t,this.destroy),this.parent.off(Kt,this.updateSortByButton)},e.prototype.getModuleName=function(){return"toolbar"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++)switch(i[t]){case"cssClass":this.buttonObj&&(this.buttonObj.cssClass=_(this.parent,"e-fe-popup")),this.layoutBtnObj&&(this.layoutBtnObj.cssClass=_(this.parent,"e-caret-hide e-fe-popup"));break;case"height":case"width":this.toolbarObj.refreshOverflow();break;case"toolbarSettings":this.reRenderToolbar(e);break;case"enableRtl":var n=e.newProp.enableRtl;this.toolbarObj.enableRtl=n,this.toolbarObj.dataBind(),this.buttonObj&&(this.buttonObj.enableRtl=n,this.buttonObj.dataBind()),this.layoutBtnObj&&(this.layoutBtnObj.enableRtl=n,this.layoutBtnObj.dataBind())}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.buttonObj&&this.buttonObj.destroy(),this.layoutBtnObj&&this.layoutBtnObj.destroy(),this.toolbarObj.destroy())},e.prototype.enableItems=function(e,i){for(var n=0;n<e.length;n++){var s=t.select("#"+this.getId(e[n]),this.parent.element);s&&this.toolbarObj.enableItems(s.parentElement,i)}},e}(),ai=function(){function e(e){this.treeNodes=[],this.removeNodes=[],this.expandTree=!1,this.parent=e,this.addEventListener(),this.keyConfigs={altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftF10:"shift+F10",f2:"f2"}}return e.prototype.onInit=function(e){if(t.isNullOrUndefined(this.treeObj)){var i=t.getValue("/",this.parent.feParent);t.setValue("icon","e-fe-folder",i),this.rootNode=t.getValue("name",t.getValue("/",this.parent.feParent)),this.treeObj=new h.TreeView({fields:{dataSource:[i],id:"nodeId",text:"name",hasChildren:"hasChild",iconCss:"icon"},nodeSelected:this.onNodeSelected.bind(this),nodeExpanding:this.onNodeExpand.bind(this),allowEditing:!0,nodeEditing:this.onNodeEditing.bind(this),drawNode:this.onDrowNode.bind(this),enableRtl:this.parent.enableRtl}),this.treeObj.appendTo("#"+this.parent.element.id+"_tree"),this.treeObj.element.style.width="25%",this.parent.persistData=!0,this.wireEvents()}},e.prototype.onDrowNode=function(e){var t={element:e.node,fileDetails:e.nodeData,module:"NavigationPane"};this.parent.trigger("beforeFileLoad",t)},e.prototype.addChild=function(e,t,i){var n=k(e);if(n.length>0){for(var s=0,a=n;s<n.length;)a[s].icon="e-fe-folder",s++;this.treeObj.addNodes(n,t,null,i)}},e.prototype.onNodeSelected=function(e){if(this.parent.breadcrumbbarModule&&this.parent.breadcrumbbarModule.searchObj&&(this.parent.breadcrumbbarModule.searchObj.element.value=""),this.parent.searchedItems=[],this.parent.activeElements=this.treeObj.element.querySelectorAll("."+rt),e.isInteracted){var i=t.getValue("text",e.nodeData);this.activeNode=e.node,this.parent.activeModule="navigationpane",this.parent.persistData||(this.parent.selectedItems=[]),c(e.node,i,this.parent),this.expandNodeTarget=null,e.node.querySelector(".e-icons")&&null===e.node.querySelector("."+it)&&(this.expandNodeTarget="add"),this.parent.itemData=this.treeObj.getTreeData(t.getValue("id",e.nodeData)),H(this.parent,At,this.parent.path),this.parent.visitedItem=e.node}},e.prototype.onNodeExpand=function(e){if(e.isInteracted){var i=u(e.node,t.getValue("text",e.nodeData));null===e.node.querySelector("."+it)&&(this.expandNodeTarget=e.node.getAttribute("data-uid"),this.parent.expandedId=this.expandNodeTarget,this.parent.itemData=this.treeObj.getTreeData(t.getValue("id",e.nodeData)),H(this.parent,"node-expand",i))}},e.prototype.onNodeExpanded=function(e){this.addChild(e.files,this.expandNodeTarget,!1),this.parent.expandedId=null},e.prototype.onNodeEditing=function(e){t.isNullOrUndefined(e.innerHtml)||(e.cancel=!0)},e.prototype.onPathChanged=function(e){var i=t.getValue(this.parent.path,this.parent.feFiles);if("add"===this.expandNodeTarget){var n=t.select('[data-uid="'+this.treeObj.selectedNodes[0]+'"]',this.treeObj.element),s=t.select(".e-list-parent",n);t.isNullOrUndefined(s)&&this.addChild(e.files,this.treeObj.selectedNodes[0],!0),this.expandNodeTarget=""}t.isNullOrUndefined(i)&&t.setValue(this.parent.path,e.files,this.parent.feFiles)},e.prototype.updateTree=function(e){var i=this.treeObj.selectedNodes[0],n=-1!==this.treeObj.expandedNodes.indexOf(i);this.removeChildNodes(i),t.setValue(this.parent.path,e.files,this.parent.feFiles),this.addChild(e.files,i,!n)},e.prototype.removeChildNodes=function(e){var i=t.select('[data-uid="'+e+'"]',this.treeObj.element),n=t.select(".e-list-parent",i),s=n?Array.prototype.slice.call(n.children):null;this.treeObj.removeNodes(s)},e.prototype.onOpenEnd=function(e){var t=this.parent.pathId[this.parent.pathId.length-1];this.treeObj.expandAll(this.treeObj.selectedNodes),this.treeObj.selectedNodes=[t],this.expandNodeTarget="add",this.onPathChanged(e)},e.prototype.onOpenInit=function(e){"navigationpane"===this.parent.activeModule&&e.target.querySelector(".e-icons")&&this.treeObj.expandAll(this.treeObj.selectedNodes)},e.prototype.onInitialEnd=function(e){this.onInit(e),this.addChild(e.files,t.getValue("nodeId",e.cwd),!1)},e.prototype.onFinalizeEnd=function(e){this.onInit(e);var i=t.getValue("nodeId",e.cwd);this.removeChildNodes(i),this.addChild(e.files,i,!1),this.treeObj.selectedNodes=[this.parent.pathId[this.parent.pathId.length-1]]},e.prototype.onCreateEnd=function(e){this.updateTree(e)},e.prototype.onDeleteEnd=function(e){if("navigationpane"===this.parent.activeModule){var i=this.treeObj.selectedNodes[0],n=t.select('[data-uid="'+i+'"]',this.treeObj.element),s=t.closest(n,".e-list-parent").parentElement;this.treeObj.selectedNodes=[s.getAttribute("data-uid")],this.treeObj.dataBind()}this.updateTree(e)},e.prototype.onRefreshEnd=function(e){this.updateTree(e)},e.prototype.onRenameInit=function(){0===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onRenameEnd=function(e){var t=new s.DataManager(this.treeObj.getTreeData()).executeLocal((new s.Query).where(this.treeObj.fields.text,"equal",this.parent.currentItemText,!1));t[0]&&this.treeObj.updateNode(t[0][this.treeObj.fields.id].toString(),this.parent.renameText)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++)switch(i[t]){case"enableRtl":this.treeObj&&(this.treeObj.enableRtl=e.newProp.enableRtl,this.treeObj.dataBind());break;case"navigationPaneSettings":H(this.parent,Mt,"/")}},e.prototype.onDownLoadInit=function(){this.updateActionData()},e.prototype.onSelectionChanged=function(e){this.treeObj.selectedNodes=[e.selectedNode]},e.prototype.onClearPathInit=function(e){this.removeChildNodes(e.selectedNode)},e.prototype.addEventListener=function(){this.parent.on(Rt,this.onPropertyChanged,this),this.parent.on("download-init",this.onDownLoadInit,this),this.parent.on(Pt,this.onInitialEnd,this),this.parent.on(Mt,this.onFinalizeEnd,this),this.parent.on(At,this.onPathChanged,this),this.parent.on("node-expand",this.onNodeExpanded,this),this.parent.on(kt,this.onCreateEnd,this),this.parent.on(Lt,this.onDeleteEnd,this),this.parent.on(Tt,this.onRefreshEnd,this),this.parent.on("update-tree-selection",this.onSelectionChanged,this),this.parent.on(Ft,this.onOpenInit,this),this.parent.on(Vt,this.onOpenEnd,this),this.parent.on(_t,this.destroy,this),this.parent.on(Wt,this.onRenameInit,this),this.parent.on(Gt,this.onRenameEnd,this),this.parent.on(zt,this.onClearPathInit,this)},e.prototype.removeEventListener=function(){this.parent.off(Pt,this.onInitialEnd),this.parent.off("download-init",this.onDownLoadInit),this.parent.off(Mt,this.onFinalizeEnd),this.parent.off(Rt,this.onPropertyChanged),this.parent.off(At,this.onPathChanged),this.parent.off("update-tree-selection",this.onSelectionChanged),this.parent.off("node-expand",this.onNodeExpanded),this.parent.off(kt,this.onCreateEnd),this.parent.off(Tt,this.onRefreshEnd),this.parent.off(Ft,this.onOpenInit),this.parent.off(Vt,this.onOpenEnd),this.parent.off(_t,this.destroy),this.parent.off(Wt,this.onRenameInit),this.parent.off(Gt,this.onRefreshEnd),this.parent.off(zt,this.onClearPathInit),this.parent.off(Lt,this.onDeleteEnd)},e.prototype.getModuleName=function(){return"navigationpane"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.treeObj&&(this.unWireEvents(),this.treeObj.destroy()))},e.prototype.wireEvents=function(){this.keyboardModule=new t.KeyboardEvents(this.treeObj.element,{keyAction:this.keyDown.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.unWireEvents=function(){this.keyboardModule.destroy()},e.prototype.keyDown=function(e){var t=e.action,i=this.parent;switch(t){case"altEnter":this.parent.getDetails();break;case"esc":v(this.parent),this.parent.selectedNodes=[],this.treeNodes=[];break;case"del":this.removeNodes=[],ae(this.parent,"Delete");break;case"ctrlC":j(this.parent),i.fileOperation(this.parent.nodeNames),this.copyNodes=this.parent.nodeNames;break;case"ctrlV":i.pasteHandler();break;case"ctrlX":N(this.parent),i.fileOperation(this.parent.nodeNames);break;case"shiftF10":se(this.parent,this.parent.detailsviewModule.gridObj.getSelectedRecords());break;case"f2":0===this.parent.selectedItems.length&&(this.updateRenameData(),ae(this.parent,"Rename"))}},e.prototype.updateRenameData=function(){this.updateActionData(),this.parent.currentItemText=t.getValue("name",this.parent.itemData[0])},e.prototype.updateActionData=function(){var e=this.treeObj.getTreeData(this.treeObj.selectedNodes[0])[0];this.parent.itemData=[e],this.parent.isFile=!1},e.prototype.moveNode=function(){this.treeObj.moveNodes(this.treeNodes,this.treeObj.selectedNodes[0],null);this.parent;v(this.parent),this.treeNodes=[]},e.prototype.removeNode=function(){this.treeObj.removeNodes(this.removeNodes);this.parent;v(this.parent),this.removeNodes=[]},e.prototype.copyNode=function(){this.treeObj.addNodes(this.copyNodes,this.activeNode,null);this.parent;v(this.parent)},e}();d.Grid.Inject(d.Resize,d.ContextMenu,d.Sort,d.VirtualScroll);var oi=function(){function e(e){this.isInteracted=!0,this.pasteOperation=!1,this.uploadOperation=!1,this.count=0,this.isRendered=!0,this.parent=e,this.element=t.select("#"+this.parent.element.id+Je,this.parent.element),this.addEventListener(),this.keyConfigs={altEnter:"alt+enter",esc:"escape",tab:"tab",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftdel:"shift+delete",shiftF10:"shift+F10",f2:"f2",ctrlA:"ctrl+a",enter:"enter"}}return e.prototype.render=function(e){if("Details"===this.parent.view){t.removeClass([this.parent.element],"e-fe-m-select");var i=D(this.parent,e.files),n=this.getColumns(),s=void 0;s=this.parent.isMobile?[]:[{direction:this.parent.sortOrder,field:this.parent.sortBy}],this.gridObj=new d.Grid({dataSource:i,allowSorting:!0,rowSelected:this.onSelected.bind(this),rowDeselected:this.onDeSelection.bind(this),allowResizing:this.parent.detailsViewSettings.columnResizing,selectionSettings:{type:this.parent.allowMultiSelection?"Multiple":"Single",checkboxMode:"ResetOnRowClick"},enableRtl:this.parent.enableRtl,pageSettings:{pageSize:20},sortSettings:{allowUnsort:!1,columns:s},columns:n,recordDoubleClick:this.DblClickEvents.bind(this),beforeDataBound:this.onBeforeDataBound.bind(this),dataBound:this.onDataBound.bind(this),rowDataBound:this.onRowDataBound.bind(this),actionBegin:this.onActionBegin.bind(this),headerCellInfo:this.onHeaderCellInfo.bind(this),width:"100%"}),this.gridObj.appendTo("#"+this.parent.element.id+Je),this.wireEvents(),this.adjustHeight(),this.gridObj.defaultLocale.EmptyRecord="",this.emptyArgs=e}},e.prototype.getColumns=function(){var e;if(this.parent.isMobile)e=[{field:"name",headerText:A(this.parent,"Name"),width:"auto",minWidth:120,headerTextAlign:"Left",template:'<div class="e-fe-text">${name}</div><div class="e-fe-date">${dateModified}</div><span class="e-fe-size">${size}</span>'}];else for(var t=0,i=(e=JSON.parse(JSON.stringify(this.parent.detailsViewSettings.columns))).length;t<i;t++)e[t].headerText=A(this.parent,e[t].headerText);var n=this.parent.isMobile||this.parent.isBigger?"54":"46",s={field:"type",width:n,minWidth:n,template:'<span class="e-fe-icon ${iconClass}"></span>',allowResizing:!1,allowSorting:!0,customAttributes:{class:"e-fe-grid-icon"},headerTemplate:'<span class="e-fe-icon e-fe-folder"></span>'};if(e.unshift(s),this.parent.allowMultiSelection){var a=this.parent.isBigger?"36":"26",o={type:"checkbox",width:a,minWidth:a,customAttributes:{class:"e-fe-checkbox"},allowResizing:!1,allowSorting:!1};this.parent.isMobile?e.push(o):e.unshift(o)}return e},e.prototype.adjustHeight=function(){if(this.gridObj){var e=t.select("#"+this.parent.element.id+"_content",this.parent.element),i=t.select("#"+this.parent.element.id+"_breadcrumbbar",this.parent.element),n=t.select(".e-gridheader",this.parent.element),s=e.offsetHeight-i.offsetHeight-n.offsetHeight;this.gridObj.height=s,this.gridObj.dataBind()}},e.prototype.renderCheckBox=function(){this.gridObj.columns=this.getColumns(),this.gridObj.refreshColumns()},e.prototype.onRowDataBound=function(e){if(!this.parent.showFileExtension&&t.getValue("isFile",e.data)){var i=e.row.querySelector(".e-fe-text"),n=t.getValue("name",e.data),s=t.getValue("type",e.data);i.innerHTML=n.substr(0,n.length-s.length)}if(void 0!==t.getValue("size",e.data)&&e.row.querySelector(".e-fe-size")){var a=e.row.querySelector(".e-fe-size"),o=void 0;if(t.getValue("isFile",e.data)){var r=t.getValue("size",e.data);o=r/1024==0?"0 KB":(h=new t.Internationalization).formatNumber(r/1024,{format:"n"})+" KB"}else o="";a.innerHTML=o}if(this.parent.isMobile&&void 0!==t.getValue("dateModified",e.data)&&e.row.querySelector(".e-fe-date")){for(var l=e.row.querySelector(".e-fe-date"),h=new t.Internationalization,d=this.parent.detailsViewSettings.columns,p=void 0,c=0;c<d.length;c++)if("dateModified"===d[c].field){p=d[c].format;break}var u=h.formatDate(new Date(t.getValue("dateModified",e.data)),p);l.innerHTML=u}var f=e.row.querySelector("."+dt);f&&f.classList.add("e-small");var m={element:e.row,fileDetails:e.data,module:"DetailsView"};this.parent.trigger("beforeFileLoad",m)},e.prototype.onActionBegin=function(e){if("sorting"===e.requestType){if(this.parent.sortOrder=e.direction,this.parent.sortBy=e.columnName,0!==this.parent.selectedItems.length){this.sortItem=!0;var i=this.gridObj.getSelectedRowIndexes(),n=i.length;for(this.sortSelectedNodes=[];n>0;){var s=this.gridObj.getRowsObject()[i[n-1]].data;this.sortSelectedNodes.push(t.getValue("name",s)),n--}}this.parent.notify(Kt,{})}},e.prototype.onHeaderCellInfo=function(e){var t=e.node.querySelector("."+dt);t&&t.classList.add("e-small")},e.prototype.onBeforeDataBound=function(e){var t=D(this.parent,this.gridObj.dataSource);e.result=t},e.prototype.maintainBlur=function(){var e=0,i=this.gridObj.getCurrentViewRecords();for(e;e<i.length;e++){var n=this.gridObj.getDataRows()[e],s=n.querySelector(".e-templatecell").textContent;if(-1!==this.parent.selectedNodes.indexOf(s))for(var a=t.selectAll("."+pt,n),o=0;o<a.length;)y(a[o]),o++}},e.prototype.onDataBound=function(e){if(0!==this.parent.selectedItems.length&&(this.selectedItem=!0),!0===this.pasteOperation||!0===this.selectedItem){var i=!0!==this.selectedItem?this.parent.selectedNodes:this.parent.selectedItems;this.selectRecords(i),this.pasteOperation=!0===this.selectedItem&&this.pasteOperation,this.selectedItem=!1}if(this.parent.cutNodes&&0!==this.parent.cutNodes.length&&this.maintainBlur(),this.parent.createdItem&&(this.selectRecords([t.getValue("name",this.parent.createdItem)]),this.parent.createdItem=null),this.parent.renamedItem&&(this.selectRecords([t.getValue("name",this.parent.renamedItem)]),this.parent.renamedItem=null),!0===this.sortItem&&(this.selectRecords(this.sortSelectedNodes),this.sortItem=!1),this.parent.allowMultiSelection&&void 0!==this.parent.singleSelection&&this.selectRecords([this.parent.singleSelection]),this.parent.allowMultiSelection||void 0===this.parent.singleSelection||this.selectRecords([this.parent.singleSelection]),!0===this.uploadOperation&&(this.count++,this.selectRecords(this.parent.uploadItem),this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[])),this.gridObj.currentViewData.length*this.gridObj.getRowHeight()<this.gridObj.height)(n=this.gridObj.getHeaderContent()).style.paddingRight="",n.style.paddingLeft="",t.select(".e-headercontent",n).style.borderRightWidth="0",(s=this.gridObj.getContent().querySelector(".e-content")).style.overflowY="",s.classList.add("e-scrollShow");else{var n=this.gridObj.getHeaderContent();this.parent.enableRtl?n.style.paddingLeft="16px":n.style.paddingRight="16px";var s=this.gridObj.getContent().querySelector(".e-content");s.classList.remove("e-scrollShow")}this.isRendered=!0,this.checkEmptyDiv(this.emptyArgs)},e.prototype.selectRecords=function(e){for(var i=this.gridObj.getCurrentViewRecords(),n=[],s=0,a=i.length;s<a;s++)-1!==e.indexOf(t.getValue("name",i[s]))&&n.push(s);0!==n.length&&this.gridObj.selectRows(n)},e.prototype.onSortColumn=function(e){this.gridObj.sortModule.sortColumn(this.parent.sortBy,this.parent.sortOrder)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++)switch(n[i]){case"height":this.adjustHeight();break;case"detailsViewSettings":if(!t.isNullOrUndefined(this.gridObj)){var s=this.getColumns();this.gridObj.columns=s,this.gridObj.allowResizing=this.parent.detailsViewSettings.columnResizing,this.gridObj.dataBind(),this.gridObj.refreshColumns()}break;case"selectedItems":0!==this.parent.selectedItems.length?this.selectRecords(this.parent.selectedItems):t.isNullOrUndefined(this.gridObj)||this.gridObj.clearSelection();break;case"enableRtl":t.isNullOrUndefined(this.gridObj)||(this.gridObj.enableRtl=e.newProp.enableRtl,this.gridObj.dataBind());break;case"showFileExtension":case"showHiddenItems":H(this.parent,At,this.parent.path);break;case"allowMultiSelection":t.isNullOrUndefined(this.gridObj)||(this.gridObj.selectionSettings.type=e.newProp.allowMultiSelection?"Multiple":"Single",this.renderCheckBox());break;case"view":H(this.parent,qt,this.parent.path)}},e.prototype.onPathChanged=function(e){if(""===this.parent.breadcrumbbarModule.searchObj.element.value.trim()&&this.gridObj){this.parent.searchedItems=[];var t=this.gridObj.columns.length,i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&(this.gridObj.columns.pop(),this.gridObj.refreshColumns())}v(this.parent),this.parent.persistData||this.parent.setProperties({selectedItems:[]},!0),"Details"===this.parent.view&&(this.parent.persistData?this.isInteracted=!1:this.parent.setProperties({selectedItems:[]},!0),this.parent.persistData=!1,this.parent.cutNodes=[],this.gridObj.dataSource=D(this.parent,e.files),this.parent.notify("search-change",e)),this.emptyArgs=e},e.prototype.checkEmptyDiv=function(e){var i=D(this.parent,e.files);if(0!==i.length||t.isNullOrUndefined(this.element.querySelector("."+wt))){if(0!==i.length&&this.element.querySelector("."+ct))if(this.element.querySelector("."+wt).querySelector("."+ct)){var n=this.element.querySelector("."+wt).querySelector("."+ct);this.element.querySelector("."+wt).removeChild(n)}else this.element.removeChild(this.element.querySelector("."+ct))}else M(this.parent,t.getValue("name",e),this.element)},e.prototype.onOpenInit=function(e){if("detailsview"===this.parent.activeModule){var t=this.gridObj.getSelectedRecords()[0];this.openContent(t)}},e.prototype.DblClickEvents=function(e){this.gridObj.selectRows([e.rowIndex]);var t;e.rowData&&(t=JSON.parse(JSON.stringify(e.rowData)),this.openContent(t))},e.prototype.openContent=function(e){var i={cancel:!1,fileDetails:e};if(this.parent.trigger("beforeFileOpen",i),!i.cancel)if(t.getValue("isFile",e)){if(E(e)===mt){var n=t.getValue("name",e),s=x(this.parent,e);Oe(this.parent,n,s)}}else if(""===this.parent.breadcrumbbarModule.searchObj.element.value){var a=this.parent.path+t.getValue("name",e)+"/";this.parent.setProperties({path:a},!0),this.parent.pathId.push(t.getValue("nodeId",e)),this.parent.itemData=[e],I(this.parent)}else V(this.parent,e)},e.prototype.onLayoutChange=function(e){"Details"===this.parent.view&&(this.gridObj||this.render(e),this.gridObj.dataSource=D(this.parent,e.files),this.parent.notify("hide-layout",{}),this.gridObj.element.classList.remove(Et),this.isInteracted=!1,this.gridObj.clearSelection(),this.parent.selectedItems&&(this.selectedItem=!0),""!==this.parent.breadcrumbbarModule.searchObj.element.value.trim()&&this.onSearchFiles(e),this.adjustHeight())},e.prototype.onSearchFiles=function(e){if("Details"===this.parent.view){var t=this.gridObj.columns.length,i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&this.gridObj.columns.pop();var n={field:"filterPath",headerText:"path",minWidth:180};this.parent.isMobile||this.gridObj.columns.push(n),this.gridObj.refreshColumns(),this.parent.searchedItems=e.files,this.onPathChanged(e)}},e.prototype.changeData=function(e){this.isInteracted=!1,this.gridObj.dataSource=D(this.parent,e.files),this.parent.selectedItems&&(this.selectedItem=!0)},e.prototype.onFinalizeEnd=function(e){"Details"===this.parent.view&&(this.gridObj?this.onPathChanged(e):(this.render(e),this.parent.notify("search-change",e)))},e.prototype.onCreateEnd=function(e){"Details"===this.parent.view&&this.onPathChanged(e)},e.prototype.onRenameInit=function(){"Details"===this.parent.view&&1===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onDeleteEnd=function(e){"Details"===this.parent.view&&(this.onPathChanged(e),this.parent.setProperties({selectedItems:[]},!0))},e.prototype.onRefreshEnd=function(e){"Details"===this.parent.view&&this.changeData(e)},e.prototype.onHideLayout=function(e){"Details"!==this.parent.view&&this.gridObj&&this.gridObj.element.classList.add(Et)},e.prototype.onSelectAllInit=function(){"Details"===this.parent.view&&(this.isInteracted=!1,this.gridObj.selectionModule.selectRowsByRange(0,this.gridObj.getRows().length),this.isInteracted=!0)},e.prototype.onClearAllInit=function(){"Details"===this.parent.view&&this.removeSelection()},e.prototype.onSelectionChanged=function(){t.removeClass([this.element],"e-headercheck"),this.parent.selectedItems.length>0&&t.addClass([this.element],"e-headercheck")},e.prototype.onBeforeRequest=function(){this.isRendered=!1},e.prototype.onAfterRequest=function(e){this.isRendered=!0},e.prototype.addEventListener=function(){this.parent.on(Mt,this.onFinalizeEnd,this),this.parent.on(_t,this.destroy,this),this.parent.on(qt,this.onLayoutChange,this),this.parent.on(At,this.onPathChanged,this),this.parent.on(kt,this.onCreateEnd,this),this.parent.on(Lt,this.onDeleteEnd,this),this.parent.on(Tt,this.onRefreshEnd,this),this.parent.on("search",this.onSearchFiles,this),this.parent.on(Rt,this.onPropertyChanged,this),this.parent.on(Wt,this.onRenameInit,this),this.parent.on(Gt,this.onPathChanged,this),this.parent.on(Ft,this.onOpenInit,this),this.parent.on(Xt,this.onSortColumn,this),this.parent.on(Vt,this.onPathChanged,this),this.parent.on("hide-layout",this.onHideLayout,this),this.parent.on("select-all-init",this.onSelectAllInit,this),this.parent.on("clear-all-init",this.onClearAllInit,this),this.parent.on("path-column",this.onPathColumn,this),this.parent.on(Ht,this.onSelectionChanged,this),this.parent.on(Bt,this.onBeforeRequest,this),this.parent.on(Ut,this.onAfterRequest,this)},e.prototype.removeEventListener=function(){this.parent.off(Mt,this.onFinalizeEnd),this.parent.off(_t,this.destroy),this.parent.off(qt,this.onLayoutChange),this.parent.off(At,this.onPathChanged),this.parent.off(kt,this.onCreateEnd),this.parent.off(Tt,this.onRefreshEnd),this.parent.off("search",this.onSearchFiles),this.parent.off(Rt,this.onPropertyChanged),this.parent.off(Wt,this.onRenameInit),this.parent.off(Gt,this.onPathChanged),this.parent.off(Ft,this.onOpenInit),this.parent.off(Xt,this.onSortColumn),this.parent.off(Vt,this.onPathChanged),this.parent.off("hide-layout",this.onHideLayout),this.parent.off("select-all-init",this.onSelectAllInit),this.parent.off("clear-all-init",this.onClearAllInit),this.parent.off(Lt,this.onDeleteEnd),this.parent.off("path-column",this.onPathColumn),this.parent.off(Ht,this.onSelectionChanged),this.parent.off(Bt,this.onBeforeRequest),this.parent.off(Ut,this.onAfterRequest)},e.prototype.getModuleName=function(){return"detailsview"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.gridObj&&(this.unWireEvents(),this.gridObj.destroy()))},e.prototype.onSelected=function(e){if(this.parent.activeElements=this.gridObj.element.querySelectorAll("."+rt),this.parent.activeModule="detailsview",this.selectedRecords(),this.parent.notify(Ht,{}),this.triggerSelect("select",e),this.parent.allowMultiSelection){var i=this.gridObj.getSelectedRowIndexes(),n=i.length;if(n>1){s=this.gridObj.getRowsObject()[i[n-1]].data;this.parent.currentItemText=t.getValue("name",s)}}if(1===this.parent.selectedItems.length){var s=this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;this.parent.currentItemText=t.getValue("name",s)}var a=t.getValue("rowIndexes",e),o=t.getValue("enableSelectMultiTouch",this.gridObj.selectionModule);this.parent.isDevice&&t.isNullOrUndefined(a)&&e.target&&!o&&!e.target.closest(".e-headercell")&&(this.parent.isFile=t.getValue("isFile",e.data),this.parent.isFile||this.openContent(e.data)),this.parent.visitedItem=e.row},e.prototype.onPathColumn=function(e){if("Details"===this.parent.view){var t=this.gridObj.columns.length;if(""===this.parent.breadcrumbbarModule.searchObj.element.value){var i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&(this.gridObj.columns.pop(),this.gridObj.refreshColumns())}}},e.prototype.selectedRecords=function(){this.parent.setProperties({selectedItems:[]},!0);for(var e=this.gridSelectNodes(),t=0;t<e.length;){var i=e[t];this.parent.selectedItems.push(i.name),t++}},e.prototype.onDeSelection=function(e){if(!this.isInteracted)return void(this.isInteracted=!0);this.parent.activeElements[0].querySelector("."+pt)&&(this.selectedRecords(),this.parent.activeElements=this.gridObj.element.querySelectorAll("."+rt));for(var i=e.data,n=0,s=i.length;n<s;n++){var a=this.parent.selectedItems.indexOf(t.getValue("name",i[n]));a>-1&&this.parent.selectedItems.splice(a,1)}0===this.parent.selectedItems.length&&(t.setValue("enableSelectMultiTouch",!1,this.gridObj.selectionModule),t.removeClass([this.parent.element],"e-fe-m-select")),this.parent.notify(Ht,{}),this.triggerSelect("unselect",e),this.parent.visitedItem=null},e.prototype.triggerSelect=function(e,t){var i={action:e,fileDetails:t.data};this.parent.trigger("fileSelect",i)},e.prototype.wireEvents=function(){this.wireClickEvent(!0),this.keyboardModule=new t.KeyboardEvents(this.gridObj.element,{keyAction:this.keyDown.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),t.EventHandler.add(this.gridObj.element,"focus",this.removeSelection,this)},e.prototype.unWireEvents=function(){this.wireClickEvent(!1),this.keyboardModule.destroy(),t.EventHandler.remove(this.gridObj.element,"focus",this.removeSelection)},e.prototype.wireClickEvent=function(e){if(e){var i=this,n=this.gridObj.getContent();this.clickObj=new t.Touch(n,{tapHold:function(e){if(i.parent.isDevice){e.originalEvent.preventDefault(),i.parent.allowMultiSelection&&(t.setValue("enableSelectMultiTouch",i.parent.allowMultiSelection,i.gridObj.selectionModule),t.addClass([i.parent.element],"e-fe-m-select"));var n=e.originalEvent.target;if(n){var s=t.closest(n,".e-row"),a=i.gridObj.getRows().indexOf(s);i.gridObj.selectRow(a)}}}})}else this.clickObj&&this.clickObj.destroy()},e.prototype.removeSelection=function(){t.removeClass([this.parent.element],"e-fe-m-select"),this.gridObj.clearSelection(),this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(Ht,{})},e.prototype.keyDown=function(e){if(this.isRendered)switch(e.preventDefault(),e.action){case"altEnter":this.parent.getDetails();break;case"esc":v(this.parent),this.parent.selectedNodes=[],this.parent.navigationpaneModule&&(this.parent.navigationpaneModule.treeNodes=[]);break;case"del":case"shiftdel":this.parent.selectedItems&&this.parent.selectedItems.length>0&&ae(this.parent,"Delete");break;case"enter":if(-1===this.gridObj.selectedRowIndex)break;var i=this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;if(i){var n=JSON.parse(JSON.stringify(i));this.openContent(n)}break;case"ctrlC":v(this.parent),this.parent.navigationpaneModule.treeNodes=[],this.parent.navigationpaneModule.copyNodes=[],this.parent.cutNodes=[],this.parent.selectedNodes=[],this.parent.targetPath=this.parent.path,g(this.parent.navigationpaneModule,this.gridSelectNodes(),"copy"),this.parent.fileAction="CopyTo",this.parent.enablePaste=!0,this.parent.notify(Yt,{}),this.parent.fileOperation(this.gridSelectNodes());break;case"ctrlV":this.parent.pasteHandler();break;case"ctrlX":N(this.parent),this.parent.fileOperation(this.parent.nodeNames);break;case"shiftF10":se(this.parent,this.gridSelectNodes());break;case"f2":1===this.parent.selectedItems.length&&(this.updateRenameData(),ae(this.parent,"Rename"));break;case"ctrlA":var s=[this.gridObj.getSelectedRecords()[0]];this.parent.currentItemText=t.getValue("name",s[0]);break;case"tab":var a=D(this.parent,this.gridObj.dataSource);this.parent.selectedItems=[t.getValue("name",a[0])],this.selectRecords([t.getValue("name",a[0])])}},e.prototype.gridSelectNodes=function(){return this.gridObj.getSelectedRecords()},e.prototype.updateRenameData=function(){var e=this.gridSelectNodes()[0];this.parent.itemData=[e],this.parent.currentItemText=t.getValue("name",e),this.parent.isFile=t.getValue("isFile",e)},e}();return ni.Inject(oi,ai,$t,si,Zt,Qt),e.AjaxSettings=je,e.toolbarItems=xe,e.ToolbarSettings=De,e.SearchSettings=Me,e.columnArray=Te,e.DetailsViewSettings=Ae,e.fileItems=Ue,e.folderItems=Fe,e.layoutItems=Ve,e.ContextMenuSettings=He,e.NavigationPaneSettings=Ke,e.UploadSettings=Ye,e.TOOLBAR_ID="_toolbar",e.LAYOUT_ID="_layout",e.TREE_ID="_tree",e.GRID_ID=Je,e.LARGEICON_ID=Xe,e.DIALOG_ID=$e,e.ALT_DIALOG_ID="_alt_dialog",e.IMG_DIALOG_ID=Qe,e.EXTN_DIALOG_ID=Ze,e.UPLOAD_DIALOG_ID="_upload_dialog",e.CONTEXT_MENU_ID="_contextmenu",e.SORTBY_ID="_sortby",e.VIEW_ID="_view",e.SPLITTER_ID="_splitter",e.CONTENT_ID="_content",e.BREADCRUMBBAR_ID="_breadcrumbbar",e.UPLOAD_ID="_upload",e.SEARCH_ID="_search",e.ROOT="e-filemanager",e.CONTROL="e-control",e.CHECK_SELECT="e-fe-cb-select",e.ROOT_POPUP="e-fe-popup",e.MOBILE="e-fe-mobile",e.MULTI_SELECT="e-fe-m-select",e.FILTER=et,e.LAYOUT="e-layout",e.LAYOUT_CONTENT="e-layout-content",e.LARGE_ICONS=tt,e.TB_ITEM="e-toolbar-item",e.LIST_ITEM=it,e.LIST_TEXT=nt,e.LIST_PARENT="e-list-parent",e.TB_OPTION_TICK=st,e.TB_OPTION_DOT=at,e.BLUR=ot,e.ACTIVE=rt,e.HOVER=lt,e.FOCUS="e-focus",e.CHECK=ht,e.FRAME="e-frame",e.CB_WRAP=dt,e.ROW="e-row",e.ROWCELL=pt,e.EMPTY=ct,e.EMPTY_CONTENT=ut,e.EMPTY_INNER_CONTENT=ft,e.FOLDER="e-fe-folder",e.ICON_IMAGE=mt,e.ICON_MUSIC=gt,e.ICON_VIDEO=bt,e.LARGE_ICON=yt,e.LARGE_EMPTY_FOLDER=vt,e.LARGE_EMPTY_FOLDER_TWO="e-empty-icon.e-fe-folder",e.LARGE_ICON_FOLDER=Ot,e.SELECTED_ITEMS="e-items",e.TEXT_CONTENT="e-text-content",e.GRID_HEADER="e-gridheader",e.TEMPLATE_CELL="e-templatecell",e.TREE_VIEW="e-treeview",e.MENU_ITEM="e-menu-item",e.MENU_ICON="e-menu-icon",e.SUBMENU_ICON="e-caret",e.GRID_VIEW=wt,e.ICON_VIEW="e-list-parent",e.ICON_OPEN="e-icons e-fe-open",e.ICON_UPLOAD="e-icons e-fe-upload",e.ICON_CUT=It,e.ICON_COPY="e-icons e-fe-copy",e.ICON_PASTE="e-icons e-fe-paste",e.ICON_DELETE="e-icons e-fe-delete",e.ICON_RENAME="e-icons e-fe-rename",e.ICON_NEWFOLDER="e-icons e-fe-newfolder",e.ICON_DETAILS="e-icons e-fe-details",e.ICON_SHORTBY="e-icons e-fe-sort",e.ICON_REFRESH="e-icons e-fe-refresh",e.ICON_SELECTALL="e-icons e-fe-select",e.ICON_DOWNLOAD="e-icons e-fe-download",e.ICON_OPTIONS="e-icons e-fe-options",e.ICON_GRID=Ct,e.ICON_LARGE=St,e.ICON_BREADCRUMB="e-icons e-fe-breadcrumb",e.ICON_CLEAR="e-icons e-fe-clear",e.ICONS="e-icons",e.DETAILS_LABEL="e-detailslabel",e.ERROR_CONTENT=jt,e.STATUS="e-status",e.BREADCRUMBS="e-address",e.RTL=Nt,e.DISPLAY_NONE=Et,e.COLLAPSED="e-node-collapsed",e.FULLROW="e-fullrow",e.ICON_COLLAPSIBLE="e-icon-collapsible",e.SPLIT_BAR="e-split-bar",e.HEADER_CHECK="e-headercheck",e.OVERLAY="e-fe-overlay",e.VALUE=xt,e.isFile=Dt,e.modelChanged=Rt,e.initialEnd=Pt,e.finalizeEnd=Mt,e.createEnd=kt,e.deleteEnd=Lt,e.refreshEnd=Tt,e.resizeEnd="resize-end",e.splitterResize="splitter-resize",e.pathChanged=At,e.destroy=_t,e.beforeRequest=Bt,e.upload="upload",e.afterRequest=Ut,e.download="download",e.uiRefresh="ui-refresh",e.search="search",e.openInit=Ft,e.openEnd=Vt,e.selectionChanged=Ht,e.selectAllInit="select-all-init",e.clearAllInit="clear-all-init",e.clearPathInit=zt,e.layoutChange=qt,e.sortByChange=Kt,e.nodeExpand="node-expand",e.renameInit=Wt,e.renameEnd=Gt,e.showPaste=Yt,e.hidePaste=Jt,e.hideLayout="hide-layout",e.updateTreeSelection="update-tree-selection",e.treeSelect="select-node",e.sortColumn=Xt,e.pathColumn="path-column",e.searchTextChange="search-change",e.downloadInit="download-init",e.FileManager=ni,e.Toolbar=si,e.BreadCrumbBar=Qt,e.NavigationPane=ai,e.DetailsView=oi,e.LargeIconsView=$t,e.createDialog=ae,e.createImageDialog=Oe,e.ContextMenu=Zt,e}({},ej.base,ej.layouts,ej.popups,ej.data,ej.inputs,ej.lists,ej.buttons,ej.splitbuttons,ej.navigations,ej.grids),this.ejs=ej;
//# sourceMappingURL=ej2-filemanager.min.js.map
