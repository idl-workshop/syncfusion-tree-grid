/*!
*  filename: ej2-filemanager.umd.min.js
*  version : 17.1.48
*  Copyright Syncfusion Inc. 2001 - 2019. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-layouts"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-lists"),require("@syncfusion/ej2-buttons"),require("@syncfusion/ej2-splitbuttons"),require("@syncfusion/ej2-navigations"),require("@syncfusion/ej2-grids")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-layouts","@syncfusion/ej2-popups","@syncfusion/ej2-data","@syncfusion/ej2-inputs","@syncfusion/ej2-lists","@syncfusion/ej2-buttons","@syncfusion/ej2-splitbuttons","@syncfusion/ej2-navigations","@syncfusion/ej2-grids"],t):t(e.ej={},e.ej2Base,e.ej2Layouts,e.ej2Popups,e.ej2Data,e.ej2Inputs,e.ej2Lists,e.ej2Buttons,e.ej2Splitbuttons,e.ej2Navigations,e.ej2Grids)}(this,function(e,t,i,n,s,a,o,r,l,h,d){"use strict";function p(e,t,i){i.setProperties({path:c(e,t)},!0),i.pathId=function(e){for(var t=u(e,e.getAttribute("data-uid"),!0),i=[],n=t.length-1;n>=0;n--)i.push(t[n]);return i}(e)}function c(e,t){for(var i=u(e,t,!1),n="/",s=i.length-2;s>=0;s--)n+=i[s]+"/";return n}function u(e,i,n){for(var s=[i],a=e.parentNode;!t.isNullOrUndefined(a);){if(t.matches(a,"."+Qe)){var o=n?a.getAttribute("data-uid"):t.select("."+Ze,a).textContent;s.push(o)}a=a.parentNode}return s}function f(e,t,i){var n;if(t)for(var s=0;s<t.length;s++){var a=t[s],o=a.id;!1===a.isFile&&("cut"===i?e.treeNodes.push(o):e.treeNodes=e.treeNodes,"copy"===i?e.copyNodes.push((n={},n.name=a.name,n)):e.copyNodes=e.copyNodes,"Delete"===i?e.removeNodes.push(o):e.removeNodes=e.removeNodes)}else e.treeNodes="cut"===i?e.treeObj.selectedNodes:e.treeNodes,e.removeNodes="Delete"===i?e.treeObj.selectedNodes:e.removeNodes}function m(e,i,n){var s=[];y(n);var a=n.activeElements;n.targetPath=n.path;var o,r,l=0;if(a){for(!function(e,i){e&&(e.classList.contains(ht)?i.activeModule="detailsview":t.closest(e,"."+gt)?i.activeModule="largeiconsview":i.activeModule="navigationpane")}(a[0],n);l<a.length;)"cut"===e&&g(a[l]),r=!1===(o="largeiconsview"===n.activeModule?!a[l].querySelector("."+bt):null)?t.closest(a[l],"li").getAttribute("data-uid"):null,a[l].querySelector("."+Ze)?s.push({name:a[l].querySelector("."+Ze).textContent,isFile:o,id:r}):s=s,l++;"detailsview"===n.activeModule&&!1!==i?(s=n.detailsviewModule.gridSelectNodes(),"cut"!==e&&"copy"!==e&&"Delete"!==e||!n.navigationpaneModule||f(n.navigationpaneModule,s,e)):"largeiconsview"===n.activeModule&&n.navigationpaneModule?"cut"===e||"copy"===e||"Delete"===e?f(n.navigationpaneModule,s,e):s=s:("cut"!==e&&"copy"!==e&&"Delete"!==e||!n.navigationpaneModule?s=s:f(n.navigationpaneModule,null,e),"navigationpane"===n.activeModule&&function(e){var t=e.path.substr(0,e.path.length-1);e.targetPath=t.substr(0,t.lastIndexOf("/")+1)}(n))}return s}function g(e){e.classList.add(nt)}function y(e,t){for(var i=t?e.element.querySelectorAll("."+at):e.element.querySelectorAll("."+nt),n=0;n<i.length;)t?i[n].classList.remove(at):i[n].classList.remove(nt),n++}function b(e){e.itemData=[w(e)],A(e,ti,e.path)}function v(e){A(e,di,e.path)}function O(e){var i=t.getValue(e.path,e.feFiles);if(i)for(var n=e.selectedItems[e.selectedItems.length-1],s=0,a=i.length;s<a;s++)if(n===t.getValue("name",i[s]))return i[s];return t.getValue(e.path,e.feParent)}function w(e){return t.getValue(e.path,e.feParent)}function I(e){e.cutNodes=[],e.navigationpaneModule.treeNodes=[],e.navigationpaneModule.copyNodes=[],e.nodeNames=[],e.selectedNodes=[],e.nodeNames=m("copy",null,e),e.nodeNames&&(e.fileAction="CopyTo",e.enablePaste=!0,e.notify(Oi,{}))}function C(e){e.navigationpaneModule.treeNodes=[],e.navigationpaneModule.copyNodes=[],e.nodeNames=[],e.selectedNodes=[],e.nodeNames=m("cut",null,e),e.nodeNames&&(e.cutNodes=e.nodeNames,e.fileAction="MoveTo",e.enablePaste=!0,e.notify(Oi,{}))}function S(e){if(!t.getValue("isFile",e))return"e-fe-folder";var i=t.getValue("type",e);-1!==(i=i.toLowerCase()).indexOf(".")&&(i=i.split(".").join(""));return-1!==["bmp","dib","jpg","jpeg","jpe","jfif","gif","tif","tiff","png","ico"].indexOf(i)?ut:-1!==["mp3","wav","aac","ogg","wma","aif","fla","m4a"].indexOf(i)?ft:-1!==["webm","mkv","flv","vob","ogv","ogg","avi","wmv","mp4","3gp"].indexOf(i)?mt:-1!==["css","exe","html","js","msi","pdf","pptx","ppt","rar","zip","txt","docx","doc","xlsx","xls","xml","rtf","php"].indexOf(i)?"e-fe-"+i:"e-fe-unknown e-fe-"+i}function j(e,i){var n=e.ajaxSettings.getImageUrl?e.ajaxSettings.getImageUrl:e.ajaxSettings.url;return""!==e.breadcrumbbarModule.searchObj.element.value?n+"?path="+t.getValue("filterPath",i):n+"?path="+e.path+t.getValue("name",i)}function N(e,i){if(0===i.length)return i;var n=(new s.Query).sortBy(e.sortBy,e.sortOrder.toLowerCase(),!0).group("isFile"),a=new s.DataManager(i).executeLocal(n);return t.getValue("records",a)}function E(e,i){return x(e,t.select("."+Ze,i).textContent)}function x(e,i){var n=t.getValue(e.path,e.feFiles),a=(new s.Query).where("name","equal",i);return new s.DataManager(n).executeLocal(a)[0]}function D(e,i,n){if(t.isNullOrUndefined(n.querySelector("."+dt))){var s=t.createElement("div",{className:dt}),a=t.createElement("div",{className:yt}),o=t.createElement("div",{className:pt}),r=t.createElement("div",{className:ct});"Details"===e.view?n.querySelector("."+It).appendChild(s):n.appendChild(s),s.appendChild(a),s.appendChild(o),s.appendChild(r)}n.querySelector("."+dt)&&("search"===i?(n.querySelector("."+pt).innerHTML=R(e,"Search-Empty"),n.querySelector("."+ct).innerHTML=R(e,"Search-Key")):(n.querySelector("."+pt).innerHTML=R(e,"Folder-Empty"),n.querySelector("."+ct).innerHTML=R(e,"File-Upload")))}function P(e){return new s.DataManager(e).executeLocal((new s.Query).where(Jt,"equal",!1,!1))}function R(e,t){var i=e.localeObj.getConstant(t);return""===i?t:i}function M(e,i){var n=e.cssClass;return n=t.isNullOrUndefined(n)||""===n?i:n+" "+i}function k(e,t){-1!==t.item.id.indexOf("ascending")||-1!==t.item.id.indexOf("descending")?e.sortOrder=L(t.item.id):e.sortBy=L(t.item.id),"Details"===e.view&&(e.isMobile?A(e,mi,e.path):e.notify(Si,{module:"gridview"})),"LargeIcons"===e.view&&A(e,mi,e.path),e.notify(gi,{})}function L(e){var t=e.substring(e.lastIndexOf("_")+1),i=t;switch(t){case"date":i="dateModified";break;case"ascending":i="Ascending";break;case"descending":i="Descending"}return i}function T(e,i){var n=t.getValue("filterPath",i)+"/";n=n.replace(/\\/g,"/"),e.notify(fi,{selectedNode:e.pathId[e.pathId.length-1]}),e.originalPath=n,A(e,e.path!==e.originalPath?$t:Qt,e.path)}function A(e,t,i){U(e,{action:"Read",path:i,showHiddenItems:e.showHiddenItems,data:e.itemData},F,t)}function B(e,t){U(e,{action:"Rename",path:e.path,name:e.currentItemText,itemNewName:t,data:e.itemData},H,e.path)}function _(e,t,i,n,s,a,o){U(e,{action:s,path:t,targetPath:n,itemNames:i,CommonFiles:o},q,t,a,s,n)}function U(e,i,n,s,a,o,r){var l={url:e.ajaxSettings.url,type:"POST",mode:!0,dataType:"json",contentType:"application/json",data:JSON.stringify(i),onSuccess:null,onFailure:null,beforeSend:null},h={action:t.getValue("action",i),ajaxSettings:l,cancel:!1};if(e.trigger("beforeSend",h),!h.cancel){e.notify(oi,{});new t.Ajax({url:t.getValue("url",h.ajaxSettings),type:t.getValue("type",h.ajaxSettings),mode:t.getValue("mode",h.ajaxSettings),dataType:t.getValue("dataType",h.ajaxSettings),contentType:t.getValue("contentType",h.ajaxSettings),data:t.getValue("data",h.ajaxSettings),beforeSend:t.getValue("beforeSend",h.ajaxSettings),onSuccess:function(l){if("string"==typeof l&&(l=JSON.parse(l)),e.notify(ri,{action:"success"}),!t.isNullOrUndefined(l.files)){!function(e){for(var i=0;i<e.length;i++)t.setValue("dateCreated",new Date(t.getValue("dateCreated",e[i])),e[i]),t.setValue("dateModified",new Date(t.getValue("dateModified",e[i])),e[i])}(l.files);for(var d=0,p=l.files.length;d<p;d++){var c=l.files[d];t.setValue("iconClass",S(c),c)}}if("Read"===t.getValue("action",i)){var u=t.getValue("path",i);!function(e,i){t.setValue("nodeId",i,e.cwd);for(var n=P(e.files),s=0,a=n.length;s<a;s++)t.setValue("nodeId",i+"_"+s,n[s])}(l,e.expandedId?e.expandedId:e.pathId[e.pathId.length-1]),t.setValue(u,l.files,e.feFiles),t.setValue(u,l.cwd,e.feParent)}n(e,l,s,a,o,r),"function"==typeof t.getValue("onSuccess",h.ajaxSettings)&&t.getValue("onSuccess",h.ajaxSettings)()},onFailure:function(){var i={files:null,error:{code:"404",message:"NetworkError: Faild to send on XMLHTTPRequest: Failed to load "+e.ajaxSettings.url,fileExists:null}};e.notify(ri,{action:"failure"}),n(e,i,s,a,o,r),"function"==typeof t.getValue("onFailure",h.ajaxSettings)&&t.getValue("onFailure",h.ajaxSettings)()}}).send()}}function F(e,i,n){t.isNullOrUndefined(i.files)?W(e,i,"Read"):(e.notify(n,i),e.notify(pi,{}),e.trigger("onSuccess",{action:"Read",result:i}))}function V(e,i){if(t.isNullOrUndefined(i.files))if("400"===i.error.code){var n=t.select("#newname",e.dialogObj.element),s=R(e,"Validation-NewFolder-Exists").replace("{0}",'"'+n.value+'"');n.parentElement.nextElementSibling.innerHTML=s}else e.dialogObj.hide(),W(e,i,"CreateFolder");else e.dialogObj.hide(),e.createdItem=i.files[0],e.trigger("onSuccess",{action:"CreateFolder",result:i}),A(e,Zt,e.path)}function H(e,i,n){if(t.isNullOrUndefined(i.files))if("400"===i.error.code){var s=t.select("#rename",e.dialogObj.element),a=R(e,"Validation-Rename-Exists").replace("{0}",'"'+e.currentItemText+'"');a=a.replace("{1}",'"'+s.value+'"'),s.parentElement.nextElementSibling.innerHTML=a}else e.dialogObj.hide(),W(e,i,"Rename");else{if(e.dialogObj.hide(),e.trigger("onSuccess",{action:"Rename",result:i}),e.renamedItem=i.files[0],0===e.selectedItems.length&&e.navigationpaneModule){var o=e.parentPath.split("/"),r=e.parentPath.replace(o[o.length-2]+"/",e.renameText+"/");e.setProperties({path:r},!0)}A(e,vi,e.path)}}function q(e,i,n,s,a){if(i.error&&i.error.fileExists){e.fileLength=0;for(var o=0;o<i.files.length;o++)X(e,"DuplicateItems",i,null,i.error.fileExists);e.detailsviewModule.pasteOperation=!0,e.largeiconsviewModule.pasteOperation=!0,e.duplicateItems=[]}else i.error||t.isNullOrUndefined(i.files)?W(e,i,a):(e.detailsviewModule.pasteOperation=!0,e.largeiconsviewModule.pasteOperation=!0,e.pasteNodes=e.selectedNodes,A(e,si,e.path),"MoveTo"===a&&0!==s.treeNodes.length?(e.selectedNodes=[],s.moveNode()):"CopyTo"===a&&0!==s.copyNodes.length&&s.copyNode(),"MoveTo"===a&&(e.enablePaste=!1,e.notify(wi,{})),e.trigger("onSuccess",{action:a,result:i}))}function z(e,i,n){t.isNullOrUndefined(i.files)?W(e,i,"Remove"):(e.setProperties({path:n},!0),A(e,ei,e.path),e.trigger("onSuccess",{action:"Remove",result:i}))}function K(e,i,n,s,a){t.isNullOrUndefined(i.details)?W(e,i,"GetDetails"):(X(e,a,null,i.details),e.trigger("onSuccess",{action:"GetDetails",result:i}))}function W(e,t,i){X(e,"Error",t),e.trigger("onError",{action:i,error:t.error})}function G(e,t,i,n,s,a){U(e,{action:"Search",path:i,searchString:n,showHiddenItems:s,caseSensitive:a},Y,t)}function Y(e,i,n){t.isNullOrUndefined(i.files)?W(e,i,"Search"):(e.notify(n,i),e.trigger("onSuccess",{action:"Search",result:i}))}function J(e,i){for(var n,s=[],a=e.ajaxSettings.downloadUrl?e.ajaxSettings.downloadUrl:e.ajaxSettings.url,o=0;o<i.length;o++)s.push(i[o].name),n=i[o].filterPath;var r={action:"Download",path:t.isNullOrUndefined(n)?e.path:n,itemNames:s},l=t.createElement("form",{id:e.element.id+"_downloadForm",attrs:{action:a,method:"post",name:"downloadForm",download:""}}),h=t.createElement("input",{id:e.element.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(r),type:"hidden"}});l.appendChild(h),e.element.appendChild(l),document.forms.namedItem("downloadForm").submit(),e.element.removeChild(l)}function X(e,i,s,a,o){var r=function(e,i,n,s,a){var o={header:"",content:"",buttons:[],open:null};switch(i=s&&!0===s.multipleFiles?"MultipleFileDetails":i){case"NewFolder":o.header=R(e,"Header-NewFolder"),o.content='<input type="text" value="New folder" id="newname"><div class="e-fe-error"></div>',o.buttons=[{buttonModel:{isPrimary:!0,content:R(e,"Button-Create")},click:function(t){"keydown"!==t.type&&Q(e)}}],o.open=function(e){var i=t.select("#newname",e.dialogObj.element);i.parentElement.classList.contains("e-control-wrapper")||$(i,R(e,"Content-NewFolder"));i.parentElement.nextElementSibling.innerHTML="",i.oninput=function(){ee(e,i)},i.onkeyup=function(t){var i=ne(t);13===i&&Q(e)},function(e){var i=t.select("#newname",e.dialogObj.element);i.focus(),i.value="";var n=i.value.length;i.setSelectionRange(0,n)}(e)}.bind(this,e);break;case"Delete":e.selectedItems.length>1?(o.content=("<div>"+R(e,"Content-Multiple-Delete")+"</div>").replace("{0}",e.selectedItems.length.toString()),o.header=R(e,"Header-Multiple-Delete")):(o.content="<div>"+R(e,"Content-Delete")+"</div>",o.header=R(e,"Header-Delete")),o.buttons=[{buttonModel:{isPrimary:!0,content:R(e,"Button-Yes")},click:function(t){"keydown"!==t.type&&function(e){e.dialogObj.hide();var t=m("Delete",null,e);e.deleteHandler(t)}(e)}},{buttonModel:{content:R(e,"Button-No")},click:function(){e.dialogObj.hide()}}];break;case"Rename":o.header=R(e,"Header-Rename"),o.content='<input type="text" class="e-input" id="rename"><div class="e-fe-error"></div>',o.buttons=[{buttonModel:{isPrimary:!0,content:R(e,"Button-Save")},click:function(t){"keydown"!==t.type&&Z(e)}}],o.open=function(e){var i=t.select("#rename",e.dialogObj.element);i.parentElement.classList.contains("e-control-wrapper")||$(i,R(e,"Content-Rename"));i.parentElement.nextElementSibling.innerHTML="",i.oninput=function(){ee(e,i)},i.onkeyup=function(t){var i=ne(t);13===i&&Z(e)},function(e,t){t.focus(),t.value=e.currentItemText,e.isFile&&e.isFile&&-1!==t.value.indexOf(".")?t.setSelectionRange(0,t.value.lastIndexOf(".")):t.setSelectionRange(0,t.value.length)}(e,i)}.bind(this,e);break;case"DuplicateItems":e.replaceItems=a,o.header=R(e,"Header-Duplicate"),o.content="<div>"+e.replaceItems[e.fileLength].substring(e.replaceItems[e.fileLength].lastIndexOf("/")+1)+R(e,"Content-Duplicate")+"</div>",o.buttons=[{buttonModel:{isPrimary:!0,content:R(e,"Button-Yes")},click:function(t){if("keydown"!==t.type){var i=e.replaceItems[e.fileLength].substring(e.replaceItems[e.fileLength].lastIndexOf("/")+1);e.duplicateItems.push(i),e.fileLength++,a[e.fileLength]?(e.dialogObj.content="<div>"+e.replaceItems[e.fileLength].substring(e.replaceItems[e.fileLength].lastIndexOf("/")+1)+R(e,"Content-Duplicate")+"</div>",e.dialogObj.show()):(e.dialogObj.hide(),_(e,e.targetPath,e.selectedNodes,e.path,e.fileAction,e.navigationpaneModule,e.duplicateItems))}}},{buttonModel:{content:R(e,"Button-No")},click:function(){if(e.fileLength++,a[e.fileLength]){var t=e.replaceItems[e.fileLength].substring(e.replaceItems[e.fileLength].lastIndexOf("/")+1);e.dialogObj.content="<div>"+t+" already exists. Are you sure you want to replace it ?</div>",e.dialogObj.show()}else e.dialogObj.hide(),0!==e.duplicateItems.length&&_(e,e.targetPath,e.duplicateItems,e.path,e.fileAction,e.navigationpaneModule,e.duplicateItems)}}];break;case"GetDetails":var r=new t.Internationalization,l=(r.parseDate(s.modified,{format:"MM/dd/yyy hh:mm:ss"}),r.formatDate(new Date(s.modified),{format:"MMMM dd, yyyy HH:mm:ss"}));o.header=s.name,o.content="<table><tr><td>"+R(e,"Type")+'</td><td class="'+Yt+'" title="'+(s.isFile?"File":"Folder")+'">'+(s.isFile?"File":"Folder")+"</td></tr><tr><td>"+R(e,"Size")+'</td><td><span class="'+Yt+'" title ="'+s.size+'">'+s.size+"</span></td></tr><tr><td>"+R(e,"Location")+'</td><td class="'+Yt+'" title="'+s.location+'">'+s.location+"</td></tr><tr><td>"+R(e,"Modified")+'</td><td class="'+Yt+'" >'+l+"</td></tr></table>",o.buttons=[{buttonModel:{isPrimary:!0,content:R(e,"Button-Ok")},click:function(t){"keydown"!==t.type&&e.dialogObj.hide()}}];break;case"MultipleFileDetails":var h=s.location;o.header=s.name,o.content="<table><tr><td>"+R(e,"Type")+':</td><td class="'+Yt+'">Multiple Types</td></tr><tr><td>'+R(e,"Size")+":</td><td>"+s.size+'<span class="'+Yt+'" title ="'+s.size+'"></span></td></tr><tr><td>'+R(e,"Location")+':</td><td class="'+Yt+'" title="'+h+'">'+h+"</td></tr></table>",o.buttons=[{buttonModel:{isPrimary:!0,content:R(e,"Button-Ok")},click:function(t){"keydown"!==t.type&&e.dialogObj.hide()}}];break;case"Error":var d=n;"523"===d.error.code?o.header="Access Denied":o.header=R(e,"Error"),o.content='<div class="'+Ht+'">'+d.error.message+"</div>",o.buttons=[{buttonModel:{isPrimary:!0,content:R(e,"Button-Ok")},click:function(t){"keydown"!==t.type&&e.dialogObj.hide()}}]}return o}(e,i,s,a,o);t.isNullOrUndefined(e.dialogObj)?(e.dialogObj=new n.Dialog({header:r.header,content:r.content,buttons:r.buttons,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,isModal:!0,target:"#"+e.element.id,width:"350px",open:r.open,enableRtl:e.enableRtl,locale:e.locale}),e.dialogObj.appendTo("#"+e.element.id+Ae)):function(e,t){e.dialogObj.header=t.header,e.dialogObj.content=t.content,e.dialogObj.buttons=t.buttons,e.dialogObj.enableRtl=e.enableRtl,e.dialogObj.open=t.open,e.dialogObj.dataBind(),e.dialogObj.show()}(e,r)}function $(e,t){a.Input.createInput({element:e,properties:{placeholder:t}})}function Q(e){var i=t.select("#newname",e.dialogObj.element);te(e,i),""===i.parentElement.nextElementSibling.innerHTML&&function(e,t){U(e,{action:"CreateFolder",path:e.path,name:t,data:e.itemData},V)}(e,i.value)}function Z(e){var i=t.select("#rename",e.dialogObj.element);if(te(e,i),""===i.parentElement.nextElementSibling.innerHTML){var s=i.value;if(e.renameText=i.value,e.currentItemText!==s){if(0===e.selectedItems.length){e.parentPath=e.path;var a=e.path.split("/"),o=e.path.replace(a[a.length-2]+"/","");e.setProperties({path:o},!0)}if(e.isFile){e.currentItemText.substr(e.currentItemText.lastIndexOf("."))!==s.substr(s.lastIndexOf("."))?t.isNullOrUndefined(e.extDialogObj)?(e.extDialogObj=new n.Dialog({header:R(e,"Header-Rename-Confirmation"),content:"<div>"+R(e,"Content-Rename-Confirmation")+"</div>",animationSettings:{effect:"None"},target:"#"+e.element.id,showCloseIcon:!0,closeOnEscape:!0,isModal:!0,width:350,buttons:[{buttonModel:{isPrimary:!0,content:R(e,"Button-Yes")},click:function(){e.extDialogObj.hide(),B(e,e.renameText)}},{buttonModel:{content:R(e,"Button-No")},click:function(){e.extDialogObj.hide(),e.dialogObj.hide()}}]}),e.extDialogObj.appendTo("#"+e.element.id+_e)):e.extDialogObj.show():B(e,s)}else B(e,s)}else e.dialogObj.hide()}}function ee(e,t){/[/\\|*?"<>:]/.test(t.value)?ie(e,t):""===t.value?t.parentElement.nextElementSibling.innerHTML=R(e,"Validation-Empty"):t.parentElement.nextElementSibling.innerHTML=""}function te(e,t){ee(e,t);var i=t.value.length-1;""===t.value||t.value.lastIndexOf(".")!==i&&t.value.lastIndexOf(" ")!==i||ie(e,t)}function ie(e,t){var i=R(e,"Validation-Invalid").replace("{0}",'"'+t.value+'"');t.parentElement.nextElementSibling.innerHTML=i}function ne(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function se(e,i,s){var a=t.createElement("div",{className:"e-image-wrap"}),o=t.createElement("img",{className:"e-image",attrs:{src:s}});a.appendChild(o),t.isNullOrUndefined(e.viewerObj)?(e.viewerObj=new n.Dialog({header:i,content:a,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,isModal:!0,width:"350px",height:"350px",target:"#"+e.element.id,locale:e.locale,enableResize:!0,allowDragging:!0,position:{X:"center",Y:"center"},enableRtl:e.enableRtl,open:function(e){setTimeout(function(){e.viewerObj&&e.viewerObj.element.focus()}),ae(e)}.bind(this,e),resizing:ae.bind(this,e),resizeStop:ae.bind(this,e)}),e.viewerObj.appendTo("#"+e.element.id+Be)):(e.viewerObj.refresh(),e.viewerObj.header=i,e.viewerObj.content=a,e.viewerObj.enableRtl=e.enableRtl,e.viewerObj.dataBind(),e.viewerObj.show())}function ae(e){var i=t.select(".e-dlg-content",e.viewerObj.element),n=t.select(".e-image-wrap",e.viewerObj.element),s=window.getComputedStyle(i,null),a=s?2*parseFloat(s.paddingRight):36,o=s?2*parseFloat(s.paddingBottom):20;n.style.width=i.offsetWidth-a+"px",n.style.height=i.offsetHeight-o+"px"}var oe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),re=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},le=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return oe(i,e),re([t.Property(null)],i.prototype,"downloadUrl",void 0),re([t.Property(null)],i.prototype,"getImageUrl",void 0),re([t.Property(null)],i.prototype,"uploadUrl",void 0),re([t.Property(null)],i.prototype,"url",void 0),i}(t.ChildProperty),he=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),de=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},pe=["NewFolder","Upload","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"],ce=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return he(i,e),de([t.Property(pe)],i.prototype,"items",void 0),de([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),ue=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fe=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},me=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ue(i,e),fe([t.Property(!0)],i.prototype,"allowSearchOnTyping",void 0),fe([t.Property("contains")],i.prototype,"filterType",void 0),fe([t.Property(!0)],i.prototype,"ignoreCase",void 0),i}(t.ChildProperty),ge=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ye=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},be=[{field:"name",headerText:"Name",minWidth:120,width:"auto",template:'<span class="e-fe-text" title="${name}">${name}</span>',customAttributes:{class:"e-fe-grid-name"}},{field:"dateModified",headerText:"DateModified",format:{type:"date",format:"MMMM dd, yyyy HH:mm"},minWidth:50,width:"190"},{field:"size",headerText:"Size",minWidth:50,width:"110",template:'<span class="e-fe-size">${size}</span>'}],ve=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ge(i,e),ye([t.Property(!0)],i.prototype,"columnResizing",void 0),ye([t.Property(be)],i.prototype,"columns",void 0),i}(t.ChildProperty),Oe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),we=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Ie=["Open","|","Delete","Download","Rename","|","Details"],Ce=["Open","|","Delete","Rename","Download","|","Details"],Se=["SortBy","View","Refresh","|","NewFolder","Upload","|","Details","|","SelectAll"],je=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Oe(i,e),we([t.Property(Ie)],i.prototype,"file",void 0),we([t.Property(Ce)],i.prototype,"folder",void 0),we([t.Property(Se)],i.prototype,"layout",void 0),we([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),Ne=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ee=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},xe=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ne(i,e),Ee([t.Property("650px")],i.prototype,"maxWidth",void 0),Ee([t.Property("240px")],i.prototype,"minWidth",void 0),Ee([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),De=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pe=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Re=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return De(i,e),Pe([t.Property(!0)],i.prototype,"autoUpload",void 0),Pe([t.Property(0)],i.prototype,"minFileSize",void 0),Pe([t.Property(3e7)],i.prototype,"maxFileSize",void 0),i}(t.ChildProperty),Me="_toolbar",ke="_tree",Le="_grid",Te="_largeicons",Ae="_dialog",Be="_img_dialog",_e="_extn_dialog",Ue="_upload_dialog",Fe="_contextmenu",Ve="_content",He="_breadcrumbbar",qe="_upload",ze="e-fe-cb-select",Ke="e-fe-popup",We="e-fe-mobile",Ge="e-fe-m-select",Ye="e-fe-m-filter",Je="e-layout-content",Xe="e-large-icons",$e="e-toolbar-item",Qe="e-list-item",Ze="e-list-text",et="e-list-parent",tt="e-icons e-fe-tick",it="e-icons e-fe-dot",nt="e-blur",st="e-active",at="e-hover",ot="e-focus",rt="e-check",lt="e-checkbox-wrapper",ht="e-rowcell",dt="e-empty",pt="e-empty-content",ct="e-empty-inner-content",ut="e-fe-image",ft="e-fe-music",mt="e-fe-video",gt="e-large-icon",yt="e-empty-icon e-fe-folder",bt="e-fe-folder",vt="e-templatecell",Ot="e-treeview",wt="e-menu-icon",It="e-content",Ct="e-list-parent",St="e-icons e-fe-open",jt="e-icons e-fe-upload",Nt="e-icons e-fe-cut",Et="e-icons e-fe-copy",xt="e-icons e-fe-paste",Dt="e-icons e-fe-delete",Pt="e-icons e-fe-rename",Rt="e-icons e-fe-newfolder",Mt="e-icons e-fe-details",kt="e-icons e-fe-sort",Lt="e-icons e-fe-refresh",Tt="e-icons e-fe-select",At="e-icons e-fe-download",Bt="e-icons e-fe-grid",_t="e-icons e-fe-large",Ut="e-icons e-fe-breadcrumb",Ft="e-icons e-fe-clear",Vt="e-icons",Ht="e-fe-errorcontent",qt="e-status",zt="e-display-none",Kt="e-fullrow",Wt="e-split-bar",Gt="e-headercheck",Yt="e-fe-value",Jt="isFile",Xt="model-changed",$t="initial-end",Qt="finalize-end",Zt="create-end",ei="delete-end",ti="refresh-end",ii="resize-end",ni="splitter-resize",si="path-changed",ai="destroy",oi="before-request",ri="after-request",li="search",hi="open-init",di="open-end",pi="selection-changed",ci="select-all-init",ui="clear-all-init",fi="clear-path-init",mi="layout-change",gi="sort-by-change",yi="node-expand",bi="rename-init",vi="rename-end",Oi="show-paste",wi="hide-paste",Ii="hide-layout",Ci="update-tree-selection",Si="sort-column",ji="path-column",Ni="search-change",Ei="download-init",xi=function(){function e(e){this.pasteOperation=!1,this.uploadOperation=!1,this.count=0,this.isRendered=!0,this.tapCount=0,this.isSetModel=!1,this.parent=e,this.element=t.select("#"+this.parent.element.id+Te,this.parent.element),t.addClass([this.element],Xe),this.addEventListener(),this.keyConfigs={end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace"}}return e.prototype.render=function(e){if(this.element.setAttribute("tabindex","0"),this.parent.visitedItem=null,this.startItem=null,"LargeIcons"===this.parent.view){this.resetMultiSelect(),this.listObj&&(this.unWireEvents(),this.removeEventListener()),this.parent.notify(Ii,{});var i=t.select("#"+this.parent.element.id+Te,this.parent.element),n=t.select("ul",i);if(n&&t.remove(n),this.listObj={ariaAttributes:{itemRole:"",listRole:"",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},showIcon:!0,fields:{text:"name",iconCss:"icon",imageUrl:"imageUrl"},sortOrder:this.parent.sortOrder,itemCreated:this.onItemCreated.bind(this)},this.items=[],this.items=this.renderList(e),this.items=N(this.parent,this.items),this.listElements=o.ListBase.createListFromJson(t.createElement,this.items,this.listObj),this.itemList=Array.prototype.slice.call(t.selectAll("."+Qe,this.listElements)),this.element.appendChild(this.listElements),0===this.itemList.length){var s=this.element.querySelector("."+et);this.element.removeChild(s),D(this.parent,t.getValue("name",e),this.element)}else 0!==this.itemList.length&&this.element.querySelector("."+dt)&&this.element.removeChild(this.element.querySelector("."+dt));!0===this.pasteOperation&&(this.selectItems(e.files,this.parent.selectedNodes),this.parent.setProperties({selectedItems:[]},!0),this.pasteOperation=!1),!0===this.uploadOperation&&(this.selectItems(e.files,this.parent.uploadItem),this.parent.setProperties({selectedItems:[]},!0),this.count++,this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[]));0!==this.element.querySelectorAll("."+st).length&&(this.parent.activeModule="largeiconsview"),i.classList.remove(zt),this.adjustHeight(),this.element.style.maxHeight="100%",this.getItemCount(),this.addEventListener(),this.wireEvents(),this.isRendered=!0,this.parent.selectedItems.length&&this.checkItem()}},e.prototype.getModuleName=function(){return"largeiconsview"},e.prototype.adjustHeight=function(){var e=t.select("#"+this.parent.element.id+Ve,this.parent.element),i=t.select("#"+this.parent.element.id+He,this.parent.element);this.element.style.height=e.offsetHeight-i.offsetHeight+"px"},e.prototype.onItemCreated=function(e){if(!this.parent.showFileExtension&&t.getValue("isFile",e.curData)){var i=e.item.querySelector("."+Ze),n=t.getValue("name",e.curData),s=t.getValue("type",e.curData);i.innerHTML=n.substr(0,n.length-s.length)}this.renderCheckbox(e);var a={element:e.item,fileDetails:e.curData,module:"LargeIconsView"};this.parent.trigger("beforeFileLoad",a)},e.prototype.renderCheckbox=function(e){if(this.parent.allowMultiSelection){var i;(i=r.createCheckBox(t.createElement,!1,{checked:!1,cssClass:"e-small"})).setAttribute("role","checkbox"),i.setAttribute("aria-checked","false"),e.item.firstElementChild.insertBefore(i,e.item.firstElementChild.childNodes[0])}},e.prototype.onLayoutChange=function(e){if("LargeIcons"===this.parent.view){if(this.destroy(),this.render(e),this.parent.cutNodes&&0!==this.parent.cutNodes.length)for(var t=this.getIndexes(e.files,this.parent.selectedNodes),i=0;i<t.length;)g(this.itemList[t[i]]),i++;var n=this.element.querySelectorAll("."+st);this.parent.activeElements=0!==n.length?n:this.parent.activeElements,0!==n.length&&this.element.focus(),this.checkItem()}else this.element.setAttribute("tabindex","-1")},e.prototype.checkItem=function(){var e=this.element.querySelectorAll("."+st);if(e)for(var t=0;t<e.length;)this.checkState(e[t],!0),t++},e.prototype.renderList=function(e){for(var i=0,n=JSON.parse(JSON.stringify(e.files));i<n.length;){var s=S(n[i]),a=this.parent.pasteNodes,o=this.parent.selectedItems&&-1!==this.parent.selectedItems.indexOf(t.getValue("name",e.files[i]))||a&&0!==a.length&&-1!==a.indexOf(t.getValue("name",e.files[i]))?gt+" e-active":gt;if(s===ut&&this.parent.showThumbnail){var r=j(this.parent,n[i]);t.setValue("imageUrl",r,n[i])}else t.setValue("icon",s,n[i]);t.setValue("htmlAttributes",{class:o,title:t.getValue("name",e.files[i])},n[i]),i++}return n},e.prototype.onFinalizeEnd=function(e){this.render(e),this.parent.notify(Ni,e)},e.prototype.onCreateEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.clearSelect(),this.selectItems(e.files,[t.getValue("name",this.parent.createdItem)]),this.parent.createdItem=null,this.parent.largeiconsviewModule.element.focus(),this.parent.persistData=!1)},e.prototype.onDeleteEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.parent.setProperties({selectedItems:[]},!0),this.clearSelect())},e.prototype.onRefreshEnd=function(e){"LargeIcons"===this.parent.view&&this.onLayoutChange(e)},e.prototype.onRenameInit=function(){"LargeIcons"===this.parent.view&&1===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onRenameEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.clearSelect(),this.parent.setProperties({selectedItems:[]},!0),this.selectItems(e.files,[t.getValue("name",this.parent.renamedItem)]),this.parent.renamedItem=null)},e.prototype.onPathChanged=function(e){this.parent.breadcrumbbarModule.searchObj.value&&""===this.parent.breadcrumbbarModule.searchObj.value&&(this.parent.searchedItems=[]),"LargeIcons"===this.parent.view&&(y(this.parent),this.parent.persistData||(this.parent.selectedItems=[]),this.parent.persistData=!1,this.parent.pasteNodes=[],this.parent.cutNodes=[],this.onLayoutChange(e),this.parent.notify(Ni,e))},e.prototype.onOpenInit=function(e){"largeiconsview"===this.parent.activeModule&&this.doOpenAction(e.target)},e.prototype.onHideLayout=function(e){"LargeIcons"!==this.parent.view&&this.element&&this.element.classList.add(zt)},e.prototype.onSelectAllInit=function(){if("LargeIcons"===this.parent.view){this.startItem=this.getFirstItem();var e=this.getLastItem();this.doSelection(e,{ctrlKey:!0,shiftKey:!0})}},e.prototype.onClearAllInit=function(){"LargeIcons"===this.parent.view&&this.clearSelection()},e.prototype.onBeforeRequest=function(){this.isRendered=!1},e.prototype.onAfterRequest=function(e){this.isRendered=!0},e.prototype.onSearch=function(e){this.parent.searchedItems=e.files,this.onLayoutChange(e)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Qt,this.onFinalizeEnd),this.parent.off(Zt,this.onCreateEnd),this.parent.off(ei,this.onDeleteEnd),this.parent.off(ti,this.onRefreshEnd),this.parent.off(si,this.onPathChanged),this.parent.off(mi,this.onLayoutChange),this.parent.off(li,this.onSearch),this.parent.off(hi,this.onOpenInit),this.parent.off(di,this.onLayoutChange),this.parent.off(Xt,this.onPropertyChanged),this.parent.off(bi,this.onRenameInit),this.parent.off(vi,this.onRenameEnd),this.parent.off(Ii,this.onHideLayout),this.parent.off(ci,this.onSelectAllInit),this.parent.off(ui,this.onClearAllInit),this.parent.off(oi,this.onBeforeRequest),this.parent.off(ri,this.onAfterRequest),this.parent.off(ni,this.resizeHandler),this.parent.off(ii,this.resizeHandler))},e.prototype.addEventListener=function(){this.parent.on(Qt,this.onFinalizeEnd,this),this.parent.on(Zt,this.onCreateEnd,this),this.parent.on(ei,this.onDeleteEnd,this),this.parent.on(ti,this.onRefreshEnd,this),this.parent.on(si,this.onPathChanged,this),this.parent.on(mi,this.onLayoutChange,this),this.parent.on(li,this.onSearch,this),this.parent.on(hi,this.onOpenInit,this),this.parent.on(bi,this.onRenameInit,this),this.parent.on(vi,this.onRenameEnd,this),this.parent.on(di,this.onLayoutChange,this),this.parent.on(Xt,this.onPropertyChanged,this),this.parent.on(Ii,this.onHideLayout,this),this.parent.on(ci,this.onSelectAllInit,this),this.parent.on(ui,this.onClearAllInit,this),this.parent.on(oi,this.onBeforeRequest,this),this.parent.on(ri,this.onAfterRequest,this),this.parent.on(ni,this.resizeHandler,this),this.parent.on(ii,this.resizeHandler,this)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++){switch(n[i]){case"height":this.adjustHeight();break;case"selectedItems":if(this.isSetModel=!0,0!==this.parent.selectedItems.length){var s=t.getValue(this.parent.path,this.parent.feFiles);this.selectItems(s,this.parent.selectedItems)}else for(;this.element.querySelectorAll("."+st).length>0;)this.removeActive(this.element.querySelectorAll("."+st)[0]);this.isSetModel=!1;break;case"showThumbnail":b(this.parent);break;case"showFileExtension":case"showHiddenItems":A(this.parent,si,this.parent.path);break;case"allowMultiSelection":b(this.parent),this.parent.selectedItems.length>1&&!this.parent.allowMultiSelection&&(this.parent.selectedItems=[]);break;case"view":A(this.parent,mi,this.parent.path)}}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.listObj&&this.unWireEvents())},e.prototype.wireEvents=function(){this.wireClickEvent(!0),this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),this.keyboardDownModule=new t.KeyboardEvents(this.element,{keyAction:this.keydownActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),t.EventHandler.add(this.element,"mouseover",this.onMouseOver,this)},e.prototype.unWireEvents=function(){this.wireClickEvent(!1),t.EventHandler.remove(this.element,"mouseover",this.onMouseOver),this.keyboardModule.destroy(),this.keyboardDownModule.destroy()},e.prototype.onMouseOver=function(e){var i=t.closest(e.target,".e-list-item");y(this.parent,"hover"),null!==i&&i.classList.add(at)},e.prototype.wireClickEvent=function(e){if(e){var i=this;this.clickObj=new t.Touch(this.element,{tap:function(e){e.originalEvent.preventDefault(),i.parent.isDevice?(i.tapCount=e.tapCount,i.tapEvent=e,setTimeout(function(){i.tapCount>0&&i.doTapAction(i.tapEvent),i.tapCount=0},350)):2===e.tapCount&&3!==e.originalEvent.which?i.dblClickHandler(e):i.clickHandler(e)},tapHold:function(e){i.parent.isDevice&&(i.multiSelect=!!i.parent.allowMultiSelection,i.parent.allowMultiSelection&&t.addClass([i.parent.element],Ge),i.clickHandler(e))}})}else this.clickObj&&this.clickObj.destroy()},e.prototype.doTapAction=function(e){var i=e.originalEvent.target,n=t.closest(i,"."+Qe);this.multiSelect||i.classList.contains(et)||t.isNullOrUndefined(n)?this.clickHandler(e):(this.parent.isFile=!1,this.updateType(n),this.parent.isFile?2===e.tapCount?(this.clickHandler(e),this.dblClickHandler(e)):this.clickHandler(e):this.dblClickHandler(e))},e.prototype.clickHandler=function(e){var t=e.originalEvent.target;y(this.parent,"hover"),this.doSelection(t,e.originalEvent),this.parent.activeModule="largeiconsview"},e.prototype.doSelection=function(e,i){var n=t.closest(e,"."+Qe),s=(this.getFocusedItem(),e.classList);this.parent.isFile=!1;var a="select";if(3!==i.which||t.isNullOrUndefined(n)||!n.classList.contains(st)){if(t.isNullOrUndefined(n))this.clearSelection();else{if(this.parent.allowMultiSelection&&(this.multiSelect||!i||i.ctrlKey)||s.contains("e-frame")||(this.updateType(n),this.clearSelect()),this.parent.allowMultiSelection&&i.shiftKey){i&&i.ctrlKey||this.clearSelect(),this.startItem||(this.startItem=n);var o=this.itemList.indexOf(this.startItem),r=this.itemList.indexOf(n);if(o>r)for(var l=o;l>=r;l--)this.addActive(this.itemList[l]);else for(l=o;l<=r;l++)this.addActive(this.itemList[l]);this.addFocus(this.itemList[r])}else this.startItem=n,this.parent.allowMultiSelection&&n.classList.contains(st)?(this.removeActive(n),a="unselect"):this.addActive(n),this.addFocus(n);0===this.parent.selectedItems.length&&this.resetMultiSelect(),this.parent.notify(pi,{}),this.triggerSelect(a,n)}this.parent.activeElements=this.element.querySelectorAll(".e-active")}else this.updateType(n)},e.prototype.dblClickHandler=function(e){this.parent.activeModule="largeiconsview";var t=e.originalEvent.target;this.doOpenAction(t)},e.prototype.clearSelection=function(){this.clearSelect(),this.resetMultiSelect(),this.parent.notify(pi,{})},e.prototype.resetMultiSelect=function(){this.multiSelect=!1,t.removeClass([this.parent.element],Ge)},e.prototype.doOpenAction=function(e){if(!t.isNullOrUndefined(e)){var i=t.closest(e,"."+Qe);if(this.parent.isFile=!1,!t.isNullOrUndefined(i)){this.updateType(i);var n=this.getItemObject(i),s={cancel:!1,fileDetails:n};if(this.parent.trigger("beforeFileOpen",s),s.cancel)return;var a=t.select("."+Ze,i).textContent;if(this.parent.isFile){if(S(n)===ut){var o=j(this.parent,n);se(this.parent,t.getValue("name",n),o)}}else{if(""===this.parent.breadcrumbbarModule.searchObj.element.value){var r=this.parent.path+a+"/";this.parent.setProperties({path:r},!0),this.parent.pathId.push(t.getValue("nodeId",n)),this.parent.itemData=[n],v(this.parent)}else T(this.parent,n);this.parent.setProperties({selectedItems:[]},!0)}}}},e.prototype.updateType=function(e){var i=t.select(".e-fe-folder",e);this.parent.isFile=!!t.isNullOrUndefined(i)},e.prototype.keydownActionHandler=function(e){if(this.isRendered)switch(e.action){case"end":case"home":case"moveDown":case"moveLeft":case"moveRight":case"moveUp":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"ctrlRight":case"shiftRight":case"csRight":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":e.preventDefault()}},e.prototype.keyActionHandler=function(e){if(this.isRendered){var i=this.getFocusedItem(),n=this.getFirstItem(),s=this.getLastItem();switch(e.action){case"end":this.navigateItem(s);break;case"home":this.navigateItem(n);break;case"tab":t.isNullOrUndefined(i)?t.isNullOrUndefined(n)||this.addFocus(n):this.addFocus(i);break;case"moveDown":this.navigateDown(i,!0);break;case"moveLeft":this.navigateRight(i,!1);break;case"moveRight":this.navigateRight(i,!0);break;case"moveUp":this.navigateDown(i,!1);break;case"ctrlEnd":case"shiftEnd":case"csEnd":this.csEndKey(s,e);break;case"ctrlHome":case"shiftHome":case"csHome":this.csHomeKey(n,e);break;case"ctrlDown":case"shiftDown":case"csDown":this.csDownKey(i,e);break;case"ctrlLeft":case"shiftLeft":case"csLeft":this.csLeftKey(i,e);break;case"ctrlRight":case"shiftRight":case"csRight":this.csRightKey(i,e);break;case"ctrlUp":case"shiftUp":case"csUp":this.csUpKey(i,e);break;case"space":this.spaceKey(i);break;case"ctrlSpace":case"shiftSpace":case"csSpace":t.isNullOrUndefined(i)||this.doSelection(i,e);break;case"ctrlA":this.ctrlAKey(n,s);break;case"enter":this.doOpenAction(this.parent.visitedItem?this.parent.visitedItem:this.getVisitedItem());break;case"altEnter":this.parent.getDetails();break;case"esc":this.escapeKey();break;case"del":case"shiftdel":this.parent.selectedItems&&this.parent.selectedItems.length>0&&X(this.parent,"Delete");break;case"ctrlC":this.copy();break;case"ctrlV":this.parent.pasteHandler();break;case"ctrlX":this.cut();break;case"f2":1===this.parent.selectedItems.length&&(this.updateRenameData(),X(this.parent,"Rename"))}}},e.prototype.updateRenameData=function(){var e=t.select("."+Qe+"."+st,this.element),i=this.getItemObject(e);this.parent.itemData=[i],this.parent.currentItemText=t.getValue("name",i),this.parent.isFile=t.getValue("isFile",i)},e.prototype.getVisitedItem=function(){var e=t.getValue(this.parent.path,this.parent.feFiles),i=this.parent.selectedItems[this.parent.selectedItems.length-1],n=this.getIndexes(e,[i]);return this.itemList[n[0]]},e.prototype.getFocusedItem=function(){return t.select("."+Qe+"."+ot,this.element)},e.prototype.getActiveItem=function(){return t.select("."+Qe+"."+st,this.element)},e.prototype.getFirstItem=function(){return this.itemList[0]},e.prototype.getLastItem=function(){return this.itemList[this.itemList.length-1]},e.prototype.navigateItem=function(e){this.setFocus(e)},e.prototype.navigateDown=function(e,t){var i=this.getNextItem(e,t,this.perRow);this.setFocus(i)},e.prototype.navigateRight=function(e,t){var i=this.getNextItem(e,t);this.setFocus(i)},e.prototype.getNextItem=function(e,i,n){if(t.isNullOrUndefined(e))return this.getFocusedItem()||this.getActiveItem()||this.getFirstItem();var s,a=this.itemList.indexOf(e);do{if(a=i?n?a+n:a+1:n?a-n:a-1,s=this.itemList[a],t.isNullOrUndefined(s))return e}while(!t.isVisible(s));return s},e.prototype.setFocus=function(e){t.isNullOrUndefined(e)||(this.startItem=e,this.clearSelect(),this.addActive(e),this.addFocus(e),this.parent.notify(pi,{}),this.triggerSelect("select",e))},e.prototype.cut=function(){C(this.parent),this.parent.fileOperation(this.parent.nodeNames)},e.prototype.copy=function(){I(this.parent),this.parent.fileOperation(this.parent.nodeNames)},e.prototype.escapeKey=function(){y(this.parent),this.parent.selectedNodes=[],this.parent.navigationpaneModule.treeNodes=[]},e.prototype.spaceKey=function(e){t.isNullOrUndefined(e)||e.classList.contains(st)||(this.addActive(e),this.parent.notify(pi,{}),this.triggerSelect("select",e))},e.prototype.ctrlAKey=function(e,i){if(this.parent.allowMultiSelection&&!t.isNullOrUndefined(e)){this.startItem=e;this.doSelection(i,{ctrlKey:!0,shiftKey:!0})}},e.prototype.csEndKey=function(e,i){this.parent.allowMultiSelection?t.isNullOrUndefined(e)||("ctrlEnd"===i.action?this.addFocus(e):this.doSelection(e,i)):this.navigateItem(e)},e.prototype.csHomeKey=function(e,i){this.parent.allowMultiSelection?t.isNullOrUndefined(e)||("ctrlHome"===i.action?this.addFocus(e):this.doSelection(e,i)):this.navigateItem(e)},e.prototype.csDownKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!0,this.perRow);t.isNullOrUndefined(n)||("ctrlDown"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateDown(e,!0)},e.prototype.csLeftKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!1);t.isNullOrUndefined(n)||("ctrlLeft"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateRight(e,!1)},e.prototype.csRightKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!0);t.isNullOrUndefined(n)||("ctrlRight"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateRight(e,!0)},e.prototype.csUpKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!1,this.perRow);t.isNullOrUndefined(n)||("ctrlUp"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateDown(e,!1)},e.prototype.addActive=function(e){t.isNullOrUndefined(e)||(e.classList.contains(st)||(this.isSetModel||this.parent.selectedItems.push(e.textContent),t.addClass([e],[st]),this.checkState(e,!0)),this.parent.visitedItem=e)},e.prototype.removeActive=function(e){if(!t.isNullOrUndefined(e)){t.removeClass([e],[st]),this.checkState(e,!1);var i=this.parent.selectedItems.indexOf(e.textContent);i>-1&&this.parent.selectedItems.splice(i,1),this.parent.visitedItem=null}},e.prototype.addFocus=function(e){var i=this.getFocusedItem();i&&t.removeClass([i],[ot]),t.addClass([e],[ot])},e.prototype.checkState=function(e,i){if(this.parent.allowMultiSelection){var n=t.select(".e-frame",e);i?n.classList.contains(rt)||(t.addClass([n],rt),t.closest(n,"."+lt).setAttribute("aria-checked","true")):n.classList.contains(rt)&&(t.removeClass([n],rt),t.closest(n,"."+lt).setAttribute("aria-checked","false"))}},e.prototype.clearSelect=function(){for(var e=Array.prototype.slice.call(t.selectAll("."+st,this.listElements)),i=0,n=e.length;i<n;i++)this.removeActive(e[i])},e.prototype.resizeHandler=function(){this.getItemCount()},e.prototype.getItemCount=function(){var e=1;if(this.itemList)for(var t=0,i=this.itemList.length-1;t<i&&this.itemList[t].getBoundingClientRect().top===this.itemList[t+1].getBoundingClientRect().top;t++)e++;this.perRow=e},e.prototype.triggerSelect=function(e,t){var i=this.getItemObject(t);this.parent.visitedData=i;var n={action:e,fileDetails:i};this.parent.trigger("fileSelect",n)},e.prototype.selectItems=function(e,t){for(var i=this.getIndexes(e,t),n=0,s=i.length;n<s;n++){this.doSelection(this.itemList[i[n]],{ctrlKey:!0,shiftKey:!1})}},e.prototype.getIndexes=function(e,i){for(var n=[],s=0,a=this.items.length;s<a;s++)-1!==i.indexOf(t.getValue("name",this.items[s]))&&n.push(s);return n},e.prototype.getItemObject=function(e){var t=this.itemList.indexOf(e);return this.items[t]},e}(),Di=function(){function e(e){this.addressPath="",this.addressBarLink="",this.parent=e,this.treeView=this.parent.navigationpaneModule,this.keyConfigs={enter:"enter"},this.render()}return e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++){switch(n[i]){case"searchSettings":t.isNullOrUndefined(e.newProp.searchSettings.allowSearchOnTyping)||this.searchEventBind(e.newProp.searchSettings.allowSearchOnTyping)}}},e.prototype.render=function(){this.addEventListener()},e.prototype.onPathChange=function(){var e=t.getValue("name",t.getValue("/",this.parent.feParent));this.addressBarLink?this.addressPath=this.addressBarLink:this.addressPath=e+this.parent.path;var i=this.addressPath,n=i.substring(i.indexOf("/"),i.length);this.parent.setProperties({path:n},!0);var s=[];s=i.split("/");var a=null;(a=this.parent.createElement("ul")).setAttribute("class","e-addressbar-ul");var o=null,r=s.length-1;if(s.length>1){for(var l="",h=0;h<r;h++){var d=null;o=this.parent.createElement("li");for(var p=0;p<=h;p++)l=l+s[p]+"/";if(o.setAttribute("data-utext",l),o.classList.add("e-address-list-item"),0!==h){var c=t.createElement("span",{className:Vt});o.appendChild(c)}r-h!=1?(d=t.createElement("a",{className:Ze}),o.setAttribute("tabindex","0")):d=t.createElement("span",{className:Ze}),l="",d.innerText=s[h],o.appendChild(d),a.appendChild(o)}var u=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul");t.isNullOrUndefined(u)||(t.isNullOrUndefined(this.subMenuObj)||this.subMenuObj.destroy(),t.remove(u));var f=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");f?this.parent.breadCrumbBarNavigation.appendChild(a):this.parent.breadCrumbBarNavigation.insertBefore(a,f),this.updateBreadCrumbBar(a)}this.addressBarLink=""},e.prototype.updateBreadCrumbBar=function(e){for(var i=e.querySelectorAll("li"),n=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul"),s=window.getComputedStyle(n,null),o=parseFloat(s.getPropertyValue("padding-right")),r=parseFloat(s.getPropertyValue("padding-left")),h=n.offsetWidth-o-r,d=this.parent.createElement("ul",{className:"e-addressbar-ul"}),p=0,c=[],u=0;u<i.length;u++){var f=i[u].clientWidth;c.push(f),p+=f}t.isNullOrUndefined(n)||t.remove(n);var m=this.parent.createElement("div");m.setAttribute("class","e-search-wrap");var g=this.parent.element.id+"_search",y=t.createElement("input",{id:g,attrs:{autocomplete:"off"}});m.appendChild(y);var b=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap .e-input");if(t.isNullOrUndefined(b)){this.parent.breadCrumbBarNavigation.appendChild(m);var v=t.createElement("span",{className:"e-icons e-fe-search"});t.EventHandler.add(v,"click",this.onShowInput,this),y.parentElement.insertBefore(v,y),this.searchObj=new a.TextBox({value:"",showClearButton:!0,placeholder:R(this.parent,"Search"),focus:this.onFocus.bind(this),blur:this.onBlur.bind(this)}),this.searchObj.appendTo("#"+this.parent.element.id+"_search"),this.searchEventBind(this.parent.searchSettings.allowSearchOnTyping);var O=this.searchObj.element.nextElementSibling;t.EventHandler.add(O,"mousedown",this.searchChangeHandler.bind(this),this),t.EventHandler.add(this.searchObj.element,"keyup",this.onKeyUp.bind(this),this)}var w=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");if(h-=w.offsetWidth,p>h){for(u=i.length;u--;){var I=h-c[u];if(!(I>40)){for(var C=[],S=0;S<=u;S++){var j=i[S];C.push({text:j.innerText,utext:j.getAttribute("data-utext")})}var N=this.parent.createElement("li",{className:"e-breadcrumb-menu"}),E=this.parent.createElement("button",{className:"e-breadcrumb-submenu"});N.appendChild(E),d.insertBefore(N,d.querySelector("li")),this.subMenuObj=new l.DropDownButton({items:C,cssClass:"e-caret-hide e-submenu",iconCss:Ut,iconPosition:"Top",beforeItemRender:this.addSubMenuAttributes.bind(this),select:this.subMenuSelectOperations.bind(this)}),this.subMenuObj.appendTo(E);break}d.insertBefore(i[u],d.querySelector("li")),h=I}this.parent.breadCrumbBarNavigation.insertBefore(d,w)}else this.parent.breadCrumbBarNavigation.insertBefore(e,w)},e.prototype.onFocus=function(){t.closest(this.searchObj.element,".e-search-wrap").classList.add("e-focus")},e.prototype.onKeyUp=function(){this.parent.notify(ji,{args:this.parent})},e.prototype.onBlur=function(){t.closest(this.searchObj.element,".e-search-wrap").classList.remove("e-focus")},e.prototype.subMenuSelectOperations=function(e){var t={target:e.element};this.addressPathClickHandler(t)},e.prototype.addSubMenuAttributes=function(e){e.element.setAttribute("data-utext",t.getValue("utext",e.item));var i=this.parent.createElement("a",{className:"e-list-text"});e.element.appendChild(i)},e.prototype.searchEventBind=function(e){e?(this.searchObj.input=this.searchChangeHandler.bind(this),this.searchObj.change=null):(this.searchObj.change=this.searchChangeHandler.bind(this),this.searchObj.input=null)},e.prototype.searchChangeHandler=function(e){if(!t.isNullOrUndefined(e.value)){var i=void 0;if(0===e.value.length&&this.parent.notify(ji,{args:this.parent}),i="startWith"===this.parent.searchSettings.filterType?"*"+e.value:"endsWith"===this.parent.searchSettings.filterType?e.value+"*":"*"+e.value+"*",this.searchObj.element.value.length>0){var n=this.parent.searchSettings.ignoreCase,s=this.parent.showHiddenItems;G(this.parent,li,this.parent.path,i,s,!n)}else A(this.parent,li,this.parent.path)}},e.prototype.addressPathClickHandler=function(e){var i=e.target;if("LI"===i.nodeName||"A"===i.nodeName){var n="LI"===i.nodeName?i.children[0]:i;if(!t.isNullOrUndefined(n)){var s=this.updatePath(n);this.liClick(s);var a=this.parent.pathId[this.parent.pathId.length-1];this.parent.notify(Ci,{module:"treeview",selectedNode:a})}}},e.prototype.onShowInput=function(){this.parent.isMobile&&(this.parent.element.classList.contains(Ye)?t.removeClass([this.parent.element],Ye):(t.addClass([this.parent.element],Ye),this.searchObj.element.focus()))},e.prototype.updatePath=function(e){var i=t.closest(e,"li").getAttribute("data-utext");this.addressBarLink=i;var n=this.addressBarLink.split("/"),s=this.parent.pathId;this.parent.pathId=[];for(var a=0,o=n.length-1;a<o;a++)this.parent.pathId.push(s[a]);return this.addressBarLink.substr(this.addressBarLink.indexOf("/"),this.addressBarLink.length)},e.prototype.onUpdatePath=function(){this.onPathChange(),this.removeSearchValue()},e.prototype.onCreateEnd=function(e){this.addressPath.substring(this.addressPath.indexOf("/"),this.addressPath.length)!==this.parent.path&&this.onPathChange()},e.prototype.onDeleteEnd=function(){this.addressPath.substring(this.addressPath.indexOf("/"),this.addressPath.length)!==this.parent.path&&this.onUpdatePath()},e.prototype.removeSearchValue=function(){""===this.searchObj.value&&""===this.searchObj.element.value||(this.searchObj.value="",this.searchObj.element.value="",this.searchObj.dataBind())},e.prototype.onResize=function(){this.onPathChange()},e.prototype.liClick=function(e){A(this.parent,si,e)},e.prototype.addEventListener=function(){this.keyboardModule=new t.KeyboardEvents(this.parent.breadCrumbBarNavigation,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.parent.on(Xt,this.onPropertyChanged,this),t.EventHandler.add(this.parent.breadCrumbBarNavigation,"click",this.addressPathClickHandler,this),this.parent.on(ai,this.destroy,this),this.parent.on(si,this.onUpdatePath,this),this.parent.on(Qt,this.onUpdatePath,this),this.parent.on(ti,this.onUpdatePath,this),this.parent.on(di,this.onUpdatePath,this),this.parent.on(Zt,this.onCreateEnd,this),this.parent.on(vi,this.onUpdatePath,this),this.parent.on(ei,this.onDeleteEnd,this),this.parent.on(ni,this.onResize,this),this.parent.on(ii,this.onResize,this),this.parent.on(Ni,this.onSearchTextChange,this)},e.prototype.keyActionHandler=function(e){switch(e.action){case"enter":e.preventDefault(),this.addressPathClickHandler(e)}},e.prototype.removeEventListener=function(){this.keyboardModule.destroy(),this.parent.off(si,this.onUpdatePath),this.parent.off(Qt,this.onUpdatePath),this.parent.off(ti,this.onUpdatePath),this.parent.off(di,this.onUpdatePath),this.parent.off(Zt,this.onCreateEnd),this.parent.off(vi,this.onUpdatePath),this.parent.off(ei,this.onDeleteEnd),this.parent.off(ni,this.onResize),this.parent.off(ii,this.onResize),this.parent.off(Ni,this.onSearchTextChange)},e.prototype.getModuleName=function(){return"breadcrumbbar"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),t.isNullOrUndefined(this.subMenuObj)||this.subMenuObj.destroy(),t.isNullOrUndefined(this.searchObj)||this.searchObj.destroy())},e.prototype.onSearchTextChange=function(e){this.searchObj.element.placeholder=R(this.parent,"Search")+" "+e.cwd.name},e}(),Pi=function(){function e(e){this.parent=e,this.render()}return e.prototype.render=function(){this.keyConfigs={downarrow:"downarrow",uparrow:"uparrown"},this.contextMenu=new h.ContextMenu({enableRtl:this.parent.enableRtl,locale:this.parent.locale,target:"#"+this.parent.element.id,beforeItemRender:this.onBeforeItemRender.bind(this),select:this.onSelect.bind(this),beforeOpen:this.onBeforeOpen.bind(this),cssClass:M(this.parent,Ke)}),this.contextMenu.appendTo("#"+this.parent.element.id+Fe),this.addEventListener()},e.prototype.onBeforeItemRender=function(e){if(e.item.id===this.getMenuId("largeiconsview")){var i=t.createElement("span");(n=e.element).insertBefore(i,"LargeIcons"===this.parent.view?n.childNodes[1]:n.childNodes[0]),i.setAttribute("class",_t+" "+wt)}if(e.item.id===this.getMenuId("detailsview")){var n;i=t.createElement("span");(n=e.element).insertBefore(i,"Details"===this.parent.view?n.childNodes[1]:n.childNodes[0]),i.setAttribute("class",Bt+" "+wt)}},e.prototype.onBeforeOpen=function(e){var i,n,s=!1,a=!1,o=e.event.target;o.classList.contains("e-spinner-pane")&&(o=this.parent.navigationpaneModule.activeNode.getElementsByClassName(Kt)[0]),o.classList.contains(Kt)&&(this.parent.selectedItems.length=0),this.targetElement="Details"===this.parent.view?t.closest(o,"tr"):o;var r=this.getTargetView(o);if(o.classList.contains(Ot)||t.closest(o,"th")||t.closest(o,"#"+this.parent.element.id+He))e.cancel=!0;else if("LargeIcons"!==this.parent.view&&this.targetElement&&this.targetElement.classList.contains("e-emptyrow"))this.setLayoutItem(o);else if(t.closest(o,"."+dt))this.setLayoutItem(o);else if(!o.classList.contains("e-menu-item")&&!o.classList.contains(wt)&&!o.classList.contains("e-caret")){if("LargeIcons"!==this.parent.view||t.isNullOrUndefined(t.closest(o,"li"))||t.closest(o,"#"+this.parent.element.id+ke))t.isNullOrUndefined(t.closest(o,"tr"))?t.closest(o,"#"+this.parent.element.id+ke)&&(i=t.closest(o,"li").getAttribute("data-uid"),a=!0):(i=this.targetElement.getAttribute("data-uid"),n=this.parent.detailsviewModule.gridObj.getRowObjectFromUID(i).data,t.isNullOrUndefined(this.targetElement.getAttribute("aria-selected"))&&this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute("aria-rowindex"),10)]),s=!0);else{n=this.parent.visitedData,t.closest(o,"li").classList.contains("e-active")||this.parent.largeiconsviewModule.doSelection(o,{ctrlKey:!0,shiftKey:!0}),s=!0}s?!0===t.getValue("isFile",n)?this.setFileItem(o):this.setFolderItem(!1):a?(this.setFolderItem(!0),i===this.parent.pathId[0]&&this.contextMenu.enableItems([this.getMenuId("Delete"),this.getMenuId("Rename")],!1,!0)):"TreeView"===r||"GridView"===r||"LargeIcon"===r?this.setLayoutItem(o):e.cancel=!0}if(!e.cancel){this.contextMenu.dataBind();var l={fileDetails:O(this.parent),element:e.element,target:o,items:this.contextMenu.items,menuModule:this.contextMenu,cancel:!1};this.parent.trigger("menuOpen",l),e.cancel=l.cancel,e.cancel}},e.prototype.getTargetView=function(e){return e.classList.contains(Ot)?"TreeView":e.classList.contains(It)?"GridView":e.classList.contains(Ct)?"LargeIcon":e.classList.contains(Xe)?"LargeIcon":""},e.prototype.setFolderItem=function(e){this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.folder),this.contextMenu.dataBind(),e?this.contextMenu.enableItems([this.getMenuId("Open")],!1,!0):1!==this.parent.selectedItems.length&&this.contextMenu.enableItems([this.getMenuId("Rename")],!1,!0)},e.prototype.setFileItem=function(e){this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.file),this.contextMenu.dataBind(),1!==this.parent.selectedItems.length&&this.contextMenu.enableItems([this.getMenuId("Rename")],!1,!0)},e.prototype.setLayoutItem=function(e){this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.layout),this.contextMenu.dataBind(),("LargeIcons"===this.parent.view&&0!==t.closest(e,"#"+this.parent.element.id+Te).getElementsByClassName(dt).length||"Details"===this.parent.view&&0!==t.closest(e,"#"+this.parent.element.id+Le).getElementsByClassName(dt).length)&&(this.contextMenu.enableItems([this.getMenuId("SelectAll")],!1,!0),this.contextMenu.dataBind())},e.prototype.onSelect=function(e){if(!t.isNullOrUndefined(e.item)&&e.item.id){var i,n=e.item.id.substr((this.parent.element.id+"_cm_").length);"refresh"===n||"newfolder"===n?(i=w(this.parent),this.parent.itemData=[i]):i=O(this.parent);var s={cancel:!1,element:e.element,fileDetails:i,item:e.item};if(this.parent.trigger("menuClick",s),!s.cancel){if(this.parent.selectedItems.length>0&&("paste"===n||"upload"===n)){var a=void 0,o=void 0;if("Details"===this.parent.view){var r=this.targetElement.getAttribute("data-uid");o=this.parent.detailsviewModule.gridObj.getRowObjectFromUID(r).data}else{var l=this.targetElement.parentElement;o=E(this.parent,l)}o.isFile?a="":(a=o.name+"/",this.parent.navigationpaneModule.treeObj.selectedNodes=[o.id]);var h=this.parent.path+a;this.parent.setProperties({path:h},!0)}var d=this.parent.selectedItems;switch(n){case"cut":C(this.parent),this.parent.nodeNames&&this.parent.fileOperation(this.parent.nodeNames);break;case"copy":I(this.parent),this.parent.nodeNames&&this.parent.fileOperation(this.parent.nodeNames),"navigationpane"===this.parent.activeModule&&(this.parent.navigationpaneModule.copyNodes=this.parent.nodeNames);break;case"paste":this.parent.pasteHandler(),y(this.parent);break;case"delete":X(this.parent,"Delete");break;case"download":if("detailsview"===this.parent.activeModule)d=this.parent.detailsviewModule.gridObj.getSelectedRecords();else if("largeiconsview"===this.parent.activeModule){l=this.parent.activeElements;for(var p=0;p<l.length;p++)d[p]=E(this.parent,l[p])}else"navigationpane"===this.parent.activeModule&&0===this.parent.selectedItems.length&&(this.parent.notify(Ei,{}),d=this.parent.itemData);d.length>0&&J(this.parent,d);break;case"rename":this.parent.notify(bi,{}),X(this.parent,"Rename");break;case"selectall":this.parent.notify(ci,{});break;case"refresh":b(this.parent);break;case"open":this.parent.visitedItem&&this.parent.notify(hi,{target:this.parent.visitedItem});break;case"details":this.parent.getDetails();break;case"newfolder":X(this.parent,"NewFolder");break;case"upload":document.getElementById(this.parent.element.id+"_upload").click();break;case"name":case"size":case"date":case"ascending":case"descending":k(this.parent,e);break;case"largeiconsview":this.changeLayout("LargeIcons");break;case"detailsview":this.changeLayout("Details")}}}},e.prototype.changeLayout=function(e){this.parent.view!==e&&(this.parent.setProperties({view:e},!0),A(this.parent,mi,this.parent.path))},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"cssClass":this.contextMenu.cssClass=M(this.parent,Ke);break;case"enableRtl":this.contextMenu.enableRtl=e.newProp.enableRtl}}},e.prototype.addEventListener=function(){this.parent.on(ai,this.destroy,this),this.parent.on(Xt,this.onPropertyChanged,this),this.keyboardModule=new t.KeyboardEvents(this.contextMenu.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.removeEventListener=function(){this.parent.off(ai,this.destroy),this.parent.off(Xt,this.onPropertyChanged),this.keyboardModule.destroy()},e.prototype.keyActionHandler=function(e){switch(e.action){case"uparrow":case"downarrow":e.preventDefault()}},e.prototype.getModuleName=function(){return"contextmenu"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.contextMenu.destroy(),document.getElementById(this.parent.element.id+Fe)&&t.remove(document.getElementById(this.parent.element.id+Fe)))},e.prototype.getItemData=function(e){for(var t=[],i=0;i<e.length;i++){var n=void 0,s=this.getMenuId(e[i]),a=R(this.parent,e[i]);switch(e[i]){case"|":n={separator:!0};break;case"Open":n={id:s,text:a,iconCss:St};break;case"Upload":n={id:s,text:a,iconCss:jt};break;case"Cut":n={id:s,text:a,iconCss:Nt};break;case"Copy":n={id:s,text:a,iconCss:Et};break;case"Paste":n={id:s,text:a,iconCss:xt};break;case"Delete":n={id:s,text:a,iconCss:Dt};break;case"Rename":n={id:s,text:a,iconCss:Pt};break;case"NewFolder":n={id:s,text:a,iconCss:Rt};break;case"Details":n={id:s,text:a,iconCss:Mt};break;case"SortBy":n={id:s,text:a,iconCss:kt,items:[{id:this.getMenuId("Name"),text:R(this.parent,"Name"),iconCss:"name"===this.parent.sortBy?it:null},{id:this.getMenuId("Size"),text:R(this.parent,"Size"),iconCss:"size"===this.parent.sortBy?it:null},{id:this.getMenuId("Date"),text:R(this.parent,"DateModified"),iconCss:"dateModified"===this.parent.sortBy?it:null},{separator:!0},{id:this.getMenuId("Ascending"),text:R(this.parent,"Ascending"),iconCss:"Ascending"===this.parent.sortOrder?tt:null},{id:this.getMenuId("Descending"),text:R(this.parent,"Descending"),iconCss:"Descending"===this.parent.sortOrder?tt:null}]};break;case"View":n={id:s,text:a,iconCss:"Details"===this.parent.view?Bt:_t,items:[{id:this.getMenuId("largeiconsview"),text:R(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?null:tt},{id:this.getMenuId("detailsview"),text:R(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?tt:null}]};break;case"Refresh":n={id:s,text:a,iconCss:Lt};break;case"SelectAll":n={id:s,text:a,iconCss:Tt};break;case"Download":n={id:s,text:a,iconCss:At};break;default:n={id:s,text:a}}t.push(n)}return t},e.prototype.getMenuId=function(e){return this.parent.element.id+"_cm_"+e.toLowerCase()},e}(),Ri={NewFolder:"New folder",Upload:"Upload",Delete:"Delete",Rename:"Rename",Download:"Download",Cut:"Cut",Copy:"Copy",Paste:"Paste",SortBy:"Sort by",Refresh:"Refresh","Item-Selection":"item selected","Items-Selection":"items selected",View:"View",Details:"Details",SelectAll:"Select all",Open:"Open","Tooltip-NewFolder":"New folder","Tooltip-Upload":"Upload","Tooltip-Delete":"Delete","Tooltip-Rename":"Rename","Tooltip-Download":"Download","Tooltip-Cut":"Cut","Tooltip-Copy":"Copy","Tooltip-Paste":"Paste","Tooltip-SortBy":"Sort by","Tooltip-Refresh":"Refresh","Tooltip-Selection":"Clear selection","Tooltip-View":"View","Tooltip-Details":"Details","Tooltip-SelectAll":"Select all",Name:"Name",Size:"Size",DateModified:"Modified",DateCreated:"Date created",Modified:"Modified",Created:"Created",Location:"Location",Type:"Type",Ascending:"Ascending",Descending:"Descending","View-LargeIcons":"Large icons","View-Details":"Details",Search:"Search","Button-Ok":"OK","Button-Cancel":"Cancel","Button-Yes":"Yes","Button-No":"No","Button-Create":"Create","Button-Save":"Save","Header-NewFolder":"Folder","Content-NewFolder":"Enter your folder name","Header-Rename":"Rename","Content-Rename":"Enter your new name","Header-Rename-Confirmation":"Rename Confirmation","Content-Rename-Confirmation":"If you change a file name extension, the file might become unstable. Are you sure you want to change it?","Header-Delete":"Delete File","Content-Delete":"Are you sure you want to delete this file?","Header-Multiple-Delete":"Delete Multiple Files","Content-Multiple-Delete":"Are you sure you want to delete these {0} files?","Header-Duplicate":"File exists","Content-Duplicate":" already exists. Are you sure you want to replace it?","Header-Upload":"Upload Files",Error:"Error","Validation-Empty":"The file or folder name cannot be empty.","Validation-Invalid":'The file or folder name {0} contains invalid characters. Please use a different name. Valid file or folder names cannot end with a dot or space, and cannot contain any of the following characters: \\/:*?"<>|',"Validation-NewFolder-Exists":"A file or folder with the name {0} already exists.","Validation-Rename-Exists":"Cannot rename {0} to {1}: destination already exists.","Folder-Empty":"This folder is empty","File-Upload":"Drag files here to upload","Search-Empty":"No results found","Search-Key":"Try with different keywords"},Mi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ki=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Li=function(e){function s(t,i){var n=e.call(this,t,i)||this;return n.selectedNodes=[],n.duplicateItems=[],n.previousPath=[],n.nextPath=[],n.uploadItem=[],n.deleteRecords=[],n.isFile=!1,n.sortOrder="Ascending",n.sortBy="name",n.enablePaste=!1,n.persistData=!1,n.isOpened=!1,n.searchedItems=[],o.Inject(Di,xi,Pi),n}Mi(s,e),o=s,s.prototype.getModuleName=function(){return"filemanager"},s.prototype.preRender=function(){this.ensurePath(),this.feParent=[],this.feFiles=[],t.setStyleAttribute(this.element,{width:t.formatUnit(this.width),height:t.formatUnit(this.height)}),this.isDevice=t.Browser.isDevice,this.isMobile=this.checkMobile(),this.isMobile&&this.setProperties({navigationPaneSettings:{visible:!1}},!0);var e=t.closest(this.element,".e-bigger");this.isBigger=!!e,n.createSpinner({target:this.element},t.createElement),this.addWrapper(),this.keyConfigs={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2"},this.localeObj=new t.L10n(this.getModuleName(),Ri,this.locale)},s.prototype.getPersistData=function(){return this.addOnPersist(["view","path","selectedItems"])},s.prototype.requiredModules=function(){var e=[];return e.push({member:"breadcrumbbar",args:[this]}),e.push({member:"largeiconsview",args:[this]}),this.toolbarSettings.visible&&e.push({member:"toolbar",args:[this]}),this.navigationPaneSettings.visible&&e.push({member:"navigationpane",args:[this]}),this.view&&e.push({member:"detailsview",args:[this]}),this.contextMenuSettings.visible&&!this.isDevice&&e.push({member:"contextmenu",args:[this]}),e},s.prototype.render=function(){if(this.initialize(),this.selectedItems=t.isNullOrUndefined(this.selectedItems)?[]:this.selectedItems,this.fileView=this.view,this.setRtl(this.enableRtl),this.addEventListeners(),A(this,this.path!==this.originalPath?$t:Qt,this.path),this.adjustHeight(),t.isNullOrUndefined(this.navigationpaneModule)){this.splitterObj.collapse(0);t.select("."+Wt,this.element).classList.add(zt)}this.wireEvents()},s.prototype.ensurePath=function(){var e=this.path;t.isNullOrUndefined(e)&&(e="/"),0!==e.indexOf("/")&&(e="/"+e),e.lastIndexOf("/")!==e.length-1&&(e+="/"),this.originalPath=e,this.setProperties({path:"/"},!0),this.pathId=["fe_tree"],this.itemData=[]},s.prototype.initialize=function(){this.isMobile&&t.addClass([this.element],We),this.allowMultiSelection&&t.addClass([this.element],ze),this.addCssClass(null,this.cssClass),this.renderFileUpload()},s.prototype.addWrapper=function(){var e=this.createElement("div",{id:this.element.id+Me});this.element.appendChild(e);var t=this.createElement("div",{id:this.element.id+"_layout",className:"e-layout"});this.element.appendChild(t);var n=this.createElement("div",{id:this.element.id+ke});t.appendChild(n);var s=this.createElement("div",{id:this.element.id+Ve,className:Je});this.breadCrumbBarNavigation=this.createElement("div",{id:this.element.id+He,className:"e-address"}),s.appendChild(this.breadCrumbBarNavigation);var a=this.createElement("div",{id:this.element.id+Le});s.appendChild(a);var o=this.createElement("div",{id:this.element.id+Te,className:Xe});s.appendChild(o);var r=this.createElement("span",{className:"e-fe-overlay"});s.appendChild(r),t.appendChild(s),this.splitterObj=new i.Splitter({paneSettings:[{size:"25%",min:this.navigationPaneSettings.minWidth.toString(),max:this.navigationPaneSettings.maxWidth.toString()},{size:"75%",min:"270px"}],width:"100%",resizing:this.splitterResize.bind(this)}),this.splitterObj.appendTo(t);var l=this.createElement("div",{id:this.element.id+Ae});this.element.appendChild(l);var h=this.createElement("ul",{id:this.element.id+Fe});this.element.appendChild(h);var d=this.createElement("div",{id:this.element.id+Be});this.element.appendChild(d);var p=this.createElement("div",{id:this.element.id+_e});this.element.appendChild(p);var c=this.createElement("div",{id:this.element.id+Ue});this.element.appendChild(c)},s.prototype.adjustHeight=function(){var e=t.select("#"+this.element.id+Me,this.element),i=this.toolbarModule?e.offsetHeight:0;this.splitterObj.height=(this.element.clientHeight-i).toString(),this.splitterObj.dataBind()},s.prototype.splitterResize=function(){this.notify(ni,{})},s.prototype.splitterAdjust=function(){var e=t.select("."+Wt,this.element);this.navigationPaneSettings.visible?(this.splitterObj.expand(0),e.classList.remove(zt)):(this.splitterObj.collapse(0),e.classList.add(zt))},s.prototype.addCssClass=function(e,i){t.isNullOrUndefined(e)||""===e||t.removeClass([this.element],e.split(" ")),t.isNullOrUndefined(i)||""===i||t.addClass([this.element],i.split(" "))},s.prototype.showSpinner=function(){n.showSpinner(this.element)},s.prototype.hideSpinner=function(){n.hideSpinner(this.element)},s.prototype.onContextMenu=function(e){e.preventDefault()},s.prototype.checkMobile=function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(t.Browser.userAgent.toLowerCase())&&/mobile/i.test(t.Browser.userAgent.toLowerCase())},s.prototype.renderFileUpload=function(){var e=this.element.id+qe,t=this.createElement("input",{id:e,attrs:{name:"uploadFiles",type:"file"}});this.element.appendChild(t),this.uploadDialogObj=new n.Dialog({header:R(this,"Header-Upload"),content:t,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!1,isModal:!0,width:"350px",target:"#"+this.element.id,locale:this.locale,allowDragging:!0,position:{X:"center",Y:"center"},enableRtl:this.enableRtl,open:this.onOpen.bind(this),close:this.onClose.bind(this)}),this.uploadDialogObj.appendTo("#"+this.element.id+Ue),this.renderUploadBox()},s.prototype.renderUploadBox=function(){var e=this.ajaxSettings.uploadUrl?this.ajaxSettings.uploadUrl:this.ajaxSettings.url;this.uploadObj=new a.Uploader({dropArea:t.select("#"+this.element.id+Ve,this.element),asyncSettings:{saveUrl:e,removeUrl:e},locale:this.locale,enableRtl:this.enableRtl,uploading:this.onUploading.bind(this),removing:this.onRemoving.bind(this),clearing:this.onClearing.bind(this),selected:this.onSelected.bind(this),success:this.onUploadSuccess.bind(this),failure:this.onUploadFailure.bind(this),autoUpload:this.uploadSettings.autoUpload,minFileSize:this.uploadSettings.minFileSize,maxFileSize:this.uploadSettings.maxFileSize}),this.uploadObj.appendTo("#"+this.element.id+qe)},s.prototype.updateUploader=function(){this.uploadObj.autoUpload=this.uploadSettings.autoUpload,this.uploadObj.minFileSize=this.uploadSettings.minFileSize,this.uploadObj.maxFileSize=this.uploadSettings.maxFileSize,this.uploadObj.dataBind()},s.prototype.onOpen=function(){this.isOpened=!0,this.uploadDialogObj.element.focus()},s.prototype.onClose=function(){this.isOpened=!1,this.uploadObj.clearAll()},s.prototype.onUploading=function(e){e.customFormData=[{path:this.path},{action:"Save"}]},s.prototype.onRemoving=function(e){e.customFormData=[{path:this.path},{action:"Remove"}],1===this.uploadObj.getFilesData().length&&this.uploadDialogObj.hide()},s.prototype.onClearing=function(){this.isOpened&&this.uploadDialogObj.hide()},s.prototype.onSelected=function(){this.uploadDialogObj.show()},s.prototype.onUploadSuccess=function(e){this.trigger("onSuccess",{action:"Upload",result:e}),A(this,si,this.path)},s.prototype.onUploadFailure=function(e){this.trigger("onError",{action:"Upload",error:e})},s.prototype.onInitialEnd=function(){!function(e,i){for(var n=i.split("/"),s=e.originalPath.split("/"),a=n.length-1,o=s.length-1;a<o;a++){var r=""===s[a+1]?Qt:$t,l=""===s[a]?"/":e.path+s[a]+"/",h=x(e,s[a]),d=t.getValue("nodeId",h);e.setProperties({path:l},!0),e.pathId.push(d),e.itemData=[h],A(e,r,e.path);break}}(this,this.path)},s.prototype.addEventListeners=function(){this.on(oi,this.showSpinner,this),this.on(ri,this.hideSpinner,this),this.on($t,this.onInitialEnd,this),t.EventHandler.add(this.element,"contextmenu",this.onContextMenu,this)},s.prototype.removeEventListeners=function(){this.isDestroyed||(this.off(oi,this.showSpinner),this.off(ri,this.hideSpinner),this.off($t,this.onInitialEnd),t.EventHandler.remove(this.element,"contextmenu",this.onContextMenu))},s.prototype.resizeHandler=function(){this.notify(ii,{})},s.prototype.keyActionHandler=function(e){switch(e.action){case"altN":e.preventDefault(),this.itemData=[w(this)],X(this,"NewFolder");break;case"f5":e.preventDefault(),b(this);break;case"ctrlShift1":e.preventDefault(),this.fileView="Details",this.setProperties({view:"Details"},!0),A(this,mi,"/");break;case"ctrlShift2":e.preventDefault(),this.fileView="LargeIcons",this.setProperties({view:"LargeIcons"},!0),A(this,mi,"/")}},s.prototype.wireEvents=function(){window.addEventListener("resize",this.resizeHandler.bind(this)),this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},s.prototype.unWireEvents=function(){this.keyboardModule.destroy()},s.prototype.setPath=function(){this.ensurePath(),this.notify(fi,{selectedNode:this.pathId[0]}),A(this,this.path!==this.originalPath?$t:Qt,this.path)},s.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){switch(s[n]){case"ajaxSettings":this.ajaxSettingSetModel(e);break;case"allowMultiSelection":this.allowMultiSelection?t.addClass([this.element],ze):t.removeClass([this.element],ze),1===this.selectedItems.length?this.singleSelection=this.selectedItems[0]:this.singleSelection=null,this.notify(Xt,{module:"common",newProp:e,oldProp:i});break;case"cssClass":this.addCssClass(i.cssClass,e.cssClass),this.notify(Xt,{module:"common",newProp:e,oldProp:i});break;case"detailsViewSettings":this.notify(Xt,{module:"detailsview",newProp:e,oldProp:i});break;case"enableRtl":this.setRtl(e.enableRtl),this.notify(Xt,{module:"common",newProp:e,oldProp:i});break;case"height":var a=t.isNullOrUndefined(e.height)?e.height:t.formatUnit(e.height);t.setStyleAttribute(this.element,{height:a}),this.adjustHeight(),this.notify(Xt,{module:"common",newProp:e,oldProp:i});break;case"locale":t.isNullOrUndefined(e.enableRtl)||this.setProperties({enableRtl:e.enableRtl},!0),this.localeSetModelOption(e);break;case"navigationPaneSettings":this.splitterAdjust(),this.notify(Xt,{module:"navigationpane",newProp:e,oldProp:i});break;case"path":this.setPath();break;case"searchSettings":t.isNullOrUndefined(e.searchSettings.allowSearchOnTyping)||this.setProperties({searchSettings:{allowSearchOnTyping:e.searchSettings.allowSearchOnTyping}},!0),t.isNullOrUndefined(e.searchSettings.ignoreCase)&&this.setProperties({searchSettings:{ignoreCase:e.searchSettings.ignoreCase}},!0),t.isNullOrUndefined(e.searchSettings.filterType)&&this.setProperties({searchSettings:{filterType:e.searchSettings.filterType}},!0),this.notify(Xt,{module:"breadcrumbbar",newProp:e,oldProp:i});break;case"selectedItems":"Details"===this.view?this.notify(Xt,{module:"detailsview",newProp:e,oldProp:i}):"LargeIcons"===this.view&&this.notify(Xt,{module:"largeiconsview",newProp:e,oldProp:i});break;case"showFileExtension":case"showHiddenItems":this.notify(Xt,{module:"common",newProp:e,oldProp:i});break;case"showThumbnail":this.notify(Xt,{module:"largeiconsview",newProp:e,oldProp:i});break;case"toolbarSettings":this.adjustHeight(),this.notify(Xt,{module:"toolbar",newProp:e,oldProp:i});break;case"uploadSettings":this.updateUploader();break;case"view":"Details"===e.view?this.notify(Xt,{module:"detailsview",newProp:e,oldProp:i}):"LargeIcons"===e.view&&this.notify(Xt,{module:"largeiconsview",newProp:e,oldProp:i});break;case"width":var o=t.isNullOrUndefined(e.width)?e.width:t.formatUnit(e.width);t.setStyleAttribute(this.element,{width:o}),this.notify(Xt,{module:"toolbar",newProp:e,oldProp:i})}}},s.prototype.ajaxSettingSetModel=function(i){t.isNullOrUndefined(i.ajaxSettings.url)||this.setProperties({ajaxSettings:{url:i.ajaxSettings.url}},!0),t.isNullOrUndefined(i.ajaxSettings.uploadUrl)||this.setProperties({ajaxSettings:{uploadUrl:i.ajaxSettings.uploadUrl}},!0),t.isNullOrUndefined(i.ajaxSettings.downloadUrl)||this.setProperties({ajaxSettings:{downloadUrl:i.ajaxSettings.downloadUrl}},!0),t.isNullOrUndefined(i.ajaxSettings.getImageUrl)||this.setProperties({ajaxSettings:{getImageUrl:i.ajaxSettings.getImageUrl}},!0),this.setProperties({path:"/"},!0),this.setProperties({selectedItems:[]},!0),e.prototype.refresh.call(this)},s.prototype.localeSetModelOption=function(t){this.uploadObj.locale=t.locale,e.prototype.refresh.call(this)},s.prototype.destroy=function(){this.isDestroyed||(this.refreshing||this.notify(ai,{}),this.uploadObj.destroy(),this.uploadObj=null,this.uploadDialogObj.destroy(),this.uploadDialogObj=null,this.splitterObj.destroy(),this.splitterObj=null,this.dialogObj&&(this.dialogObj.destroy(),this.dialogObj=null),this.viewerObj&&(this.viewerObj.destroy(),this.viewerObj=null),this.extDialogObj&&(this.extDialogObj.destroy(),this.extDialogObj=null),this.element.removeAttribute("style"),this.element.removeAttribute("tabindex"),this.removeEventListeners(),this.unWireEvents(),this.addCssClass(this.cssClass,null),t.removeClass([this.element],["e-rtl",We,ze]),this.element.innerHTML="",e.prototype.destroy.call(this))},s.prototype.disableToolbarItems=function(e){t.isNullOrUndefined(e)||this.toolbarModule.enableItems(e,!1)},s.prototype.enableToolbarItems=function(e){t.isNullOrUndefined(e)||this.toolbarModule.enableItems(e,!0)},s.prototype.refreshFiles=function(){b(this)},s.prototype.fileOperation=function(e,t){for(var i=0,n=e;i<e.length;)"Remove"!==t?this.selectedNodes.push(n[i].name):this.selectedNodes=this.selectedNodes,"Remove"===t?this.deleteRecords.push(n[i].name):this.deleteRecords=this.deleteRecords,i++},s.prototype.getDetails=function(){y(this),this.targetPath=this.path,this.activeElements&&0===this.activeElements.length&&(this.activeElements=this.element.querySelectorAll("."+st));var e=m("FileInfo",null,this);e=0!==e.length?e:m("FileInfo",!1,this),this.selectedNodes=[],this.fileOperation(e),0!==this.selectedNodes.length&&""!==this.targetPath||(this.selectedNodes[0]=""),function(e,t,i,n){U(e,{action:n,path:i,itemNames:t},K,i,null,n)}(this,this.selectedNodes,this.targetPath,"GetDetails")},s.prototype.pasteHandler=function(){0!==this.selectedNodes.length&&("MoveTo"===this.fileAction&&this.targetPath!==this.path||"CopyTo"===this.fileAction?_(this,this.targetPath,this.selectedNodes,this.path,this.fileAction,this.navigationpaneModule,[]):y(this))},s.prototype.deleteHandler=function(e){this.deleteRecords=[],this.fileOperation(e,"Remove"),function(e,t,i,n,s){U(e,{action:n,path:i,itemNames:t},z,i,s)}(this,this.deleteRecords,this.targetPath,"Remove",this.navigationpaneModule),this.deleteRecords=[]},s.prototype.setRtl=function(e){e?this.addCssClass(null,"e-rtl"):this.addCssClass("e-rtl",null),this.uploadObj&&(this.uploadDialogObj.enableRtl=e,this.uploadObj.enableRtl=e)};var o;return ki([t.Complex({},le)],s.prototype,"ajaxSettings",void 0),ki([t.Property(!0)],s.prototype,"allowMultiSelection",void 0),ki([t.Complex({},je)],s.prototype,"contextMenuSettings",void 0),ki([t.Property("")],s.prototype,"cssClass",void 0),ki([t.Complex({},ve)],s.prototype,"detailsViewSettings",void 0),ki([t.Property(!1)],s.prototype,"enablePersistence",void 0),ki([t.Property(!1)],s.prototype,"enableRtl",void 0),ki([t.Property("400px")],s.prototype,"height",void 0),ki([t.Property("LargeIcons")],s.prototype,"view",void 0),ki([t.Complex({},xe)],s.prototype,"navigationPaneSettings",void 0),ki([t.Property("/")],s.prototype,"path",void 0),ki([t.Complex({},me)],s.prototype,"searchSettings",void 0),ki([t.Property()],s.prototype,"selectedItems",void 0),ki([t.Property(!0)],s.prototype,"showFileExtension",void 0),ki([t.Property(!1)],s.prototype,"showHiddenItems",void 0),ki([t.Property(!0)],s.prototype,"showThumbnail",void 0),ki([t.Complex({},ce)],s.prototype,"toolbarSettings",void 0),ki([t.Complex({},Re)],s.prototype,"uploadSettings",void 0),ki([t.Property("100%")],s.prototype,"width",void 0),ki([t.Event()],s.prototype,"beforeFileLoad",void 0),ki([t.Event()],s.prototype,"beforeFileOpen",void 0),ki([t.Event()],s.prototype,"beforeSend",void 0),ki([t.Event()],s.prototype,"created",void 0),ki([t.Event()],s.prototype,"destroyed",void 0),ki([t.Event()],s.prototype,"fileSelect",void 0),ki([t.Event()],s.prototype,"menuClick",void 0),ki([t.Event()],s.prototype,"menuOpen",void 0),ki([t.Event()],s.prototype,"onError",void 0),ki([t.Event()],s.prototype,"onSuccess",void 0),ki([t.Event()],s.prototype,"toolbarClick",void 0),s=o=ki([t.NotifyPropertyChanges],s)}(t.Component),Ti=function(){function e(e){this.default=["Delete","Rename","Download","Cut","Copy","Paste"],this.single=["Delete","Rename","Download","Cut","Copy"],this.multiple=["Delete","Download","Cut","Copy","Refresh"],this.selection=["NewFolder","Upload","SortBy","Refresh"],this.parent=e,this.render(),this.addEventListener()}return e.prototype.render=function(){this.items=this.toolbarItemData(this.getItems(this.parent.toolbarSettings.items)),this.toolbarObj=new h.Toolbar({items:this.items,created:this.toolbarCreateHandler.bind(this),overflowMode:"Popup",clicked:this.onClicked.bind(this),enableRtl:this.parent.enableRtl}),this.toolbarObj.appendTo("#"+this.parent.element.id+Me)},e.prototype.getItems=function(e){var t=e.slice();return this.parent.isDevice&&this.parent.allowMultiSelection&&t.push("SelectAll"),t},e.prototype.onClicked=function(e){if(!t.isNullOrUndefined(e.item)&&e.item.id){var i,n=e.item.id.substr((this.parent.element.id+"_tb_").length);"refresh"===n||"newfolder"===n?(i=w(this.parent),this.parent.itemData=[i]):i=O(this.parent);var s={cancel:!1,fileDetails:i,item:e.item};if(this.parent.trigger("toolbarClick",s),!s.cancel)switch(n){case"sortby":var a=t.closest(e.originalEvent.target,"."+$e);a&&a.classList.contains("e-toolbar-popup")&&(e.cancel=!0);break;case"newfolder":X(this.parent,"NewFolder");break;case"cut":C(this.parent),this.parent.nodeNames&&this.parent.fileOperation(this.parent.nodeNames);break;case"copy":I(this.parent),this.parent.nodeNames&&this.parent.fileOperation(this.parent.nodeNames),"navigationPane"===this.parent.activeModule&&(this.parent.navigationpaneModule.copyNodes=this.parent.nodeNames);break;case"delete":X(this.parent,"Delete");break;case"details":this.parent.getDetails();break;case"paste":this.parent.pasteHandler();break;case"refresh":b(this.parent);break;case"download":if(!(this.parent.selectedItems.length>0))return;if("LargeIcons"===this.parent.view){for(var o=[],r=t.selectAll(".e-active",this.parent.largeiconsviewModule.listElements),l=0;l<r.length;l++)o[l]=E(this.parent,r[l]);J(this.parent,o)}else J(this.parent,this.parent.detailsviewModule.gridObj.getSelectedRecords());break;case"rename":this.parent.notify(bi,{}),X(this.parent,"Rename");break;case"upload":t.select("#"+this.parent.element.id+qe,this.parent.element).click();break;case"selectall":this.parent.notify(ci,{});break;case"selection":this.parent.notify(ui,{})}}},e.prototype.toolbarCreateHandler=function(){if(!t.isNullOrUndefined(t.select("#"+this.getId("SortBy"),this.parent.element))){var e=[{id:this.getPupupId("name"),text:R(this.parent,"Name"),iconCss:it},{id:this.getPupupId("size"),text:R(this.parent,"Size")},{id:this.getPupupId("date"),text:R(this.parent,"DateModified")},{separator:!0},{id:this.getPupupId("ascending"),text:R(this.parent,"Ascending"),iconCss:tt},{id:this.getPupupId("descending"),text:R(this.parent,"Descending")}];this.buttonObj=new l.DropDownButton({items:e,cssClass:M(this.parent,Ke),select:k.bind(this,this.parent),enableRtl:this.parent.enableRtl,iconCss:kt}),this.buttonObj.appendTo("#"+this.getId("SortBy"))}if(!t.isNullOrUndefined(t.select("#"+this.parent.element.id+"_view",this.parent.element))){var i=[{id:this.getPupupId("large"),text:'<span class="e-icons e-fe-large e-menu-icon"></span>'+R(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?"":tt},{id:this.getPupupId("details"),text:'<span class="e-icons e-fe-grid e-menu-icon"></span>'+R(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?tt:""}];this.layoutBtnObj=new l.DropDownButton({iconCss:"Details"===this.parent.view?Bt:_t,cssClass:M(this.parent,"e-caret-hide "+Ke),items:i,select:this.layoutChange.bind(this),enableRtl:this.parent.enableRtl}),this.layoutBtnObj.appendTo("#"+this.parent.element.id+"_view")}this.hideItems(this.default,!0),this.hideStatus()},e.prototype.updateSortByButton=function(){for(var e=this.buttonObj.items,t=0;t<e.length;t++)e[t].id===this.getPupupId("name")?e[t].iconCss="name"===this.parent.sortBy?it:"":e[t].id===this.getPupupId("size")?e[t].iconCss="size"===this.parent.sortBy?it:"":e[t].id===this.getPupupId("date")?e[t].iconCss="dateModified"===this.parent.sortBy?it:"":e[t].id===this.getPupupId("ascending")?e[t].iconCss="Ascending"===this.parent.sortOrder?tt:"":e[t].id===this.getPupupId("descending")&&(e[t].iconCss="Descending"===this.parent.sortOrder?tt:"")},e.prototype.getPupupId=function(e){return this.parent.element.id+"_ddl_"+e.toLowerCase()},e.prototype.layoutChange=function(e){"Details"===this.parent.view?e.item.id===this.getPupupId("large")&&this.updateLayout("LargeIcons"):e.item.id===this.getPupupId("details")&&this.updateLayout("Details")},e.prototype.updateLayout=function(e){this.parent.setProperties({view:e},!0);var t;this.parent.breadcrumbbarModule.searchObj.value&&""===this.parent.breadcrumbbarModule.searchObj.value&&this.parent.notify(ji,{args:this.parent}),t="startWith"===this.parent.searchSettings.filterType?"*"+this.parent.breadcrumbbarModule.searchObj.value:"endsWith"===this.parent.searchSettings.filterType?this.parent.breadcrumbbarModule.searchObj.value+"*":"*"+this.parent.breadcrumbbarModule.searchObj.value+"*",0===this.parent.breadcrumbbarModule.searchObj.value.length?A(this.parent,mi,this.parent.path):G(this.parent,mi,this.parent.path,t,!1,!1)},e.prototype.toolbarItemData=function(e){var t=[],i="Both";this.parent.isMobile&&(i="Overflow");for(var n=0;n<e.length;n++){var s=void 0,a=this.getId(e[n]),o=R(this.parent,e[n]),r=R(this.parent,"Tooltip-"+e[n]);switch(e[n]){case"|":s={type:"Separator"};break;case"Upload":s={id:a,text:o,tooltipText:r,prefixIcon:jt,showTextOn:i};break;case"SortBy":s={id:a,tooltipText:r,template:'<button id="'+a+'" class="e-tbar-btn e-tbtn-txt" tabindex="-1">'+('<span class="e-tbar-btn-text e-tbar-ddb-text">'+o+"</span>")+"</button>"};break;case"Refresh":s={id:a,text:o,tooltipText:r,prefixIcon:Lt,showTextOn:i};break;case"Selection":s={id:a,tooltipText:r,overflow:"Show",align:"Right",template:'<span class="e-status">2 '+o+'</span><span class="'+Ft+'"></span>'};break;case"View":var l=this.parent.element.id+"_view";s={id:a,tooltipText:r,prefixIcon:"Details"===this.parent.view?Bt:_t,overflow:"Show",align:"Right",template:'<button id="'+l+'" class="e-tbar-btn e-tbtn-txt" tabindex="-1"></button>'};break;case"Details":s={id:a,tooltipText:r,prefixIcon:Mt,overflow:"Show",align:"Right"};break;case"NewFolder":s={id:a,text:o,tooltipText:r,prefixIcon:Rt,showTextOn:i};break;case"Cut":s={id:a,text:o,tooltipText:r,prefixIcon:Nt,showTextOn:i};break;case"Copy":s={id:a,text:o,tooltipText:r,prefixIcon:Et,showTextOn:i};break;case"Paste":s={id:a,text:o,tooltipText:r,prefixIcon:xt,showTextOn:i};break;case"Delete":s={id:a,text:o,tooltipText:r,prefixIcon:Dt,showTextOn:i};break;case"Rename":s={id:a,text:o,tooltipText:r,prefixIcon:Pt,showTextOn:i};break;case"Download":s={id:a,text:o,tooltipText:r,prefixIcon:At,showTextOn:i};break;case"SelectAll":s={id:a,text:o,tooltipText:r,prefixIcon:Tt,showTextOn:i};break;default:s={id:a,text:o,tooltipText:r}}t.push(s)}return t},e.prototype.getId=function(e){return this.parent.element.id+"_tb_"+e.toLowerCase()},e.prototype.addEventListener=function(){this.parent.on(Xt,this.onPropertyChanged,this),this.parent.on(pi,this.onSelectionChanged,this),this.parent.on(mi,this.onLayoutChange,this),this.parent.on(Oi,this.showPaste,this),this.parent.on(wi,this.hidePaste,this),this.parent.on(ai,this.destroy,this),this.parent.on(gi,this.updateSortByButton,this)},e.prototype.reRenderToolbar=function(e){void 0!==e.newProp.toolbarSettings.items&&(this.items=this.toolbarItemData(this.getItems(e.newProp.toolbarSettings.items)),this.toolbarObj.items=this.items,this.toolbarObj.dataBind())},e.prototype.onSelectionChanged=function(e){this.hideStatus(),this.hideItems(this.single,!0),this.hideItems(this.selection,!1),1===this.parent.selectedItems.length?(this.hideItems(this.single,!1),this.hideItems(this.selection,!0)):this.parent.selectedItems.length>1&&(this.hideItems(this.multiple,!1),this.hideItems(this.selection,!0));var i=t.select("."+qt,this.toolbarObj.element);this.parent.selectedItems.length>0&&i&&(1===this.parent.selectedItems.length?i.textContent=this.parent.selectedItems.length+" "+R(this.parent,"Item-Selection"):i.textContent=this.parent.selectedItems.length+" "+R(this.parent,"Items-Selection"),this.toolbarObj.hideItem(i.parentElement,!1))},e.prototype.hideItems=function(e,i){for(var n=0;n<e.length;n++){var s=t.select("#"+this.getId(e[n]),this.parent.element);s&&this.toolbarObj.hideItem(s.parentElement,i)}},e.prototype.hideStatus=function(){var e=t.select("."+qt,this.toolbarObj.element);e&&this.toolbarObj.hideItem(e.parentElement,!0)},e.prototype.showPaste=function(){this.hideItems(["Paste"],!1)},e.prototype.hidePaste=function(){this.hideItems(["Paste"],!0)},e.prototype.onLayoutChange=function(e){if(this.layoutBtnObj){this.layoutBtnObj.iconCss="Details"===this.parent.view?Bt:_t;for(var t=this.layoutBtnObj.items,i=0;i<t.length;i++)t[i].id===this.getPupupId("large")?t[i].iconCss="LargeIcons"===this.parent.view?tt:"":t[i].id===this.getPupupId("details")&&(t[i].iconCss="Details"===this.parent.view?tt:"")}},e.prototype.removeEventListener=function(){this.parent.off(Xt,this.onPropertyChanged),this.parent.off(pi,this.onSelectionChanged),this.parent.off(mi,this.onLayoutChange),this.parent.off(Oi,this.showPaste),this.parent.off(wi,this.hidePaste),this.parent.off(ai,this.destroy),this.parent.off(gi,this.updateSortByButton)},e.prototype.getModuleName=function(){return"toolbar"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"cssClass":this.buttonObj&&(this.buttonObj.cssClass=M(this.parent,Ke)),this.layoutBtnObj&&(this.layoutBtnObj.cssClass=M(this.parent,"e-caret-hide "+Ke));break;case"height":case"width":this.toolbarObj.refreshOverflow();break;case"toolbarSettings":this.reRenderToolbar(e);break;case"enableRtl":var n=e.newProp.enableRtl;this.toolbarObj.enableRtl=n,this.toolbarObj.dataBind(),this.buttonObj&&(this.buttonObj.enableRtl=n,this.buttonObj.dataBind()),this.layoutBtnObj&&(this.layoutBtnObj.enableRtl=n,this.layoutBtnObj.dataBind())}}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.buttonObj&&this.buttonObj.destroy(),this.layoutBtnObj&&this.layoutBtnObj.destroy(),this.toolbarObj.destroy())},e.prototype.enableItems=function(e,i){for(var n=0;n<e.length;n++){var s=t.select("#"+this.getId(e[n]),this.parent.element);s&&this.toolbarObj.enableItems(s.parentElement,i)}},e}(),Ai=function(){function e(e){this.treeNodes=[],this.removeNodes=[],this.expandTree=!1,this.parent=e,this.addEventListener(),this.keyConfigs={altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftF10:"shift+F10",f2:"f2"}}return e.prototype.onInit=function(e){if(t.isNullOrUndefined(this.treeObj)){var i=t.getValue("/",this.parent.feParent);t.setValue("icon","e-fe-folder",i),this.rootNode=t.getValue("name",t.getValue("/",this.parent.feParent)),this.treeObj=new h.TreeView({fields:{dataSource:[i],id:"nodeId",text:"name",hasChildren:"hasChild",iconCss:"icon"},nodeSelected:this.onNodeSelected.bind(this),nodeExpanding:this.onNodeExpand.bind(this),allowEditing:!0,nodeEditing:this.onNodeEditing.bind(this),drawNode:this.onDrowNode.bind(this),enableRtl:this.parent.enableRtl}),this.treeObj.appendTo("#"+this.parent.element.id+ke),this.treeObj.element.style.width="25%",this.parent.persistData=!0,this.wireEvents()}},e.prototype.onDrowNode=function(e){var t={element:e.node,fileDetails:e.nodeData,module:"NavigationPane"};this.parent.trigger("beforeFileLoad",t)},e.prototype.addChild=function(e,t,i){var n=P(e);if(n.length>0){for(var s=0,a=n;s<n.length;)a[s].icon="e-fe-folder",s++;this.treeObj.addNodes(n,t,null,i)}},e.prototype.onNodeSelected=function(e){if(this.parent.breadcrumbbarModule&&this.parent.breadcrumbbarModule.searchObj&&(this.parent.breadcrumbbarModule.searchObj.element.value=""),this.parent.searchedItems=[],this.parent.activeElements=this.treeObj.element.querySelectorAll("."+st),e.isInteracted){var i=t.getValue("text",e.nodeData);this.activeNode=e.node,this.parent.activeModule="navigationpane",this.parent.persistData||(this.parent.selectedItems=[]),p(e.node,i,this.parent),this.expandNodeTarget=null,e.node.querySelector("."+Vt)&&null===e.node.querySelector("."+Qe)&&(this.expandNodeTarget="add"),this.parent.itemData=this.treeObj.getTreeData(t.getValue("id",e.nodeData)),A(this.parent,si,this.parent.path),this.parent.visitedItem=e.node}},e.prototype.onNodeExpand=function(e){if(e.isInteracted){var i=c(e.node,t.getValue("text",e.nodeData));null===e.node.querySelector("."+Qe)&&(this.expandNodeTarget=e.node.getAttribute("data-uid"),this.parent.expandedId=this.expandNodeTarget,this.parent.itemData=this.treeObj.getTreeData(t.getValue("id",e.nodeData)),A(this.parent,yi,i))}},e.prototype.onNodeExpanded=function(e){this.addChild(e.files,this.expandNodeTarget,!1),this.parent.expandedId=null},e.prototype.onNodeEditing=function(e){t.isNullOrUndefined(e.innerHtml)||(e.cancel=!0)},e.prototype.onPathChanged=function(e){var i=t.getValue(this.parent.path,this.parent.feFiles);if("add"===this.expandNodeTarget){var n=t.select('[data-uid="'+this.treeObj.selectedNodes[0]+'"]',this.treeObj.element),s=t.select("."+et,n);t.isNullOrUndefined(s)&&this.addChild(e.files,this.treeObj.selectedNodes[0],!0),this.expandNodeTarget=""}t.isNullOrUndefined(i)&&t.setValue(this.parent.path,e.files,this.parent.feFiles)},e.prototype.updateTree=function(e){var i=this.treeObj.selectedNodes[0],n=-1!==this.treeObj.expandedNodes.indexOf(i);this.removeChildNodes(i),t.setValue(this.parent.path,e.files,this.parent.feFiles),this.addChild(e.files,i,!n)},e.prototype.removeChildNodes=function(e){var i=t.select('[data-uid="'+e+'"]',this.treeObj.element),n=t.select("."+et,i),s=n?Array.prototype.slice.call(n.children):null;this.treeObj.removeNodes(s)},e.prototype.onOpenEnd=function(e){var t=this.parent.pathId[this.parent.pathId.length-1];this.treeObj.expandAll(this.treeObj.selectedNodes),this.treeObj.selectedNodes=[t],this.expandNodeTarget="add",this.onPathChanged(e)},e.prototype.onOpenInit=function(e){"navigationpane"===this.parent.activeModule&&e.target.querySelector("."+Vt)&&this.treeObj.expandAll(this.treeObj.selectedNodes)},e.prototype.onInitialEnd=function(e){this.onInit(e),this.addChild(e.files,t.getValue("nodeId",e.cwd),!1)},e.prototype.onFinalizeEnd=function(e){this.onInit(e);var i=t.getValue("nodeId",e.cwd);this.removeChildNodes(i),this.addChild(e.files,i,!1),this.treeObj.selectedNodes=[this.parent.pathId[this.parent.pathId.length-1]]},e.prototype.onCreateEnd=function(e){this.updateTree(e)},e.prototype.onDeleteEnd=function(e){if("navigationpane"===this.parent.activeModule){var i=this.treeObj.selectedNodes[0],n=t.select('[data-uid="'+i+'"]',this.treeObj.element),s=t.closest(n,"."+et).parentElement;this.treeObj.selectedNodes=[s.getAttribute("data-uid")],this.treeObj.dataBind()}this.updateTree(e)},e.prototype.onRefreshEnd=function(e){this.updateTree(e)},e.prototype.onRenameInit=function(){0===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onRenameEnd=function(e){var t=new s.DataManager(this.treeObj.getTreeData()).executeLocal((new s.Query).where(this.treeObj.fields.text,"equal",this.parent.currentItemText,!1));t[0]&&this.treeObj.updateNode(t[0][this.treeObj.fields.id].toString(),this.parent.renameText)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"enableRtl":this.treeObj&&(this.treeObj.enableRtl=e.newProp.enableRtl,this.treeObj.dataBind());break;case"navigationPaneSettings":A(this.parent,Qt,"/")}}},e.prototype.onDownLoadInit=function(){this.updateActionData()},e.prototype.onSelectionChanged=function(e){this.treeObj.selectedNodes=[e.selectedNode]},e.prototype.onClearPathInit=function(e){this.removeChildNodes(e.selectedNode)},e.prototype.addEventListener=function(){this.parent.on(Xt,this.onPropertyChanged,this),this.parent.on(Ei,this.onDownLoadInit,this),this.parent.on($t,this.onInitialEnd,this),this.parent.on(Qt,this.onFinalizeEnd,this),this.parent.on(si,this.onPathChanged,this),this.parent.on(yi,this.onNodeExpanded,this),this.parent.on(Zt,this.onCreateEnd,this),this.parent.on(ei,this.onDeleteEnd,this),this.parent.on(ti,this.onRefreshEnd,this),this.parent.on(Ci,this.onSelectionChanged,this),this.parent.on(hi,this.onOpenInit,this),this.parent.on(di,this.onOpenEnd,this),this.parent.on(ai,this.destroy,this),this.parent.on(bi,this.onRenameInit,this),this.parent.on(vi,this.onRenameEnd,this),this.parent.on(fi,this.onClearPathInit,this)},e.prototype.removeEventListener=function(){this.parent.off($t,this.onInitialEnd),this.parent.off(Ei,this.onDownLoadInit),this.parent.off(Qt,this.onFinalizeEnd),this.parent.off(Xt,this.onPropertyChanged),this.parent.off(si,this.onPathChanged),this.parent.off(Ci,this.onSelectionChanged),this.parent.off(yi,this.onNodeExpanded),this.parent.off(Zt,this.onCreateEnd),this.parent.off(ti,this.onRefreshEnd),this.parent.off(hi,this.onOpenInit),this.parent.off(di,this.onOpenEnd),this.parent.off(ai,this.destroy),this.parent.off(bi,this.onRenameInit),this.parent.off(vi,this.onRefreshEnd),this.parent.off(fi,this.onClearPathInit),this.parent.off(ei,this.onDeleteEnd)},e.prototype.getModuleName=function(){return"navigationpane"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.treeObj&&(this.unWireEvents(),this.treeObj.destroy()))},e.prototype.wireEvents=function(){this.keyboardModule=new t.KeyboardEvents(this.treeObj.element,{keyAction:this.keyDown.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.unWireEvents=function(){this.keyboardModule.destroy()},e.prototype.keyDown=function(e){var t=e.action,i=this.parent;switch(t){case"altEnter":this.parent.getDetails();break;case"esc":y(this.parent),this.parent.selectedNodes=[],this.treeNodes=[];break;case"del":this.removeNodes=[],X(this.parent,"Delete");break;case"ctrlC":I(this.parent),i.fileOperation(this.parent.nodeNames),this.copyNodes=this.parent.nodeNames;break;case"ctrlV":i.pasteHandler();break;case"ctrlX":C(this.parent),i.fileOperation(this.parent.nodeNames);break;case"shiftF10":J(this.parent,this.parent.detailsviewModule.gridObj.getSelectedRecords());break;case"f2":0===this.parent.selectedItems.length&&(this.updateRenameData(),X(this.parent,"Rename"))}},e.prototype.updateRenameData=function(){this.updateActionData(),this.parent.currentItemText=t.getValue("name",this.parent.itemData[0])},e.prototype.updateActionData=function(){var e=this.treeObj.getTreeData(this.treeObj.selectedNodes[0])[0];this.parent.itemData=[e],this.parent.isFile=!1},e.prototype.moveNode=function(){this.treeObj.moveNodes(this.treeNodes,this.treeObj.selectedNodes[0],null);this.parent;y(this.parent),this.treeNodes=[]},e.prototype.removeNode=function(){this.treeObj.removeNodes(this.removeNodes);this.parent;y(this.parent),this.removeNodes=[]},e.prototype.copyNode=function(){this.treeObj.addNodes(this.copyNodes,this.activeNode,null);this.parent;y(this.parent)},e}();d.Grid.Inject(d.Resize,d.ContextMenu,d.Sort,d.VirtualScroll);var Bi=function(){function e(e){this.isInteracted=!0,this.pasteOperation=!1,this.uploadOperation=!1,this.count=0,this.isRendered=!0,this.parent=e,this.element=t.select("#"+this.parent.element.id+Le,this.parent.element),this.addEventListener(),this.keyConfigs={altEnter:"alt+enter",esc:"escape",tab:"tab",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftdel:"shift+delete",shiftF10:"shift+F10",f2:"f2",ctrlA:"ctrl+a",enter:"enter"}}return e.prototype.render=function(e){if("Details"===this.parent.view){t.removeClass([this.parent.element],Ge);var i=N(this.parent,e.files),n=this.getColumns(),s=void 0;s=this.parent.isMobile?[]:[{direction:this.parent.sortOrder,field:this.parent.sortBy}],this.gridObj=new d.Grid({dataSource:i,allowSorting:!0,rowSelected:this.onSelected.bind(this),rowDeselected:this.onDeSelection.bind(this),allowResizing:this.parent.detailsViewSettings.columnResizing,selectionSettings:{type:this.parent.allowMultiSelection?"Multiple":"Single",checkboxMode:"ResetOnRowClick"},enableRtl:this.parent.enableRtl,pageSettings:{pageSize:20},sortSettings:{allowUnsort:!1,columns:s},columns:n,recordDoubleClick:this.DblClickEvents.bind(this),beforeDataBound:this.onBeforeDataBound.bind(this),dataBound:this.onDataBound.bind(this),rowDataBound:this.onRowDataBound.bind(this),actionBegin:this.onActionBegin.bind(this),headerCellInfo:this.onHeaderCellInfo.bind(this),width:"100%"}),this.gridObj.appendTo("#"+this.parent.element.id+Le),this.wireEvents(),this.adjustHeight(),this.gridObj.defaultLocale.EmptyRecord="",this.emptyArgs=e}},e.prototype.getColumns=function(){var e;if(this.parent.isMobile)e=[{field:"name",headerText:R(this.parent,"Name"),width:"auto",minWidth:120,headerTextAlign:"Left",template:'<div class="e-fe-text">${name}</div><div class="e-fe-date">${dateModified}</div><span class="e-fe-size">${size}</span>'}];else for(var t=0,i=(e=JSON.parse(JSON.stringify(this.parent.detailsViewSettings.columns))).length;t<i;t++)e[t].headerText=R(this.parent,e[t].headerText);var n=this.parent.isMobile||this.parent.isBigger?"54":"46",s={field:"type",width:n,minWidth:n,template:'<span class="e-fe-icon ${iconClass}"></span>',allowResizing:!1,allowSorting:!0,customAttributes:{class:"e-fe-grid-icon"},headerTemplate:'<span class="e-fe-icon e-fe-folder"></span>'};if(e.unshift(s),this.parent.allowMultiSelection){var a=this.parent.isBigger?"36":"26",o={type:"checkbox",width:a,minWidth:a,customAttributes:{class:"e-fe-checkbox"},allowResizing:!1,allowSorting:!1};this.parent.isMobile?e.push(o):e.unshift(o)}return e},e.prototype.adjustHeight=function(){if(this.gridObj){var e=t.select("#"+this.parent.element.id+Ve,this.parent.element),i=t.select("#"+this.parent.element.id+He,this.parent.element),n=t.select(".e-gridheader",this.parent.element),s=e.offsetHeight-i.offsetHeight-n.offsetHeight;this.gridObj.height=s,this.gridObj.dataBind()}},e.prototype.renderCheckBox=function(){this.gridObj.columns=this.getColumns(),this.gridObj.refreshColumns()},e.prototype.onRowDataBound=function(e){if(!this.parent.showFileExtension&&t.getValue("isFile",e.data)){var i=e.row.querySelector(".e-fe-text"),n=t.getValue("name",e.data),s=t.getValue("type",e.data);i.innerHTML=n.substr(0,n.length-s.length)}if(void 0!==t.getValue("size",e.data)&&e.row.querySelector(".e-fe-size")){var a=e.row.querySelector(".e-fe-size"),o=void 0;if(t.getValue("isFile",e.data)){var r=t.getValue("size",e.data);if(r/1024==0)o="0 KB";else{o=(h=new t.Internationalization).formatNumber(r/1024,{format:"n"})+" KB"}}else o="";a.innerHTML=o}if(this.parent.isMobile&&void 0!==t.getValue("dateModified",e.data)&&e.row.querySelector(".e-fe-date")){for(var l=e.row.querySelector(".e-fe-date"),h=new t.Internationalization,d=this.parent.detailsViewSettings.columns,p=void 0,c=0;c<d.length;c++)if("dateModified"===d[c].field){p=d[c].format;break}var u=h.formatDate(new Date(t.getValue("dateModified",e.data)),p);l.innerHTML=u}var f=e.row.querySelector("."+lt);f&&f.classList.add("e-small");var m={element:e.row,fileDetails:e.data,module:"DetailsView"};this.parent.trigger("beforeFileLoad",m)},e.prototype.onActionBegin=function(e){if("sorting"===e.requestType){if(this.parent.sortOrder=e.direction,this.parent.sortBy=e.columnName,0!==this.parent.selectedItems.length){this.sortItem=!0;var i=this.gridObj.getSelectedRowIndexes(),n=i.length;for(this.sortSelectedNodes=[];n>0;){var s=this.gridObj.getRowsObject()[i[n-1]].data;this.sortSelectedNodes.push(t.getValue("name",s)),n--}}this.parent.notify(gi,{})}},e.prototype.onHeaderCellInfo=function(e){var t=e.node.querySelector("."+lt);t&&t.classList.add("e-small")},e.prototype.onBeforeDataBound=function(e){var t=N(this.parent,this.gridObj.dataSource);e.result=t},e.prototype.maintainBlur=function(){for(var e=0,i=this.gridObj.getCurrentViewRecords();e<i.length;e++){var n=this.gridObj.getDataRows()[e],s=n.querySelector("."+vt).textContent;if(-1!==this.parent.selectedNodes.indexOf(s))for(var a=t.selectAll("."+ht,n),o=0;o<a.length;)g(a[o]),o++}},e.prototype.onDataBound=function(e){if(0!==this.parent.selectedItems.length&&(this.selectedItem=!0),!0===this.pasteOperation||!0===this.selectedItem){var i=!0!==this.selectedItem?this.parent.selectedNodes:this.parent.selectedItems;this.selectRecords(i),this.pasteOperation=!0===this.selectedItem&&this.pasteOperation,this.selectedItem=!1}if(this.parent.cutNodes&&0!==this.parent.cutNodes.length&&this.maintainBlur(),this.parent.createdItem&&(this.selectRecords([t.getValue("name",this.parent.createdItem)]),this.parent.createdItem=null),this.parent.renamedItem&&(this.selectRecords([t.getValue("name",this.parent.renamedItem)]),this.parent.renamedItem=null),!0===this.sortItem&&(this.selectRecords(this.sortSelectedNodes),this.sortItem=!1),this.parent.allowMultiSelection&&void 0!==this.parent.singleSelection&&this.selectRecords([this.parent.singleSelection]),this.parent.allowMultiSelection||void 0===this.parent.singleSelection||this.selectRecords([this.parent.singleSelection]),!0===this.uploadOperation&&(this.count++,this.selectRecords(this.parent.uploadItem),this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[])),this.gridObj.currentViewData.length*this.gridObj.getRowHeight()<this.gridObj.height){(n=this.gridObj.getHeaderContent()).style.paddingRight="",n.style.paddingLeft="";t.select(".e-headercontent",n).style.borderRightWidth="0";(s=this.gridObj.getContent().querySelector(".e-content")).style.overflowY="",s.classList.add("e-scrollShow")}else{var n=this.gridObj.getHeaderContent();this.parent.enableRtl?n.style.paddingLeft="16px":n.style.paddingRight="16px";var s;(s=this.gridObj.getContent().querySelector(".e-content")).classList.remove("e-scrollShow")}this.isRendered=!0,this.checkEmptyDiv(this.emptyArgs)},e.prototype.selectRecords=function(e){for(var i=this.gridObj.getCurrentViewRecords(),n=[],s=0,a=i.length;s<a;s++)-1!==e.indexOf(t.getValue("name",i[s]))&&n.push(s);0!==n.length&&this.gridObj.selectRows(n)},e.prototype.onSortColumn=function(e){this.gridObj.sortModule.sortColumn(this.parent.sortBy,this.parent.sortOrder)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++){switch(n[i]){case"height":this.adjustHeight();break;case"detailsViewSettings":if(!t.isNullOrUndefined(this.gridObj)){var s=this.getColumns();this.gridObj.columns=s,this.gridObj.allowResizing=this.parent.detailsViewSettings.columnResizing,this.gridObj.dataBind(),this.gridObj.refreshColumns()}break;case"selectedItems":0!==this.parent.selectedItems.length?this.selectRecords(this.parent.selectedItems):t.isNullOrUndefined(this.gridObj)||this.gridObj.clearSelection();break;case"enableRtl":t.isNullOrUndefined(this.gridObj)||(this.gridObj.enableRtl=e.newProp.enableRtl,this.gridObj.dataBind());break;case"showFileExtension":case"showHiddenItems":A(this.parent,si,this.parent.path);break;case"allowMultiSelection":t.isNullOrUndefined(this.gridObj)||(this.gridObj.selectionSettings.type=e.newProp.allowMultiSelection?"Multiple":"Single",this.renderCheckBox());break;case"view":A(this.parent,mi,this.parent.path)}}},e.prototype.onPathChanged=function(e){if(""===this.parent.breadcrumbbarModule.searchObj.element.value.trim()&&this.gridObj){this.parent.searchedItems=[];var t=this.gridObj.columns.length,i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&(this.gridObj.columns.pop(),this.gridObj.refreshColumns())}y(this.parent),this.parent.persistData||this.parent.setProperties({selectedItems:[]},!0),"Details"===this.parent.view&&(this.parent.persistData?this.isInteracted=!1:this.parent.setProperties({selectedItems:[]},!0),this.parent.persistData=!1,this.parent.cutNodes=[],this.gridObj.dataSource=N(this.parent,e.files),this.parent.notify(Ni,e)),this.emptyArgs=e},e.prototype.checkEmptyDiv=function(e){var i=N(this.parent,e.files);if(0!==i.length||t.isNullOrUndefined(this.element.querySelector("."+It))){if(0!==i.length&&this.element.querySelector("."+dt))if(this.element.querySelector("."+It).querySelector("."+dt)){var n=this.element.querySelector("."+It).querySelector("."+dt);this.element.querySelector("."+It).removeChild(n)}else this.element.removeChild(this.element.querySelector("."+dt))}else D(this.parent,t.getValue("name",e),this.element)},e.prototype.onOpenInit=function(e){if("detailsview"===this.parent.activeModule){var t=this.gridObj.getSelectedRecords()[0];this.openContent(t)}},e.prototype.DblClickEvents=function(e){this.gridObj.selectRows([e.rowIndex]);var t;e.rowData&&(t=JSON.parse(JSON.stringify(e.rowData)),this.openContent(t))},e.prototype.openContent=function(e){var i={cancel:!1,fileDetails:e};if(this.parent.trigger("beforeFileOpen",i),!i.cancel)if(t.getValue("isFile",e)){if(S(e)===ut){var n=t.getValue("name",e),s=j(this.parent,e);se(this.parent,n,s)}}else{if(""===this.parent.breadcrumbbarModule.searchObj.element.value){var a=this.parent.path+t.getValue("name",e)+"/";this.parent.setProperties({path:a},!0),this.parent.pathId.push(t.getValue("nodeId",e)),this.parent.itemData=[e],v(this.parent)}else T(this.parent,e)}},e.prototype.onLayoutChange=function(e){"Details"===this.parent.view&&(this.gridObj||this.render(e),this.gridObj.dataSource=N(this.parent,e.files),this.parent.notify(Ii,{}),this.gridObj.element.classList.remove(zt),this.isInteracted=!1,this.gridObj.clearSelection(),this.parent.selectedItems&&(this.selectedItem=!0),""!==this.parent.breadcrumbbarModule.searchObj.element.value.trim()&&this.onSearchFiles(e),this.adjustHeight())},e.prototype.onSearchFiles=function(e){if("Details"===this.parent.view){var t=this.gridObj.columns.length,i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&this.gridObj.columns.pop();this.parent.isMobile||this.gridObj.columns.push({field:"filterPath",headerText:"path",minWidth:180}),this.gridObj.refreshColumns(),this.parent.searchedItems=e.files,this.onPathChanged(e)}},e.prototype.changeData=function(e){this.isInteracted=!1,this.gridObj.dataSource=N(this.parent,e.files),this.parent.selectedItems&&(this.selectedItem=!0)},e.prototype.onFinalizeEnd=function(e){"Details"===this.parent.view&&(this.gridObj?this.onPathChanged(e):(this.render(e),this.parent.notify(Ni,e)))},e.prototype.onCreateEnd=function(e){"Details"===this.parent.view&&this.onPathChanged(e)},e.prototype.onRenameInit=function(){"Details"===this.parent.view&&1===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onDeleteEnd=function(e){"Details"===this.parent.view&&(this.onPathChanged(e),this.parent.setProperties({selectedItems:[]},!0))},e.prototype.onRefreshEnd=function(e){"Details"===this.parent.view&&this.changeData(e)},e.prototype.onHideLayout=function(e){"Details"!==this.parent.view&&this.gridObj&&this.gridObj.element.classList.add(zt)},e.prototype.onSelectAllInit=function(){"Details"===this.parent.view&&(this.isInteracted=!1,this.gridObj.selectionModule.selectRowsByRange(0,this.gridObj.getRows().length),this.isInteracted=!0)},e.prototype.onClearAllInit=function(){"Details"===this.parent.view&&this.removeSelection()},e.prototype.onSelectionChanged=function(){t.removeClass([this.element],Gt),this.parent.selectedItems.length>0&&t.addClass([this.element],Gt)},e.prototype.onBeforeRequest=function(){this.isRendered=!1},e.prototype.onAfterRequest=function(e){this.isRendered=!0},e.prototype.addEventListener=function(){this.parent.on(Qt,this.onFinalizeEnd,this),this.parent.on(ai,this.destroy,this),this.parent.on(mi,this.onLayoutChange,this),this.parent.on(si,this.onPathChanged,this),this.parent.on(Zt,this.onCreateEnd,this),this.parent.on(ei,this.onDeleteEnd,this),this.parent.on(ti,this.onRefreshEnd,this),this.parent.on(li,this.onSearchFiles,this),this.parent.on(Xt,this.onPropertyChanged,this),this.parent.on(bi,this.onRenameInit,this),this.parent.on(vi,this.onPathChanged,this),this.parent.on(hi,this.onOpenInit,this),this.parent.on(Si,this.onSortColumn,this),this.parent.on(di,this.onPathChanged,this),this.parent.on(Ii,this.onHideLayout,this),this.parent.on(ci,this.onSelectAllInit,this),this.parent.on(ui,this.onClearAllInit,this),this.parent.on(ji,this.onPathColumn,this),this.parent.on(pi,this.onSelectionChanged,this),this.parent.on(oi,this.onBeforeRequest,this),this.parent.on(ri,this.onAfterRequest,this)},e.prototype.removeEventListener=function(){this.parent.off(Qt,this.onFinalizeEnd),this.parent.off(ai,this.destroy),this.parent.off(mi,this.onLayoutChange),this.parent.off(si,this.onPathChanged),this.parent.off(Zt,this.onCreateEnd),this.parent.off(ti,this.onRefreshEnd),this.parent.off(li,this.onSearchFiles),this.parent.off(Xt,this.onPropertyChanged),this.parent.off(bi,this.onRenameInit),this.parent.off(vi,this.onPathChanged),this.parent.off(hi,this.onOpenInit),this.parent.off(Si,this.onSortColumn),this.parent.off(di,this.onPathChanged),this.parent.off(Ii,this.onHideLayout),this.parent.off(ci,this.onSelectAllInit),this.parent.off(ui,this.onClearAllInit),this.parent.off(ei,this.onDeleteEnd),this.parent.off(ji,this.onPathColumn),this.parent.off(pi,this.onSelectionChanged),this.parent.off(oi,this.onBeforeRequest),this.parent.off(ri,this.onAfterRequest)},e.prototype.getModuleName=function(){return"detailsview"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.gridObj&&(this.unWireEvents(),this.gridObj.destroy()))},e.prototype.onSelected=function(e){if(this.parent.activeElements=this.gridObj.element.querySelectorAll("."+st),this.parent.activeModule="detailsview",this.selectedRecords(),this.parent.notify(pi,{}),this.triggerSelect("select",e),this.parent.allowMultiSelection){var i=this.gridObj.getSelectedRowIndexes(),n=i.length;if(n>1){var s=this.gridObj.getRowsObject()[i[n-1]].data;this.parent.currentItemText=t.getValue("name",s)}}if(1===this.parent.selectedItems.length){s=this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;this.parent.currentItemText=t.getValue("name",s)}var a=t.getValue("rowIndexes",e),o=t.getValue("enableSelectMultiTouch",this.gridObj.selectionModule);this.parent.isDevice&&t.isNullOrUndefined(a)&&e.target&&!o&&!e.target.closest(".e-headercell")&&(this.parent.isFile=t.getValue("isFile",e.data),this.parent.isFile||this.openContent(e.data)),this.parent.visitedItem=e.row},e.prototype.onPathColumn=function(e){if("Details"===this.parent.view){var t=this.gridObj.columns.length;if(""===this.parent.breadcrumbbarModule.searchObj.element.value){var i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&(this.gridObj.columns.pop(),this.gridObj.refreshColumns())}}},e.prototype.selectedRecords=function(){this.parent.setProperties({selectedItems:[]},!0);for(var e=this.gridSelectNodes(),t=0;t<e.length;){var i=e[t];this.parent.selectedItems.push(i.name),t++}},e.prototype.onDeSelection=function(e){if(this.isInteracted){this.parent.activeElements[0].querySelector("."+ht)&&(this.selectedRecords(),this.parent.activeElements=this.gridObj.element.querySelectorAll("."+st));for(var i=e.data,n=0,s=i.length;n<s;n++){var a=this.parent.selectedItems.indexOf(t.getValue("name",i[n]));a>-1&&this.parent.selectedItems.splice(a,1)}0===this.parent.selectedItems.length&&(t.setValue("enableSelectMultiTouch",!1,this.gridObj.selectionModule),t.removeClass([this.parent.element],Ge)),this.parent.notify(pi,{}),this.triggerSelect("unselect",e),this.parent.visitedItem=null}else this.isInteracted=!0},e.prototype.triggerSelect=function(e,t){var i={action:e,fileDetails:t.data};this.parent.trigger("fileSelect",i)},e.prototype.wireEvents=function(){this.wireClickEvent(!0),this.keyboardModule=new t.KeyboardEvents(this.gridObj.element,{keyAction:this.keyDown.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),t.EventHandler.add(this.gridObj.element,"focus",this.removeSelection,this)},e.prototype.unWireEvents=function(){this.wireClickEvent(!1),this.keyboardModule.destroy(),t.EventHandler.remove(this.gridObj.element,"focus",this.removeSelection)},e.prototype.wireClickEvent=function(e){if(e){var i=this,n=this.gridObj.getContent();this.clickObj=new t.Touch(n,{tapHold:function(e){if(i.parent.isDevice){e.originalEvent.preventDefault(),i.parent.allowMultiSelection&&(t.setValue("enableSelectMultiTouch",i.parent.allowMultiSelection,i.gridObj.selectionModule),t.addClass([i.parent.element],Ge));var n=e.originalEvent.target;if(n){var s=t.closest(n,".e-row"),a=i.gridObj.getRows().indexOf(s);i.gridObj.selectRow(a)}}}})}else this.clickObj&&this.clickObj.destroy()},e.prototype.removeSelection=function(){t.removeClass([this.parent.element],Ge),this.gridObj.clearSelection(),this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(pi,{})},e.prototype.keyDown=function(e){if(this.isRendered){e.preventDefault();switch(e.action){case"altEnter":this.parent.getDetails();break;case"esc":y(this.parent),this.parent.selectedNodes=[],this.parent.navigationpaneModule&&(this.parent.navigationpaneModule.treeNodes=[]);break;case"del":case"shiftdel":this.parent.selectedItems&&this.parent.selectedItems.length>0&&X(this.parent,"Delete");break;case"enter":if(-1===this.gridObj.selectedRowIndex)break;var i=this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;if(i){var n=JSON.parse(JSON.stringify(i));this.openContent(n)}break;case"ctrlC":y(this.parent),this.parent.navigationpaneModule.treeNodes=[],this.parent.navigationpaneModule.copyNodes=[],this.parent.cutNodes=[],this.parent.selectedNodes=[],this.parent.targetPath=this.parent.path,f(this.parent.navigationpaneModule,this.gridSelectNodes(),"copy"),this.parent.fileAction="CopyTo",this.parent.enablePaste=!0,this.parent.notify(Oi,{}),this.parent.fileOperation(this.gridSelectNodes());break;case"ctrlV":this.parent.pasteHandler();break;case"ctrlX":C(this.parent),this.parent.fileOperation(this.parent.nodeNames);break;case"shiftF10":J(this.parent,this.gridSelectNodes());break;case"f2":1===this.parent.selectedItems.length&&(this.updateRenameData(),X(this.parent,"Rename"));break;case"ctrlA":var s=[this.gridObj.getSelectedRecords()[0]];this.parent.currentItemText=t.getValue("name",s[0]);break;case"tab":var a=N(this.parent,this.gridObj.dataSource);this.parent.selectedItems=[t.getValue("name",a[0])],this.selectRecords([t.getValue("name",a[0])])}}},e.prototype.gridSelectNodes=function(){return this.gridObj.getSelectedRecords()},e.prototype.updateRenameData=function(){var e=this.gridSelectNodes()[0];this.parent.itemData=[e],this.parent.currentItemText=t.getValue("name",e),this.parent.isFile=t.getValue("isFile",e)},e}();e.AjaxSettings=le,e.toolbarItems=pe,e.ToolbarSettings=ce,e.SearchSettings=me,e.columnArray=be,e.DetailsViewSettings=ve,e.fileItems=Ie,e.folderItems=Ce,e.layoutItems=Se,e.ContextMenuSettings=je,e.NavigationPaneSettings=xe,e.UploadSettings=Re,e.TOOLBAR_ID=Me,e.LAYOUT_ID="_layout",e.TREE_ID=ke,e.GRID_ID=Le,e.LARGEICON_ID=Te,e.DIALOG_ID=Ae,e.ALT_DIALOG_ID="_alt_dialog",e.IMG_DIALOG_ID=Be,e.EXTN_DIALOG_ID=_e,e.UPLOAD_DIALOG_ID=Ue,e.CONTEXT_MENU_ID=Fe,e.SORTBY_ID="_sortby",e.VIEW_ID="_view",e.SPLITTER_ID="_splitter",e.CONTENT_ID=Ve,e.BREADCRUMBBAR_ID=He,e.UPLOAD_ID=qe,e.SEARCH_ID="_search",e.ROOT="e-filemanager",e.CONTROL="e-control",e.CHECK_SELECT=ze,e.ROOT_POPUP=Ke,e.MOBILE=We,e.MULTI_SELECT=Ge,e.FILTER=Ye,e.LAYOUT="e-layout",e.LAYOUT_CONTENT=Je,e.LARGE_ICONS=Xe,e.TB_ITEM=$e,e.LIST_ITEM=Qe,e.LIST_TEXT=Ze,e.LIST_PARENT=et,e.TB_OPTION_TICK=tt,e.TB_OPTION_DOT=it,e.BLUR=nt,e.ACTIVE=st,e.HOVER=at,e.FOCUS=ot,e.CHECK=rt,e.FRAME="e-frame",e.CB_WRAP=lt,e.ROW="e-row",e.ROWCELL=ht,e.EMPTY=dt,e.EMPTY_CONTENT=pt,e.EMPTY_INNER_CONTENT=ct,e.FOLDER="e-fe-folder",e.ICON_IMAGE=ut,e.ICON_MUSIC=ft,e.ICON_VIDEO=mt,e.LARGE_ICON=gt,e.LARGE_EMPTY_FOLDER=yt,e.LARGE_EMPTY_FOLDER_TWO="e-empty-icon.e-fe-folder",e.LARGE_ICON_FOLDER=bt,e.SELECTED_ITEMS="e-items",e.TEXT_CONTENT="e-text-content",e.GRID_HEADER="e-gridheader",e.TEMPLATE_CELL=vt,e.TREE_VIEW=Ot,e.MENU_ITEM="e-menu-item",e.MENU_ICON=wt,e.SUBMENU_ICON="e-caret",e.GRID_VIEW=It,e.ICON_VIEW=Ct,e.ICON_OPEN=St,e.ICON_UPLOAD=jt,e.ICON_CUT=Nt,e.ICON_COPY=Et,e.ICON_PASTE=xt,e.ICON_DELETE=Dt,e.ICON_RENAME=Pt,e.ICON_NEWFOLDER=Rt,e.ICON_DETAILS=Mt,e.ICON_SHORTBY=kt,e.ICON_REFRESH=Lt,e.ICON_SELECTALL=Tt,e.ICON_DOWNLOAD=At,e.ICON_OPTIONS="e-icons e-fe-options",e.ICON_GRID=Bt,e.ICON_LARGE=_t,e.ICON_BREADCRUMB=Ut,e.ICON_CLEAR=Ft,e.ICONS=Vt,e.DETAILS_LABEL="e-detailslabel",e.ERROR_CONTENT=Ht,e.STATUS=qt,e.BREADCRUMBS="e-address",e.RTL="e-rtl",e.DISPLAY_NONE=zt,e.COLLAPSED="e-node-collapsed",e.FULLROW=Kt,e.ICON_COLLAPSIBLE="e-icon-collapsible",e.SPLIT_BAR=Wt,e.HEADER_CHECK=Gt,e.OVERLAY="e-fe-overlay",e.VALUE=Yt,e.isFile=Jt,e.modelChanged=Xt,e.initialEnd=$t,e.finalizeEnd=Qt,e.createEnd=Zt,e.deleteEnd=ei,e.refreshEnd=ti,e.resizeEnd=ii,e.splitterResize=ni,e.pathChanged=si,e.destroy=ai,e.beforeRequest=oi,e.upload="upload",e.afterRequest=ri,e.download="download",e.uiRefresh="ui-refresh",e.search=li,e.openInit=hi,e.openEnd=di,e.selectionChanged=pi,e.selectAllInit=ci,e.clearAllInit=ui,e.clearPathInit=fi,e.layoutChange=mi,e.sortByChange=gi,e.nodeExpand=yi,e.renameInit=bi,e.renameEnd=vi,e.showPaste=Oi,e.hidePaste=wi,e.hideLayout=Ii,e.updateTreeSelection=Ci,e.treeSelect="select-node",e.sortColumn=Si,e.pathColumn=ji,e.searchTextChange=Ni,e.downloadInit=Ei,e.FileManager=Li,e.Toolbar=Ti,e.BreadCrumbBar=Di,e.NavigationPane=Ai,e.DetailsView=Bi,e.LargeIconsView=xi,e.createDialog=X,e.createImageDialog=se,e.ContextMenu=Pi,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-filemanager.umd.min.js.map
